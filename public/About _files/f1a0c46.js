(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{104:function(t,e,n){"use strict";n(21),n(24);var r=n(88),o={props:{minimum:{type:Number,default:0},maximum:{type:Number,default:0},allDefinitions:{type:Boolean},value:{type:Array,default:function(){return[]}}},data:function(){return{selectionMinimum:this.minimum,selectionMaximum:this.maximum}},created:function(){this.setSelection(this.value)},mixins:[r.a],watch:{minimum:function(t){this.selectionMinimum=Math.max(parseInt(t),0)},maximum:function(t){var e=this;if(e.selectionMaximum=Math.max(parseInt(t),0),e.selectionMaximum&&e.value.length>e.selectionMaximum){var n=e.value.slice(0,e.selectionMaximum);e.setSelection(n)}},value:function(t){this.setSelection(t)},selection:function(s){this.$emit("input",s)}}},l=n(1),component=Object(l.a)(o,undefined,undefined,!1,null,null,null);e.a=component.exports},1121:function(t,e,n){"use strict";n(767)},1122:function(t,e,n){var r=n(9)(!1);r.push([t.i,'.border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.realm-select-modal{max-width:500px;max-height:80vh}.realm-select-modal .tabset .tabset-menu{background:#333;color:#fff}.realm-select-modal .tabset .tabset-menu a{border:none!important;padding:20px 15px}.realm-select-modal .tabset .tabset-menu a.active{background:none;opacity:1;border:none}.realm-select-modal .flex-tabs{background:#eaedf2}@media (max-width:768px){.realm-select-modal{max-width:none}}.realm-select-modal .realm-select-item-outer{background:#eaedf2;padding:0 5px 0 15px}.realm-select-modal .realm-select-item-outer.has-children+.realm-select-item-outer>.realm-select-item:first-child{border-top:1px solid #cbd2df!important}.realm-select-modal .realm-select-item-outer .realm-select-item{border:1px solid #cbd2df;display:block;padding:10px;color:#888;position:relative;background:#fff;font-weight:400;cursor:pointer}.realm-select-modal .realm-select-item-outer .realm-select-item:hover{background:#fafafa}.realm-select-modal .realm-select-item-outer .realm-select-item .type{font-weight:1!important;font-style:italic!important;font-size:.9em!important;opacity:.5}.realm-select-modal .realm-select-item-outer .realm-select-item .check-icon{width:35px;text-align:right}.realm-select-modal .realm-select-item-outer .realm-select-item:first-child{border-top:none}.realm-select-modal .realm-select-item-outer .realm-select-item:before{content:"";border-top:1px solid #cbd2df;position:absolute;left:-16px;top:19px;width:15px;height:2px;display:block}.realm-select-modal .realm-select-item-outer .realm-select-item .v-list__tile__action{opacity:0}.realm-select-modal .realm-select-item-outer .realm-select-item .dot{border-radius:100%;display:inline-block;width:10px;height:10px;margin-right:10px;background-color:rgba(68,68,68,.3)}.realm-select-modal .realm-select-item-outer .children{padding:0 0 15px;margin-left:21px;border-left:1px solid #cbd2df;position:relative}@media (max-width:768px){.realm-select-modal .realm-select-item-outer .children{margin-left:5px}}.realm-select-modal .realm-select-item-outer .children:before{content:"";position:absolute;width:1px;height:20px;display:block;left:-1px;border-left:1px solid #cbd2df;top:0}.realm-select-modal .realm-select-item-outer .children:after{content:"";position:absolute;width:1px;height:36px;display:block;left:-1px;border-left:1px solid #eaedf2;bottom:0}.realm-select-modal .has-selection .realm-select-item{background:#edf0f4}.realm-select-modal .has-selection .realm-select-item.selected{background:#fff;border-color:#cbd2df;color:#333;font-weight:600;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}',""]),t.exports=r},1123:function(t,e,n){"use strict";n(768)},1124:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top[data-v-0fa6b53a]{border-top:1px solid rgba(0,0,0,.05)}.border-right[data-v-0fa6b53a]{border-right:1px solid rgba(0,0,0,.05)}.border-bottom[data-v-0fa6b53a]{border-bottom:1px solid rgba(0,0,0,.05)}.border-left[data-v-0fa6b53a]{border-left:1px solid rgba(0,0,0,.05)}.error--text[data-v-0fa6b53a]{color:#ff5252!important;caret-color:#ff5252!important}.success--text[data-v-0fa6b53a]{color:#4cc650!important;caret-color:#4cc650!important}.warning--text[data-v-0fa6b53a]{color:#f0974e!important;caret-color:#f0974e!important}.primary--text[data-v-0fa6b53a]{color:#6378f6!important;caret-color:#6378f6!important}.label[data-v-0fa6b53a]{max-width:150px;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),t.exports=r},1125:function(t,e,n){"use strict";n(769)},1126:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top[data-v-fc4302f6]{border-top:1px solid rgba(0,0,0,.05)}.border-right[data-v-fc4302f6]{border-right:1px solid rgba(0,0,0,.05)}.border-bottom[data-v-fc4302f6]{border-bottom:1px solid rgba(0,0,0,.05)}.border-left[data-v-fc4302f6]{border-left:1px solid rgba(0,0,0,.05)}.error--text[data-v-fc4302f6]{color:#ff5252!important;caret-color:#ff5252!important}.success--text[data-v-fc4302f6]{color:#4cc650!important;caret-color:#4cc650!important}.warning--text[data-v-fc4302f6]{color:#f0974e!important;caret-color:#f0974e!important}.primary--text[data-v-fc4302f6]{color:#6378f6!important;caret-color:#6378f6!important}.subfields[data-v-fc4302f6]{border-radius:5px;background:#eee;padding:5px}",""]),t.exports=r},1127:function(t,e,n){"use strict";n(770)},1128:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.filter-condition-row.mini .v-input{font-size:13px!important}.filter-condition-row.mini .v-messages{display:none!important}.filter-condition-row.mini .v-select__slot{overflow:hidden}.filter-condition-row.mini .layout{margin:-2px!important}.filter-condition-row.mini .flex{padding:2px!important}.filter-condition-row.mini .v-select,.filter-condition-row.mini .v-text-field{margin:0;padding:0}.filter-condition-row.mini .v-select .v-label,.filter-condition-row.mini .v-text-field .v-label{font-size:13px!important}.filter-condition-row.mini .v-select .v-select__slot,.filter-condition-row.mini .v-select .v-text-field__slot,.filter-condition-row.mini .v-text-field .v-select__slot,.filter-condition-row.mini .v-text-field .v-text-field__slot{white-space:nowrap;font-size:13px;padding:0}",""]),t.exports=r},1129:function(t,e,n){"use strict";n(771)},1130:function(t,e,n){var r=n(9)(!1);r.push([t.i,'.border-top[data-v-4d036e2e]{border-top:1px solid rgba(0,0,0,.05)}.border-right[data-v-4d036e2e]{border-right:1px solid rgba(0,0,0,.05)}.border-bottom[data-v-4d036e2e]{border-bottom:1px solid rgba(0,0,0,.05)}.border-left[data-v-4d036e2e]{border-left:1px solid rgba(0,0,0,.05)}.error--text[data-v-4d036e2e]{color:#ff5252!important;caret-color:#ff5252!important}.success--text[data-v-4d036e2e]{color:#4cc650!important;caret-color:#4cc650!important}.warning--text[data-v-4d036e2e]{color:#f0974e!important;caret-color:#f0974e!important}.primary--text[data-v-4d036e2e]{color:#6378f6!important;caret-color:#6378f6!important}.filter-group-outer .description[data-v-4d036e2e]{font-size:13px;padding:10px 0}.filter-group-outer .select-operator[data-v-4d036e2e]{font-size:13px;border:1px solid transparent;background:none;text-align:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:inline-block}.filter-group-outer .select-operator[data-v-4d036e2e]:hover{border:1px solid rgba(0,0,0,.1);background:#fff}.filter-group-outer.mini .layout[data-v-4d036e2e]{margin:-2px!important}.filter-group-outer.mini .flex[data-v-4d036e2e]{padding:2px!important}.filter-group-outer.mini .operator[data-v-4d036e2e]{font-weight:700;overflow:hidden;text-align:center;text-transform:uppercase;font-size:10px;padding:0 3px;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);line-height:20px;height:20px;color:transparent;border:1px solid #fff;background:#4cc650;border-radius:10px;opacity:0}.filter-group-outer.mini .operator.additional[data-v-4d036e2e]{opacity:1;color:#fff}.filter-group-outer.mini .operator.nor[data-v-4d036e2e]{background:#333}.filter-group-outer.mini .operator.or[data-v-4d036e2e]{background:#f0974e}.filter-group-outer.mini .operator-column[data-v-4d036e2e]{-webkit-box-flex:0!important;-ms-flex:none!important;flex:none!important;padding-top:8px;margin-right:8px;width:25px;position:relative}.filter-group-outer.mini .operator-column[data-v-4d036e2e]:before{content:"";border-left:2px solid rgba(0,0,0,.1);display:block;position:absolute;right:50%;height:100%;top:0;bottom:0}.filter-group-outer.mini .operator-column.and[data-v-4d036e2e]:before{border-left-color:#4cc650}.filter-group-outer.mini .operator-column.nor[data-v-4d036e2e]:before{border-left-color:#333}.filter-group-outer.mini .operator-column.or[data-v-4d036e2e]:before{border-left-color:#f0974e}.filter-group-outer.mini .filter-group[data-v-4d036e2e]{overflow:hidden}.filter-group-outer.mini .filter-group.additional[data-v-4d036e2e]{border:1px solid #ccc;-webkit-box-shadow:0 2px 2px rgba(0,0,0,.1);box-shadow:0 2px 2px rgba(0,0,0,.1);border-radius:5px;background:#fff;margin-bottom:15px}@media (min-width:769px){.filter-group-outer.mini .filter-group .hover[data-v-4d036e2e]{opacity:0}}.filter-group-outer.mini .filter-group:hover .hover[data-v-4d036e2e]{opacity:1}.filter-group-outer.large .operator[data-v-4d036e2e]{font-weight:600;letter-spacing:.05em;text-transform:uppercase;font-size:12px;padding:0 10px;position:absolute;right:30px;line-height:32px;color:transparent}.filter-group-outer.large .operator.additional[data-v-4d036e2e]{background:#4cc650;color:#fff;border-radius:5px 0 0 5px}.filter-group-outer.large .operator.additional[data-v-4d036e2e]:after{content:"";display:block;border:16px solid transparent;border-left-color:#4cc650;position:absolute;width:32px;height:32px;top:0;right:-32px}.filter-group-outer.large .operator.additional.nor[data-v-4d036e2e]{background:#333}.filter-group-outer.large .operator.additional.nor[data-v-4d036e2e]:after{border-left-color:#333}.filter-group-outer.large .operator.additional.or[data-v-4d036e2e]{background:#f0974e}.filter-group-outer.large .operator.additional.or[data-v-4d036e2e]:after{border-left-color:#f0974e}.filter-group-outer.large .operator[data-v-4d036e2e]:before{content:"";display:block;background:#4cc650;position:absolute;right:-30px;top:50%;margin-top:-6px;width:12px;height:12px;border-radius:100%;border:1px solid #fff}.filter-group-outer.large .operator.nor[data-v-4d036e2e]:before{background:#333}.filter-group-outer.large .operator.or[data-v-4d036e2e]:before{background:#f0974e}.filter-group-outer.large .operator-column[data-v-4d036e2e]{-webkit-box-flex:0!important;-ms-flex:none!important;flex:none!important;padding-top:20px;width:90px;margin-right:25px;position:relative}.filter-group-outer.large .operator-column[data-v-4d036e2e]:before{content:"";border-left:2px solid rgba(0,0,0,.1);display:block;position:absolute;right:5px;height:100%;top:0;bottom:0}.filter-group-outer.large .operator-column.and[data-v-4d036e2e]:before{border-left-color:#4cc650}.filter-group-outer.large .operator-column.nor[data-v-4d036e2e]:before{border-left-color:#333}.filter-group-outer.large .operator-column.or[data-v-4d036e2e]:before{border-left-color:#f0974e}.filter-group-outer.large .filter-group.additional[data-v-4d036e2e]{border-top:1px solid rgba(0,0,0,.1);padding-top:15px;margin-top:15px}.filter-group-outer.large .filter-group .hover[data-v-4d036e2e]{opacity:0}.filter-group-outer.large .filter-group:hover .hover[data-v-4d036e2e]{opacity:1}.filter-group-outer .v-btn.ghost[data-v-4d036e2e]{border:1px dashed rgba(0,0,0,.5)}',""]),t.exports=r},1137:function(t,e,n){"use strict";n(775)},1138:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.content-select-modal{width:80vw;min-width:300px;max-width:1200px}",""]),t.exports=r},1194:function(t,e,n){"use strict";n(790)},1195:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.sq-card-number{clear:both}.sq-cvv,.sq-expiration-date{float:left}.sq-input{display:inline-block;border:1px solid #e0e2e3;border-radius:4px;height:40px;padding:10px}.sq-input--focus{border:1px solid #4a90e2;-webkit-box-shadow:0 0 2px 0 rgba(0,0,0,.1),0 2px 2px 0 rgba(0,0,0,.1);box-shadow:0 0 2px 0 rgba(0,0,0,.1),0 2px 2px 0 rgba(0,0,0,.1)}.sq-input--error{border:1px solid red}",""]),t.exports=r},1196:function(t,e,n){"use strict";n(791)},1197:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top[data-v-346cf334]{border-top:1px solid rgba(0,0,0,.05)}.border-right[data-v-346cf334]{border-right:1px solid rgba(0,0,0,.05)}.border-bottom[data-v-346cf334]{border-bottom:1px solid rgba(0,0,0,.05)}.border-left[data-v-346cf334]{border-left:1px solid rgba(0,0,0,.05)}.error--text[data-v-346cf334]{color:#ff5252!important;caret-color:#ff5252!important}.success--text[data-v-346cf334]{color:#4cc650!important;caret-color:#4cc650!important}.warning--text[data-v-346cf334]{color:#f0974e!important;caret-color:#f0974e!important}.primary--text[data-v-346cf334]{color:#6378f6!important;caret-color:#6378f6!important}.text-center[data-v-346cf334]{text-align:center}.payment-logo[data-v-346cf334]{width:100px;display:inline-block}.fluro-prompt-dialog[data-v-346cf334]{min-width:300px;text-align:center}.fluro-prompt-dialog form[data-v-346cf334]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.fluro-prompt-dialog .v-list__tile__title[data-v-346cf334]{font-size:.9em;font-weight:500}",""]),t.exports=r},1274:function(t,e,n){"use strict";n(824)},1275:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}",""]),t.exports=r},1276:function(t,e,n){"use strict";n(825)},1277:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top[data-v-75ae2794]{border-top:1px solid rgba(0,0,0,.05)}.border-right[data-v-75ae2794]{border-right:1px solid rgba(0,0,0,.05)}.border-bottom[data-v-75ae2794]{border-bottom:1px solid rgba(0,0,0,.05)}.border-left[data-v-75ae2794]{border-left:1px solid rgba(0,0,0,.05)}.error--text[data-v-75ae2794]{color:#ff5252!important;caret-color:#ff5252!important}.success--text[data-v-75ae2794]{color:#4cc650!important;caret-color:#4cc650!important}.warning--text[data-v-75ae2794]{color:#f0974e!important;caret-color:#f0974e!important}.primary--text[data-v-75ae2794]{color:#6378f6!important;caret-color:#6378f6!important}.inline-tag[data-v-75ae2794]{cursor:pointer}.inline-tag .on[data-v-75ae2794]{display:none}.inline-tag .off[data-v-75ae2794]{display:inline-block}.inline-tag:hover .off[data-v-75ae2794]{display:none}.inline-tag:hover .on[data-v-75ae2794]{display:inline-block}",""]),t.exports=r},1313:function(t,e,n){"use strict";n(844)},1314:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.fluro-task-modal{min-width:300px}@media (min-width:768px){.fluro-task-modal{max-width:500px}}.fluro-task-modal .introduction{font-size:1.1em}.fluro-task-modal .task-options{padding:15px;background:rgba(0,0,0,.05)}.fluro-task-modal .task-options .task-option-item{background:#fff;padding:10px 15px;font-size:1.2em;border:1px solid rgba(0,0,0,.2);border-radius:5px;margin-bottom:5px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.fluro-task-modal .task-options .task-option-item:hover{border:1px solid rgba(0,0,0,.4)}.fluro-task-modal .task-options .task-option-item .task-icon{width:50px;height:50px;line-height:50px;background:#eee;border-radius:50%;text-align:center;font-size:20px;border:1px solid rgba(0,0,0,.05);color:rgba(0,0,0,.5);margin-left:15px}.fluro-task-modal .task-options .task-option-item.complete .task-icon{color:#4cc650}.fluro-task-modal .task-options .task-option-item.complete.active{background-color:#86d889;border-color:#4cc650;color:#1d5c1f}.fluro-task-modal .task-options .task-option-item.complete.active .task-icon{background-color:#4cc650;color:#fff}.fluro-task-modal .task-options .task-option-item.pending .task-icon{color:#f0974e}.fluro-task-modal .task-options .task-option-item.pending.active{background-color:#f8ceac;border-color:#f0974e;color:#ec7b1f}.fluro-task-modal .task-options .task-option-item.pending.active .task-icon{background-color:#f0974e;color:#fff}.fluro-task-modal .task-options .task-option-item.failed .task-icon{color:#ff5252}.fluro-task-modal .task-options .task-option-item.failed.active{background-color:#ff9f9f;border-color:#ff5252;color:#b80000}.fluro-task-modal .task-options .task-option-item.failed.active .task-icon{background-color:#ff5252;color:#fff}",""]),t.exports=r},1315:function(t,e,n){"use strict";n(845)},1316:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.fluro-task-edit-modal{min-width:300px}@media (min-width:768px){.fluro-task-edit-modal{max-width:500px}}.fluro-task-edit-modal .fluro-editor-textarea{background:#fff}.fluro-task-edit-modal .tabset-content,.fluro-task-edit-modal .tabset-menu a.active{background:#fafafa}.fluro-task-edit-modal .bordered{border:1px solid rgba(0,0,0,.05)}.fluro-task-edit-modal .fluro-content-form-field-checkbox{margin-bottom:25px}.fluro-task-edit-modal .fluro-content-form-field-checkbox .v-input__slot{margin-bottom:5px}",""]),t.exports=r},1317:function(t,e,n){"use strict";n(846)},1318:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.fluro-task-item{padding:10px 3px 5px;border-radius:3px;font-size:1.1em;cursor:pointer}.fluro-task-item .input{display:block;padding:5px;background:#fff;border:1px solid #6378f6;width:100%}.fluro-task-item .detail-placeholder,.fluro-task-item .edit-button,.fluro-task-item .hover{opacity:0}.fluro-task-item:hover{opacity:.8}.fluro-task-item:hover .detail-placeholder,.fluro-task-item:hover .edit-button,.fluro-task-item:hover .hover{opacity:1}.fluro-task-item.complete{color:rgba(29,92,31,.4);text-decoration:line-through}.fluro-task-item.pending{background-color:#fef8f3;border-color:#f0974e;color:#ec7b1f}.fluro-task-item.failed{background-color:#fff;border-color:#ff5252;color:#b80000}.fluro-task-item p:last-child{margin-bottom:0}.fluro-task-item .wrap{max-width:500px}.fluro-task-item .v-btn .checkbox-outer{background:#fff;border-radius:2px;border:2px solid rgba(0,0,0,.2);width:25px;height:25px;display:inline-block;padding:0;margin:0;line-height:25px;text-align:center;font-size:14px}.fluro-task-item .v-btn .checkbox-outer svg{opacity:0}.fluro-task-item .v-btn .checkbox-outer.complete{background:#4cc650;color:#fff;border-color:#4cc650!important}.fluro-task-item .v-btn .checkbox-outer.complete svg{opacity:1}.fluro-task-item .v-btn .checkbox-outer.failed{background:#ff5252;color:#fff;border-color:#ff5252!important}.fluro-task-item .v-btn .checkbox-outer.failed svg{opacity:1}.fluro-task-item .v-btn .checkbox-outer.pending{background:#f0974e;color:#fff;border-color:#f0974e!important}.fluro-task-item .v-btn .checkbox-outer.pending svg{opacity:1}.fluro-task-item .v-btn:hover .checkbox-outer{border:2px solid rgba(0,0,0,.5)}.fluro-task-item .v-btn:hover .checkbox-outer svg{opacity:.5}",""]),t.exports=r},1319:function(t,e,n){"use strict";n(847)},1320:function(t,e,n){var r=n(9)(!1);r.push([t.i,".border-top{border-top:1px solid rgba(0,0,0,.05)}.border-right{border-right:1px solid rgba(0,0,0,.05)}.border-bottom{border-bottom:1px solid rgba(0,0,0,.05)}.border-left{border-left:1px solid rgba(0,0,0,.05)}.error--text{color:#ff5252!important;caret-color:#ff5252!important}.success--text{color:#4cc650!important;caret-color:#4cc650!important}.warning--text{color:#f0974e!important;caret-color:#f0974e!important}.primary--text{color:#6378f6!important;caret-color:#6378f6!important}.fluro-task-list{margin-bottom:25px;border:1px solid rgba(0,0,0,.15);padding:10px;border-radius:3px;background:#fff}.fluro-task-list input[block]{display:block;padding:5px;background:#fff;border:1px solid #6378f6;width:100%}.fluro-task-list .task-list-items{min-height:5px}.fluro-task-list .task-list-items .fluro-task-item{background:#eee;margin-bottom:1px}.fluro-task-list .hover{opacity:0}.fluro-task-list:hover .hover{opacity:1}",""]),t.exports=r},135:function(t,e,n){"use strict";n(12),n(31);var r=n(0),o=n.n(r),l=n(25),c=n(75),m=n(74),d={props:{options:{type:Object}},components:{FluroTabset:c.a,FluroTab:m.a},mixins:[l.a],data:function(){return{selector:this.options.selector}}},f=(n(1274),n(1)),v=(Object(f.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,{asyncComputed:{tagDefinitions:{default:[],get:function(){return this.$fluro.types.subTypes("tag")}}},computed:{tagGroups:function(){var t=this,e=o.a.reduce(t.tagDefinitions,(function(t,e){return t[e.definitionName]={title:e.title,tags:[],key:e.definitionName},t}),{tag:{title:"Tags",tags:[],key:"tag"}});return o.a.chain(this.model).reduce((function(e,n){var r=n.definition||"tag",o=e[r];return o||(o=e[r]={title:t.$fluro.types.readable(r,!0),tags:[]}),o.tags.push(n),e}),e).values().value()}},methods:{removeTag:function(t){var e=this.model.indexOf(t);this.model.splice(e,1),console.log("Remove",e)}},components:{FluroContentSelectButton:n(82).default},props:{small:{type:Boolean},block:{type:Boolean},value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,model:this.value}},watch:{model:function(t){this.$emit("input",t)}}}),h=(n(1276),Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tag-select"},[n("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},nativeOn:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"pill mx-0",attrs:{small:t.small,block:t.block}},r),[t._v("\n\t\t\t\t"+t._s(t.model.length?t.model.length:null)+"\n\t\t\t\t"),n("fluro-icon",{attrs:{right:t.model.length>0,type:"tag"}}),t._v(" "),t._t("default")],2)]}}],null,!0)},[t._v(" "),n("v-card",{attrs:{tile:""}},[n("flex-column",{staticStyle:{"max-width":"320px","max-height":"80vh"}},[n("flex-column-body",[n("v-container",t._l(t.tagGroups,(function(e){return n("v-input",{staticClass:"no-flex"},[n("v-label",[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"inline-tags"},t._l(e.tags,(function(e){return n("span",{staticClass:"inline-tag",on:{click:function(n){return t.removeTag(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t"),n("fluro-icon",{staticClass:"off",attrs:{right:"",icon:"tag"}}),t._v(" "),n("fluro-icon",{staticClass:"on",attrs:{right:"",icon:"times"}})],1)})),0),t._v(" "),n("fluro-content-select-button",{attrs:{block:"",type:e.key},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)})),1)],1)],1)],1)],1)],1)}),[],!1,null,"75ae2794",null));e.a=h.exports},171:function(t,e,n){"use strict";n.r(e);n(17),n(24),n(21),n(12),n(31),n(23),n(22);var r=n(0),o=n.n(r),l=n(18),c=n(205);function m(t,e,n){return o.a.chain(t).map((function(t,r){var o=[];if(t.fields&&t.fields.length){if(t.asObject||"embedded"==t.directive)e.push(t.key),n.push(t.title),t.trail=e.slice(),t.titles=n.slice(),e.pop(),n.pop(),o.push(t),1!=t.maximum||1!=t.minimum&&t.asObject?(e.push(t.key+"[]"),n.push(t.title)):(e.push(t.key),n.push(t.title));var l=m(t.fields,e,n);(t.asObject||"embedded"==t.directive)&&(e.pop(),n.pop()),o.push(l)}else e.push(t.key),n.push(t.title),t.trail=e.slice(),t.titles=n.slice(),e.pop(),n.pop(),o.push(t);return o})).flattenDeep().value()}var d={props:{forceLocalValues:{type:Boolean},filterFields:{type:Array,default:function(){return[]}},useSample:{type:Boolean},type:{type:String},fields:{type:Array,default:function(){return[]}},mini:{type:Boolean},rows:{type:Array},value:{type:Object,required:!0,default:function(){return{guid:this.$fluro.utils.guid(),operator:"and",filters:[]}}},debounce:{type:Number,default:500},limit:{type:Boolean}},data:function(){var t=this,e=JSON.parse(JSON.stringify(this.value));return e.filters||(e.filters=[]),o.a.each(e.filters,(function(filter){filter.guid=t.$fluro.utils.guid()})),{model:e,debounced:null,operatorOptions:[{text:"All",value:"and"},{text:"Any",value:"or"},{text:"All",value:"and"}],asyncKeys:[],loadingKeys:!1}},created:function(){var t=this;t.debounced=o.a.debounce((function(){t.$emit("input",t.model)}),t.debounce)},components:{FilterConditionRow:c.default},methods:{operatingWord:function(t,i){return i?t.operator:"nor"===t.operator?"Not":"Where"},addRule:function(t){var e=this.rows&&this.rows.length?"in":"==";t.filters.push({operator:"and",guid:this.$fluro.utils.guid(),filters:[{comparator:e}]})},addCondition:function(t){var e=this.rows&&this.rows.length?"in":"==";t.filters.push({guid:this.$fluro.utils.guid(),comparator:e})},duplicateEntry:function(t,i){var e=JSON.parse(JSON.stringify(t.filters[i]));e.guid=this.$fluro.utils.guid(),t.filters.splice(i,0,e)},removeEntry:function(t,i){this.$delete(t.filters,i),t.filters.length<2&&this.$set(t,"operator","and")},retrieveKeys:function(){var t=this;if(!t.rows||!t.rows.length)return t.asyncKeys=[],void(this.loadingKeys=!1);this.loadingKeys=!0;var e=t.rowChangeString,n=this.$fluro.cache.get("filter-distinct-keys"),r=n[e];if(!r){var o=t.$fluro.utils.arrayIDs(t.rows),l={};t.definition&&t.definition.type&&(l.type=t.definition.type.definitionName),r=n[e]=t.$fluro.content.keys(o,l)}r.then((function(e){t.asyncKeys=e,t.loadingKeys=!1}),(function(r){t.asyncKeys=[],t.loadingKeys=!1,n[e]=null}))}},asyncComputed:{eventRealms:{default:[],get:function(){var t=this;return new Promise((function(e,n){return t.$fluro.access.retrieveSelectableRealms("view","event","event",{flat:!0}).then((function(t){var n=o.a.reduce(t,(function(t,e){return t=t.concat(e.realms)}),[]);e(n)})).catch(n)}))}},eventTracks:{get:function(){var t=this;return new Promise((function(e,n){t.$fluro.api.get("/content/eventtrack",{params:{fields:["title","definition","status"],allDefinitions:!0}}).then((function(n){var r=o.a.chain(n.data).map((function(track){if("active"==track.status)return track.definitionTitle=t.$fluro.types.readable(track.definition),track})).compact().value();e(r)})).catch(n)}))}},groupNames:{get:function(){return Promise.resolve([])}},interactionTypes:{get:function(){return this.isContactType?this.$fluro.types.subTypes("interaction"):Promise.resolve([])}},ticketTypes:{get:function(){var t=this;switch(t.basicType){case"contact":case"interaction":case"checkin":return new Promise((function(e,n){return t.$fluro.api.get("/tickets/filter/types").then((function(t){return e(t.data)})).catch(n)}));default:return Promise.resolve([])}}},rooms:{get:function(){var t=this;return"event"===t.basicType?new Promise((function(e,n){return t.$fluro.api.get("/event/filter/rooms").then((function(t){return e(t.data)})).catch(n)})):Promise.resolve([])}},assignmentPositions:{get:function(){var t=this;return"contact"===t.basicType?new Promise((function(e,n){return t.$fluro.api.get("/assignments/filter/types").then((function(t){return e(t.data)})).catch(n)})):Promise.resolve([])}},rosterTypes:{get:function(){return this.isContactType?this.$fluro.types.subTypes("roster"):Promise.resolve([])}},eventTypes:{get:function(){return this.$fluro.types.subTypes("event")}},contactTypes:{get:function(){return this.$fluro.types.subTypes("contact")}},teamTypes:{get:function(){return this.$fluro.types.subTypes("team",!0)}},processTypes:{get:function(){return this.$fluro.types.subTypes("process")}},postTypes:{get:function(){return this.$fluro.types.subTypes("post")}},tagTypes:{get:function(){return this.$fluro.types.subTypes("tag",!0)}},definition:{get:function(){var t=this;return t.type&&t.type.length?new Promise((function(e,n){return t.$fluro.types.get(t.type).then((function(t){return e(t)})).catch(n)})):Promise.resolve(null)}}},computed:{definitionFields:function(){return o.a.chain(this.definition).get("definition.fields").map((function(t){return Object.assign({},t,{key:"data."+t.key})})).value()},typeFields:function(){return o.a.get(this,"definition.type.fields")||[]},detailSheetFields:function(){var t=this;return t.definition&&t.definition.details&&t.definition.details.length?o.a.reduce(t.definition.details,(function(t,e){var n=m(e.fields,[],[]),r=o.a.chain(n).map((function(t){if("group"!=t.type)return{title:e.title+" - "+t.titles.join(" > "),key:"details.".concat(e.definitionName,".items[].data.").concat(t.trail.join(".")),minimum:t.minimum,maximum:t.maximum,detail:e.definitionName,type:t.type}})).compact().value();return t.concat(r)}),[]):[]},isContactType:function(){var t=this;return"contact"==t.basicType||(!(!t.definition||"contact"!=t.definition.parentType)||void 0)},retrievedBasicType:function(){var t=this;return t.$fluro&&t.$fluro.types?t.$fluro.types.parentType(t.type):t.type},basicType:function(){return this.retrievedBasicType},availableKeys:function(){var t=this,e=t.filterFields.slice(),n=[];function r(){t.householdsDisabled||(e.push({title:"Contact > Address > Address Line 1",key:"_contactFamily.address.addressLine1",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Address > Address Line 2",key:"_contactFamily.address.addressLine2",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Address > Suburb",key:"_contactFamily.address.suburb",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Address > State",key:"_contactFamily.address.state",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Address > Postal Code",key:"_contactFamily.address.postalCode",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Address > Country",key:"_contactFamily.address.postalCode",maximum:1,minimum:0,type:"string"})),e.push({title:"Contact > First Name",key:"_contact.firstName",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Preferred Name",key:"_contact.preferredName",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Last Name",key:"_contact.lastName",maximum:1,minimum:0,type:"string"}),e.push({title:"Contact > Primary Email Address",key:"_contact.emails[0]",maximum:1,minimum:0,type:"email"}),e.push({title:"Contact > Primary Phone Number",key:"_contact.phoneNumbers[0]",maximum:1,minimum:0,type:"string"})}n=n.concat(o.a.map(t.postTypes,(function(t){return{text:t.title,name:t.title,title:t.title,value:t.definitionName}}))),t.type&&e.push({title:"Posts and Notes > Total linked posts",key:"_posts.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where post matches...",subfields:[{title:"Created Date",key:"created",maximum:1,minimum:0,type:"date"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Post Type",key:"definition",maximum:1,minimum:0,type:"string",directive:"select",options:n},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"}]});var c,m,d,f=[],v=[],h=[],y=[],x=[],k=[],_=[];_=_.concat(o.a.map(t.groupNames,(function(t){return{text:t.title,title:t.title,name:t.title,value:t.title}}))),x=x.concat(o.a.map(t.interactionTypes,(function(t){return{text:t.title,title:t.title,name:t.title,value:t.definitionName}}))),y=y.concat(o.a.map(t.rosterTypes,(function(t){return{text:t.title,title:t.title,name:t.title,value:t.definitionName}}))),k=k.concat(o.a.map(t.teamTypes,(function(t){return{title:t.title,name:t.name,text:t.title,value:t.definitionName}}))),f=f.concat(o.a.map(t.eventTypes,(function(t){return{name:t.title,title:t.title,text:t.title,value:t.definitionName}}))),v=v.concat(o.a.map(t.contactTypes,(function(t){return{title:t.title,name:t.name,text:t.title,value:t.definitionName}}))),h=h.concat(o.a.map(t.eventTracks,(function(track){return{title:track.title,name:track.title,text:track.title,value:track._id,_id:track._id}}))),m=o.a.chain(t.ticketTypes).map((function(title){return{title:title,name:title,text:title,value:title}})).orderBy("title").value(),d=o.a.chain(t.rooms).map((function(t){return{title:t.title,name:t.title,text:t.title,value:t._id,_id:t._id}})).orderBy("title").value(),c=o.a.chain(t.assignmentPositions).map((function(title){return{title:title,name:title,text:title,value:title}})).orderBy("title").value();var w={title:"Total number of tickets",key:"_tickets.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where...",subfields:[{title:"Event",key:"event",maximum:1,minimum:0,type:"reference",typeSelect:"event"},{title:"Event Date",key:"eventDate",maximum:1,minimum:0,type:"date"},{title:"Event Type (Definition)",key:"eventDefinition",maximum:1,minimum:0,type:"string",directive:"select",options:f},{title:"Event Track",key:"eventTrack",maximum:1,minimum:0,type:"reference",typeSelect:"eventtrack"},{title:"Ticket Title / Type",key:"title",maximum:1,minimum:0,type:"string",directive:"select",options:m},{title:"Collected",key:"collected",maximum:1,minimum:0,type:"boolean"},{title:"Collected By",key:"collectedBy",maximum:1,minimum:0,type:"string"},{title:"Collection Date",key:"collectionDate",maximum:1,minimum:0,type:"date"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Tags",key:"tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"}]};if(t.isContactType){e.push({title:"Date Of Birth - Month",key:"dobMonthTitle",maximum:1,minimum:0,type:"string"}),e.push({title:"Email Address (Primary)",key:"emails[0]",maximum:1,minimum:0,type:"email"}),e.push({title:"Number of Email Addresses",key:"emails.length",maximum:1,minimum:0,type:"integer"}),e.push({title:"Phone Number (Primary)",key:"phoneNumbers[0]",maximum:1,minimum:0,type:"string"}),e.push({title:"Number of Phone Numbers",key:"phoneNumbers.length",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total number of groups contact is a member of",key:"_teams.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where group matches...",subfields:[{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Tags",key:"tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"},{title:"Definition",key:"definition",maximum:0,minimum:0,type:"string",directive:"select",options:k},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"}]}),e.push(w),t.checkinDisabled||e.push({title:"Attendance > Total times checked in",key:"_checkins.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where event matches...",subfields:[{title:"Date",key:"startDate",maximum:1,minimum:0,type:"date"},{title:"Event Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Event Track",key:"track",maximum:1,minimum:0,type:"reference",typeSelect:"eventtrack"},{title:"Event",key:"_id",maximum:0,minimum:0,type:"reference",typeSelect:"event"},{title:"Event Type (Definition)",key:"definition",maximum:1,minimum:0,type:"string",directive:"select",options:f},{title:"Event Title",key:"title",maximum:1,minimum:0,type:"string"}]});var D=[{name:"Draft",value:"draft"},{name:"Active",value:"active"},{name:"Archived",value:"archived"}];e.push({title:"Status > Total times status changed",key:"_contactStatus.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where change was...",subfields:[{title:"Date",key:"created",maximum:1,minimum:0,type:"date"},{title:"From Status",key:"from",maximum:1,minimum:0,type:"string",options:D},{title:"To Status",key:"to",maximum:1,minimum:0,type:"string",options:D},{title:"User responsible",key:"managedUser",maximum:1,minimum:0,type:"reference",typeSelect:"persona"}]}),e.push({title:"Contact Definition > Total times definition was changed",key:"_contactDefinition.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where change was...",subfields:[{title:"Date",key:"created",maximum:1,minimum:0,type:"date"},{title:"From Definition",key:"from",maximum:1,minimum:0,type:"string",options:v},{title:"To Definition",key:"to",maximum:1,minimum:0,type:"string",options:v},{title:"User responsible",key:"managedUser",maximum:1,minimum:0,type:"reference",typeSelect:"persona"}]}),e.push({title:"Total times > Joined a Group or Team",key:"_joinedTeams.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where ...",subfields:[{title:"Date",key:"date",maximum:1,minimum:0,type:"date"},{title:"Group Type / Definition",key:"definition",maximum:1,minimum:0,type:"string",options:k},{title:"Group/Team is",key:"_id",maximum:0,minimum:0,type:"reference",typeSelect:"team"}]}),e.push({title:"Total times > Left a Group or Team",key:"_leftTeams.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where ...",subfields:[{title:"Date",key:"date",maximum:1,minimum:0,type:"date"},{title:"Group Type / Definition",key:"definition",maximum:1,minimum:0,type:"string",options:k},{title:"Group/Team is",key:"_id",maximum:0,minimum:0,type:"reference",typeSelect:"team"}]}),e.push({title:"Historically was a member of group",key:"_historicalTeamMember.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where...",subfields:[{title:"Date",key:"date",maximum:1,minimum:0,type:"date"},{title:"Group Type / Definition",key:"definition",maximum:1,minimum:0,type:"string",options:k},{title:"Group/Team is",key:"_id",maximum:0,minimum:0,type:"reference",typeSelect:"team"}]});var C=[{title:"Event",key:"_id",maximum:1,minimum:0,type:"reference",typeSelect:"event"},{title:"Event Date",key:"startDate",maximum:1,minimum:0,type:"date"},{title:"Event Type (Definition)",key:"definition",maximum:1,minimum:0,type:"string",directive:"select",options:f},{title:"Event Track",key:"track",maximum:1,minimum:0,type:"reference",typeSelect:"eventtrack"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Tags",key:"tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"}];if(e.push({title:"Guest List > Total number of events expected at",key:"_guestExpected.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where event matches...",subfields:C}),e.push({title:"Guest List > Total number of RSVP Yes responses",key:"_guestConfirmed.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where event matches...",subfields:C}),e.push({title:"Guest List > Total number of RSVP No responses",key:"_guestDeclined.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where event matches...",subfields:C}),e.push({title:"Rostered Assignments > Total times rostered",key:"_assignments.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where assignment matches...",subfields:[{title:"Position",key:"title",maximum:1,minimum:0,type:"string",directive:"select",options:c},{title:"Confirmation Status",key:"confirmationStatus",maximum:1,minimum:0,type:"string",directive:"select",options:[{value:"",name:"None"},{value:"confirmed",name:"Confirmed"},{value:"denied",name:"Declined"},{value:"unknown",name:"Unknown"}]},{title:"Roster Type",key:"rosterDefinition",maximum:1,minimum:0,type:"string",directive:"select",options:y},{title:"Event Type",key:"eventDefinition",maximum:1,minimum:0,type:"string",directive:"select",options:f},{title:"Date",key:"startDate",maximum:1,minimum:0,type:"date"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Event Track",key:"track",maximum:0,minimum:0,type:"reference",directive:"select",typeSelect:"eventtrack"}]}),e.push({title:"Unavailable Periods",key:"_unavailability.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Matching",subfields:[{title:"Period Starts",key:"startDate",maximum:1,minimum:0,type:"date"},{title:"Period Ends",key:"endDate",maximum:1,minimum:0,type:"date"},{title:"Period was Created",key:"created",maximum:1,minimum:0,type:"date"},{title:"Period was Updated",key:"created",maximum:1,minimum:0,type:"date"}]}),e.push({title:"Forms > Total submissions",key:"_interactions.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where submission matches...",subfields:[{title:"Submission Date",key:"created",maximum:1,minimum:0,type:"date"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Form",key:"definition",maximum:1,minimum:0,type:"string",directive:"select",options:x},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"}]}),e.push({title:"Mailouts > Total Emails",key:"_mailouts.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"That matches criteria...",subfields:[{title:"Send Date",key:"date",maximum:1,minimum:0,type:"date"},{title:"State",key:"state",maximum:1,minimum:0,type:"string",directive:"select",options:[{text:"Unopened",value:"sent"},{text:"Opened",value:"open"},{text:"Clicked",value:"click"},{text:"Unsubscribed",value:"unsubscribe"},{text:"Bounced / Failed",value:"error"}]},{title:"Mailout Type",key:"mailoutType",maximum:0,minimum:0,type:"string",directive:"select",options:[{text:"Promotional",value:"promotional"},{text:"Transactional",value:"transactional"}]},{title:"Mailout",key:"_id",maximum:0,minimum:0,type:"reference",typeSelect:"mailout"},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"},{title:"Subject",key:"subject",maximum:1,minimum:0,type:"string"}]}),e.push({title:"Login > Access Passes",key:"_persona.policies",maximum:1,minimum:0,type:"reference",typeSelect:"policy"}),e.push({title:"Login > Status",key:"_persona.state",maximum:1,minimum:0,type:"string",directive:"select",options:[{text:"None / No Access",value:"none"},{text:"Awaiting Collection",value:"waiting"},{text:"Connected",value:"connected"}]}),e.push({title:"Login > Email Address",key:"_persona.email",maximum:1,minimum:0,type:"string"}),e.push({title:"Login > Last Login",key:"_persona.lastLogin",maximum:1,minimum:0,type:"date"}),e.push({title:"Login > First Name",key:"_persona.firstName",maximum:1,minimum:0,type:"string"}),e.push({title:"Login > Last Name",key:"_persona.lastName",maximum:1,minimum:0,type:"string"}),e.push({title:"Login > Creation Date",key:"_persona.created",maximum:1,minimum:0,type:"date"}),e.push({title:"Unsubscribed from Promotional Emails",key:"_unsubscribeEmail",maximum:1,minimum:0,type:"boolean"}),e.push({title:"Unsubscribed from Promotional SMS",key:"_unsubscribeSMS",maximum:1,minimum:0,type:"boolean"}),!t.householdsDisabled){e.push({title:"Posts and Notes > Total linked posts to family members",key:"_familyPosts.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where post matches...",subfields:[{title:"Created Date",key:"created",maximum:1,minimum:0,type:"date"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Post Type",key:"definition",maximum:1,minimum:0,type:"string",directive:"select",options:n},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"}]});var S=[{title:"Household Role",key:"householdRole",maximum:1,minimum:0,type:"string"},{title:"Age",key:"age",maximum:1,minimum:0,type:"integer"},{title:"Gender",key:"gender",maximum:1,minimum:0,type:"string"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Academic Calendar",key:"academicCalendar",maximum:1,minimum:0,type:"reference",typeSelect:"academic"},{title:"Academic Grade",key:"academicGrade",maximum:1,minimum:0,type:"string",directive:"select"},{title:"Status",key:"status",maximum:1,minimum:0,type:"string",directive:"select",options:[{name:"active",value:"active"},{name:"archived",value:"archived"},{name:"draft",value:"draft"}]},{title:"Definition",key:"definition",maximum:1,minimum:0,type:"string",directive:"select",options:v},{title:"Title",key:"title",maximum:1,minimum:0,type:"string"}];o.a.each(t.tagTypes,(function(t){S.push({title:"".concat(t.plural," (Tag)"),key:"tags|".concat(t.definitionName),maximum:0,minimum:0,type:"reference",typeSelect:t.definitionName})})),e.push({title:"Family Household > Total Number of Family Members",key:"_familyMembers.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where family member matches...",subfields:S}),e.push({title:"Family Parents > Number of Parents",key:"family._parents.length",maximum:1,minimum:0,type:"integer"}),e.push({title:"Family Children > Number of Children",key:"family._children.length",maximum:1,minimum:0,type:"integer"}),e.push({title:"Family Parents > Definition",key:"family._parents[]definition",maximum:1,minimum:0,type:"string"}),e.push({title:"Family Children > Definition",key:"family._children[]definition",maximum:1,minimum:0,type:"string"}),e.push({title:"Family Members > Definition",key:"family.items[]definition",maximum:1,minimum:0,type:"string"}),e.push({title:"Family Parents > Of Gender",key:"family._parents[]gender",maximum:1,minimum:0,type:"string",directive:"select",options:[{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Unknown",value:"unknown"}]}),e.push({title:"Family Members > Of Gender",key:"family.items[]gender",maximum:1,minimum:0,type:"string",directive:"select",options:[{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Unknown",value:"unknown"}]}),e.push({title:"Family Members > Of Household Role",key:"family.items[]householdRole",maximum:1,minimum:0,type:"string"}),e.push({title:"Family Children > Of Gender",key:"family._children[]gender",maximum:1,minimum:0,type:"string",directive:"select",options:[{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Unknown",value:"unknown"}]}),e.push({title:"Family Children > Of Age",key:"family._children[]age",maximum:1,minimum:0,type:"integer"}),e.push({title:"Family Parents > Of Age",key:"family._parents[]age",maximum:1,minimum:0,type:"integer"}),e.push({title:"Family Members > Of Age",key:"family.items[]age",maximum:1,minimum:0,type:"integer"}),e.push({title:"Family Children > Realms",key:"family._children[]realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"}),e.push({title:"Family Members > Realms",key:"family.items[]realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"}),e.push({title:"Family Parents > Realms",key:"family._parents[]realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"})}e.push({title:"Assigned position in any active Group/Team",key:"_positions.active",maximum:0,minimum:0,type:"string",directive:"select"}),o.a.each(t.teamTypes,(function(n){t.householdsDisabled||(e.push({title:"Family Members > ".concat(n.plural),key:"family.items[]realms|".concat(n.definitionName),maximum:0,minimum:0,type:"reference",directive:"select",_discriminator:n.definitionName,_discriminatorType:"team"}),e.push({title:"Family Children > ".concat(n.plural),key:"family._children[]realms|".concat(n.definitionName),maximum:0,minimum:0,type:"reference",directive:"select",_discriminator:n.definitionName,_discriminatorType:"team"}),e.push({title:"Family Parents > ".concat(n.plural),key:"family._parents[]realms|".concat(n.definitionName),maximum:0,minimum:0,type:"reference",directive:"select",_discriminator:n.definitionName,_discriminatorType:"team"})),e.push({title:"Assigned position in ".concat(n.plural),key:"_positions.".concat(n.definitionName),maximum:0,minimum:0,type:"string",directive:"select"})})),t.householdsDisabled||(e.push({title:"Family Children > Tags",key:"family._children[]tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"}),e.push({title:"Family Members > Tags",key:"family.items[]tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"}),e.push({title:"Family Parents > Tags",key:"family._parents[]tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"}),o.a.each(t.tagTypes,(function(t){e.push({title:"Family Children > ".concat(t.plural," (Tag)"),key:"family._children[]tags|".concat(t.definitionName),maximum:0,minimum:0,type:"reference",typeSelect:t.definitionName}),e.push({title:"Family Members > ".concat(t.plural," (Tag)"),key:"family.items[]tags|".concat(t.definitionName),maximum:0,minimum:0,type:"reference",typeSelect:t.definitionName}),e.push({title:"Family Parents > ".concat(t.plural," (Tag)"),key:"family._parents[]tags|".concat(t.definitionName),maximum:0,minimum:0,type:"reference",typeSelect:t.definitionName})})),e.push({title:"Family Children > Academic Calendar",key:"family._children[]academicCalendar",maximum:0,minimum:0,type:"reference",directive:"select"}),e.push({title:"Family Children > Academic Grade",key:"family._children[]academicGrade",maximum:0,minimum:0,type:"string",directive:"select"})),o.a.each(t.processTypes,(function(t){e.push({title:"Process > ".concat(t.plural," > In Process"),key:"_processes.".concat(t.definitionName,".in"),maximum:0,minimum:0,type:"boolean"}),e.push({title:"Process > ".concat(t.plural," > Due Date"),key:"_processes.".concat(t.definitionName,".dueDate"),maximum:0,minimum:0,type:"date"}),e.push({title:"Process > ".concat(t.plural," > Entered Process"),key:"_processes.".concat(t.definitionName,".created"),maximum:0,minimum:0,type:"date"}),e.push({title:"Process > ".concat(t.plural," > Last Update"),key:"_processes.".concat(t.definitionName,".updated"),maximum:0,minimum:0,type:"date"}),e.push({title:"Process > ".concat(t.plural," > Current State"),key:"_processes.".concat(t.definitionName,".state"),maximum:0,minimum:0,type:"string"}),e.push({title:"Process > ".concat(t.plural," > Status"),key:"_processes.".concat(t.definitionName,".processStatus"),maximum:0,minimum:0,type:"string"})}))}else{var T,O;switch(t.basicType){case"interaction":e.push(w),e.push({title:"UTM Campaign",key:"utm.utm_campaign",maximum:1,minimum:0,type:"string"}),e.push({title:"UTM Source",key:"utm.utm_source",maximum:1,minimum:0,type:"string"}),e.push({title:"UTM Medium",key:"utm.utm_medium",maximum:1,minimum:0,type:"string"}),e.push({title:"UTM Term",key:"utm.utm_term",maximum:1,minimum:0,type:"string"});break;case"persona":case"process":break;case"ticket":r();break;case"checkin":r(),e.push({title:"Ticket Type",key:"_ticket.title",maximum:1,minimum:0,type:"string",directive:"select",options:m}),e.push({title:"Contact Definition (Now)",key:"_contact.definition",maximum:1,minimum:0,type:"string",directive:"select",options:v}),e.push({title:"Contact Definition (At time of checkin)",key:"contactDefinition",maximum:1,minimum:0,type:"string",directive:"select",options:v}),e.push({title:"Contact Tags (Now)",key:"_contact.tags",maximum:1,minimum:0,type:"reference",typeSelect:"tag"}),e.push({title:"Contact Email Addresses (Now)",key:"_contact.emails",maximum:0,minimum:0,type:"email"}),e.push({title:"Contact Phone Numbers (Now)",key:"_contact.phoneNumbers",maximum:0,minimum:0,type:"string"}),e.push({title:"Contact Status (Now)",key:"_contact.status",maximum:0,minimum:0,type:"string"}),e.push({title:"Notes",key:"notes",maximum:0,minimum:0,type:"string"}),t.checkinDisabled||e.push({title:"Nametag Notes",key:"notes",maximum:0,minimum:0,type:"string"}),e.push({title:"Contact Realms (Now)",key:"_contact.realms",maximum:1,minimum:0,type:"reference",typeSelect:"realm"}),e.push({title:"Contact Tags (At time of checkin)",key:"contactTags",maximum:1,minimum:0,type:"reference",typeSelect:"tag"}),T=!0;break;case"event":e.push({title:"Rooms",key:"rooms",maximum:1,minimum:0,type:"reference",directive:"select",options:d});break;case"assignment":O=!0;break;case"plan":case"attendance":case"ticket":T=!0;break;case"family":e.push({title:"Total Number of Family Members",key:"memberCount.total",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total Number of Parents / Guardians",key:"memberCount.parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total Number of Children",key:"memberCount.child",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total Number of Active Parents / Guardians",key:"memberCount.active_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total Number of Active Children",key:"memberCount.active_child",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total Number of Archived Parents / Guardians",key:"memberCount.archived_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Total Number of Archived Children",key:"memberCount.archived_child",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Active Family Members",key:"memberCount.active",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Archived Family Members",key:"memberCount.archived",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Male Family Members",key:"memberCount.gender_male",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Female Family Members",key:"memberCount.gender_female",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Unknown Gender Family Members",key:"memberCount.gender_unknown",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Female Parents / Guardians",key:"memberCount.gender_female_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Male Parents / Guardians",key:"memberCount.gender_male_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Unknown Gender Parents / Guardians",key:"memberCount.gender_unknown_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Active Female Parents / Guardians",key:"memberCount.gender_female_active_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Active Male Parents / Guardians",key:"memberCount.gender_male_active_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Active Unknown Gender Parents / Guardians",key:"memberCount.gender_unknown_active_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Archived Female Parents / Guardians",key:"memberCount.gender_female_archived_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Archived Male Parents / Guardians",key:"memberCount.gender_male_archived_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Archived Unknown Parents / Guardians",key:"memberCount.gender_unknown_archived_parental",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Female Children",key:"memberCount.gender_female_child",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Male Children",key:"memberCount.gender_male_child",maximum:1,minimum:0,type:"integer"}),e.push({title:"Number of Unknown Gender Children",key:"memberCount.gender_unknown_child",maximum:1,minimum:0,type:"integer"});break;case"team":e.push({title:"Event Tracks",key:"_tracks.all.length",maximum:1,minimum:0,type:"integer",subfieldTitle:"Where event track matches...",subfields:[{title:"Title",key:"title",maximum:1,minimum:0,type:"string"},{title:"Realms",key:"realms",maximum:0,minimum:0,type:"reference",directive:"select",_discriminatorDefinition:"realm"},{title:"Tags",key:"tags",maximum:0,minimum:0,type:"reference",typeSelect:"tag"}]});break;case"user":e.push({title:"First Name",key:"firstName",minimum:0,maximum:1}),e.push({title:"Last Name",key:"lastName",minimum:0,maximum:1}),e.push({title:"Email",key:"email",minimum:0,maximum:1,type:"email"}),e.push({title:"Primary Account",key:"account",minimum:0,maximum:1,type:"reference",params:{restrictType:"account"}}),e.push({title:"User Type",key:"accountType",minimum:0,maximum:1,type:"string",options:[{name:"Super Administrator",value:"administrator"},{name:"Standard User",value:"standard"}]});break;case"account":o.a.each(["team","definition","contact","application","event","realm","checkin","mailout","video","image","asset","persona","sitemodel","site"],(function(n){var r=t.$fluro.types.glossary[n];e.push({title:"Metrics > ".concat(r.plural),key:"data.metrics.storage.".concat(n),maximum:0,minimum:1,type:"integer"})}));break;default:if("photo"===t.type)e.push({title:"EXIF > Copyright",key:"data.exif.tags.Copyright",maximum:0,minimum:0,type:"string"}),e.push({title:"EXIF > Camera Make",key:"data.exif.tags.Make",maximum:0,minimum:0,type:"string"}),e.push({title:"EXIF > Camera Model",key:"data.exif.tags.Model",maximum:0,minimum:0,type:"string"})}}T&&(e.push({title:"Event Track",key:"_event.track",maximum:1,minimum:0,type:"reference",typeSelect:"eventtrack"}),e.push({title:"Event Tags",key:"_event.tags",maximum:1,minimum:0,type:"reference",typeSelect:"tag"}),e.push({title:"Event Realms",key:"_event.realms",maximum:1,minimum:0,type:"reference",typeSelect:"realm"}),e.push({title:"Event Type / Definition",key:"_event.definition",maximum:1,minimum:0,type:"string",directive:"select",options:f}),e.push({title:"Event Start Date",key:"_event.startDate",maximum:1,minimum:0,type:"date"})),O&&(e.push({title:"Event Track",key:"_rosterEvent.track",maximum:1,minimum:0,type:"reference",typeSelect:"eventtrack"}),e.push({title:"Event Tags",key:"_rosterEvent.tags",maximum:1,minimum:0,type:"reference",typeSelect:"tag"}),e.push({title:"Event Realms",key:"_rosterEvent.realms",maximum:1,minimum:0,type:"reference",typeSelect:"realm"}),e.push({title:"Event Type / Definition",key:"_rosterEvent.definition",maximum:1,minimum:0,type:"string",directive:"select",options:f}),e.push({title:"Event Start Date",key:"_rosterEvent.startDate",maximum:1,minimum:0,type:"date"})),e=e.concat(t.asyncKeys);var output=l.FilterService.allKeys(e,t.definition);return output=output.filter((function(e){switch(e.key){case"family":if(t.householdsDisabled)return!1;break;case"checkinStartDate":case"checkinEndDate":case"defaultCheckinStartOffset":case"defaultCheckinEndOffset":if(t.checkinDisabled)return!1}return!0}))}},watch:{value:function(t){var e=JSON.stringify(t);e!=JSON.stringify(this.model)&&(this.model=JSON.parse(e))},model:function(){this.debounced()}}},f=(n(1129),n(1)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filter-group-outer",class:{mini:t.mini,large:!t.mini}},[n("v-container",{ref:"element",class:[{"pa-0":t.mini},t.model.operator]},[t.model.filters.length>1?n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{"d-flex":"","align-center":""}},[t.mini?[n("div",{staticClass:"description"},[t._v("\n\t\t\t\t\t\tMatch\n\t\t\t\t\t\t"),n("select",{directives:[{name:"model",rawName:"v-model",value:t.model.operator,expression:"model.operator"}],staticClass:"select-operator",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.model,"operator",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"and"}},[t._v("all")]),t._v(" "),n("option",{attrs:{value:"or"}},[t._v("any")]),t._v(" "),n("option",{attrs:{value:"nor"}},[t._v("none")])]),t._v("\n\t\t\t\t\t\tof these rules\n\t\t\t\t\t")])]:[n("div",{staticClass:"description"},[t._v("\n\t\t\t\t\t\tShow items that match\n\t\t\t\t\t\t"),n("select",{directives:[{name:"model",rawName:"v-model",value:t.model.operator,expression:"model.operator"}],staticClass:"select-operator",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.model,"operator",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"and"}},[t._v("all")]),t._v(" "),n("option",{attrs:{value:"or"}},[t._v("any")]),t._v(" "),n("option",{attrs:{value:"nor"}},[t._v("none")])]),t._v("\n\t\t\t\t\t\tof these conditions\n\t\t\t\t\t")])]],2)],1):t._e(),t._v(" "),t._l(t.model.filters,(function(e,g){return n("v-layout",{key:e.guid,attrs:{row:""}},[t.model.filters.length>1?n("div",{staticClass:"operator-column offset",class:t.model.operator,attrs:{"d-flex":"","align-center":""}},[n("span",{staticClass:"operator",class:[{additional:g},t.model.operator]},[t._v(t._s(t.operatingWord(t.model,g)))])]):t._e(),t._v(" "),n("v-flex",{staticStyle:{overflow:"hidden"}},[n("v-container",{staticClass:"additional filter-group",class:[{"pa-2":t.mini},{"py-2 px-0":!t.mini},e.operator]},[e.filters?[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{"d-flex":"","align-center":""}},[t.mini?[n("div",{staticClass:"description"},[t._v("\n\t\t\t\t\t\t\t\t\t\tMatches\n\t\t\t\t\t\t\t\t\t\t"),n("select",{directives:[{name:"model",rawName:"v-model",value:e.operator,expression:"group.operator"}],staticClass:"select-operator",on:{change:function(n){var r=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"operator",n.target.multiple?r:r[0])}}},[n("option",{attrs:{value:"and"}},[t._v("all")]),t._v(" "),n("option",{attrs:{value:"or"}},[t._v("any")]),t._v(" "),n("option",{attrs:{value:"nor"}},[t._v("none")])]),t._v("\n\t\t\t\t\t\t\t\t\t\tof these conditions\n\t\t\t\t\t\t\t\t\t")])]:[n("div",[n("h4",[t._v("Rule "+t._s(g+1))]),t._v(" "),e.filters.length>1?n("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tShow items that match\n\t\t\t\t\t\t\t\t\t\t\t"),n("select",{directives:[{name:"model",rawName:"v-model",value:e.operator,expression:"group.operator"}],on:{change:function(n){var r=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"operator",n.target.multiple?r:r[0])}}},[n("option",{attrs:{value:"and"}},[t._v("All")]),t._v(" "),n("option",{attrs:{value:"or"}},[t._v("Any")]),t._v(" "),n("option",{attrs:{value:"nor"}},[t._v("None")])]),t._v("\n\t\t\t\t\t\t\t\t\t\t\tof these conditions\n\t\t\t\t\t\t\t\t\t\t")]):t._e()])]],2),t._v(" "),n("v-spacer"),t._v(" "),t.mini?[n("div",{staticClass:"hover",staticStyle:{"white-space":"nowrap"}},[n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0",attrs:{small:"",flat:"",icon:"",content:"Duplicate rule",color:"grey"},on:{click:function(e){return t.duplicateEntry(t.model,g)}}},[n("fluro-icon",{attrs:{icon:"copy"}})],1),t._v(" "),n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0",attrs:{small:"",flat:"",icon:"",content:"Remove rule",color:"red"},on:{click:function(e){return t.removeEntry(t.model,g)}}},[n("fluro-icon",{attrs:{icon:"trash-alt"}})],1)],1)]:[n("div",{staticClass:"hover"},[n("v-btn",{attrs:{small:"",color:"grey",outline:""},on:{click:function(e){return t.duplicateEntry(t.model,g)}}},[n("span",{staticClass:"btn-label"},[t._v("Duplicate")]),t._v(" "),n("fluro-icon",{attrs:{right:"",icon:"copy"}})],1),t._v(" "),n("v-btn",{attrs:{small:"",color:"red",outline:""},on:{click:function(e){return t.removeEntry(t.model,g)}}},[n("span",{staticClass:"btn-label"},[t._v("Remove")]),t._v(" "),n("fluro-icon",{attrs:{right:"",icon:"trash-alt"}})],1)],1)]],2),t._v(" "),t._l(e.filters,(function(filter,r){return n("div",{key:filter.guid},[n("v-layout",[e.filters.length>1?n("div",{staticClass:"operator-column",class:[e.operator],attrs:{"d-flex":"","align-center":""}},[n("span",{staticClass:"operator",class:[{additional:r},e.operator]},[t._v(t._s(t.operatingWord(e,r)))])]):t._e(),t._v(" "),n("v-flex",{staticStyle:{overflow:"hidden"}},[t.availableKeys.length?[n("filter-condition-row",{attrs:{forceLocalValues:t.forceLocalValues,type:t.type,useSample:t.useSample,rows:t.rows,loadingKeys:t.loadingKeys,definition:t.definition,fields:t.availableKeys,mini:t.mini},on:{input:t.debounced},model:{value:e.filters[r],callback:function(n){t.$set(e.filters,r,n)},expression:"group.filters[index]"}})]:t._e()],2),t._v(" "),e.filters.length>1?n("div",[t.mini?[n("v-btn",{staticClass:"ma-0",attrs:{small:"",flat:"",color:"error",icon:""},on:{click:function(n){return t.removeEntry(e,r)}}},[n("fluro-icon",{attrs:{icon:"trash-alt"}})],1)]:[n("v-btn",{attrs:{icon:"",small:"",flat:"",color:"error"},on:{click:function(n){return t.removeEntry(e,r)}}},[n("fluro-icon",{attrs:{icon:"trash-alt"}})],1)]],2):t._e()],1)],1)}))]:t._e(),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{small:""},on:{click:function(n){return t.addCondition(e)}}},[t._v("\n\t\t\t\t\t\tAdd Condition\n\t\t\t\t\t\t"),n("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)],2)],1)],1)})),t._v(" "),t.limit?t._e():n("v-btn",{staticClass:"mx-0",attrs:{color:"white"},on:{click:function(e){return t.addRule(t.model)}}},[t._v("\n\t\t\tAdd "+t._s(t.model.filters.length?"Another":"")+" Rule\n\t\t\t"),n("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)],2)],1)}),[],!1,null,"4d036e2e",null);e.default=component.exports},205:function(t,e,n){"use strict";n.r(e);n(55),n(12),n(31),n(17),n(23),n(28),n(169),n(59),n(24),n(51),n(48);var r=n(18),o=n(0),l=n.n(o),c=n(90),m={name:"filter-condition-row",components:{FluroRealmSelect:n(83).a},props:{forceLocalValues:{type:Boolean},type:{type:String},useSample:{type:Boolean},loadingKeys:{type:Boolean},value:{type:Object,required:!0},fields:{type:Array,default:function(){return[]}},definition:{type:Object,default:function(){return{}}},rows:{type:Array},mini:{type:Boolean}},beforeCreate:function(){var t=this;Promise.all([c.a.load("./FilterConditionGroup.vue",(function(){return Promise.resolve().then(n.bind(null,171))})),c.a.load("./FilterConditionRow.vue",(function(){return Promise.resolve().then(n.bind(null,205))})),c.a.load("../contentselect/FluroContentSelectButton.vue",(function(){return Promise.resolve().then(n.bind(null,82))}))]).then((function(e){t.$options.components.FilterConditionGroup=e[0],t.$options.components.FilterConditionRow=e[1],t.$options.components.FluroContentSelectButton=e[2],t.ready=!0}))},created:function(){var t=this;t.model.guid||(t.model.guid=t.$fluro.utils.guid()),t.debounced=l.a.debounce((function(){t.$emit("input",t.model)}),t.debounce),t.retrieveValues()},data:function(){var t=[],e=6048e5,n=new Date;t.push({title:"Next 6 Weeks",date1:n,date2:new Date((new Date).setTime((new Date).getTime()+6*e))}),t.push({title:"Next 2 Weeks",date1:n,date2:new Date((new Date).setTime((new Date).getTime()+2*e))}),t.push({title:"Last 2 Weeks",date1:new Date((new Date).setTime((new Date).getTime()-2*e)),date2:n}),t.push({title:"Last 6 Weeks",date1:new Date((new Date).setTime((new Date).getTime()-4*e)),date2:n});var r=JSON.parse(JSON.stringify(this.value));return{ready:!1,sampleRefreshKey:this.$fluro.utils.guid(),datePeriodOptions:t,debounced:null,debounce:0,possibleValues:[],date1:!1,date2:!1,loadingValues:!1,selectedKey:r.key||"",model:r,referenceIDModel:r.value,realmValues:[]}},computed:{modelComparator:{get:function(){return this.model.comparator},set:function(t){this.$set(this.model,"comparator",t)}},dateMeasures:function(){return[{title:"Minutes",value:"minute"},{title:"Hours",value:"hour"},{title:"Days",value:"day"},{title:"Weeks",value:"week"},{title:"Months",value:"month"},{title:"Years",value:"year"}]},referenceID:{get:function(){return this.referenceIDModel},set:function(t){this.$set(this.model,"value",this.$fluro.utils.getStringID(t)),this.referenceIDModel=t}},referenceSelectField:function(){return"reference"==this.dataType&&!this.requiresManualInput},useBasicReferenceSelect:function(){var t=this,e=l.a.get(t.selector,"typeSelect");if(e)return e;var n=l.a.get(t.selector,"params.restrictType"),r=l.a.get(t.selector,"_discriminatorDefinition");if(!t.rows||!t.rows.length){if(!t.selector)return;if(n)return n;if(r)return r}return!t.referenceSelectField&&t.selector?e||r||n:void 0},comparatorsCaption:function(){return this.comparator?this.comparator.title:null},keyCaption:function(){return this.model.title?this.model.title:this.selectedKey?this.selectedKey.title||this.selectedKey:"Select a field"},cleanedValueSelection:function(){var t=this;return l.a.map(t.possibleValues,(function(option){return l.a.isString(option)?{text:option,value:option}:(option.title&&(option.text=option.title=option.title),option.name&&(option.text=option.title=option.name),"reference"!=t.type||option._id||(option._id=option.value),option)}))},hasSubFields:function(){return this.selector&&this.selector.subfields&&this.selector.subfields.length},groupedFields:function(){return l.a.chain(this.fields).orderBy("title").value()},simpleKey:function(){return String(this.model.key).split("|")[0]},simpleKeyIsRealms:function(){return l.a.endsWith(this.simpleKey,"realms")},weeks:function(){var t=[];return l.a.times(52,(function(i){t.push({title:"Week "+i,value:i})})),t},months:function(){var t=(new Date).getFullYear();return[{title:"January",value:new Date(t,1,1)},{title:"February",value:new Date(t,2,1)},{title:"March",value:new Date(t,3,1)},{title:"April",value:new Date(t,4,1)},{title:"May",value:new Date(t,5,1)},{title:"June",value:new Date(t,6,1)},{title:"July",value:new Date(t,7,1)},{title:"August",value:new Date(t,8,1)},{title:"September",value:new Date(t,9,1)},{title:"October",value:new Date(t,0,1)},{title:"November",value:new Date(t,1,11)},{title:"December",value:new Date(t,1,12)}]},weekdays:function(){return[{title:"Sunday",value:0},{title:"Monday",value:1},{title:"Tuesday",value:2},{title:"Wednesday",value:3},{title:"Thursday",value:4},{title:"Friday",value:5},{title:"Saturday",value:6}]},readableStartDate:function(){var t=this.model.value||new Date;return this.$fluro.date.moment(t).format("D MMM YYYY")},readableEndDate:function(){var t=this.model.value2||new Date;return this.$fluro.date.moment(t).format("D MMM YYYY")},startDateString:{get:function(){return this.model.value?this.$fluro.date.moment(this.model.value).format("YYYY-MM-DD"):""},set:function(t){this.$set(this.model,"value",this.$fluro.date.moment(t).toDate())}},endDateString:{get:function(){return this.model.value2?this.$fluro.date.moment(this.model.value2).format("YYYY-MM-DD"):""},set:function(t){this.$set(this.model,"value2",this.$fluro.date.moment(t).toDate())}},requiresManualInput:function(){if(!(this.rows&&this.rows.length||"reference"!=this.dataType))return!0;switch(this.model.comparator){case"startswith":case"endswith":case"doesnotstartwith":case"doesnotendwith":case"like":case"contains":case"excludes":return!0;case"==":case"!=":case"in":case"notin":if(!(this.rows&&this.rows.length||this.possibleValues&&this.possibleValues.length)&&"string"===this.dataType)return!0}},rowChangeString:function(){var t=this;if(t.useSample)return"".concat(t.sampleRefreshKey,"-").concat(t.type,"-").concat(t.model.key);var e=l.a.orderBy(t.$fluro.utils.arrayIDs(t.rows),(function(t){return t})).join(" ");return"".concat(this.discriminatorDefinition,"-").concat(this.discriminatorType).concat(this.discriminator,"-").concat(this.model.key,"-").concat(e)},selector:function(){var t=this.model.key;if(this.fields)return l.a.find(this.fields,{key:t})},valid:function(){return r.FilterService.isValidFilter(this.model)},comparator:function(){return r.FilterService.comparatorLookup[this.model.comparator]},inputType:function(){return this.comparator?this.comparator.inputType:null},dataType:function(){if(this.selector){var t=this.selector,e=t.key,n=t.type;return"dateOfBirth"===e?"date-string":n||"string"}return this.model.dataType?this.model.dataType:"string"},discriminatorType:function(){return this.selector?this.selector._discriminatorType:void 0},discriminatorDefinition:function(){return this.selector?this.selector._discriminatorDefinition:void 0},discriminator:function(){return this.selector?this.selector._discriminator:void 0},comparators:function(){var t=this.dataType,e=r.FilterService.getComparatorsForType(t);return e}},watch:{dataType:function(t){t?this.$set(this.model,"dataType",t):this.$set(this.model,"dataType",null),this.$set(this.model,"comparator",null),this.$set(this.model,"value",null),this.$set(this.model,"value2",null),this.$set(this.model,"values",[])},selectedKey:function(t){t?(this.$set(this.model,"title",t.title),this.model.key=t.key):(this.$set(this.model,"title",null),this.$set(this.model,"dataType",null),this.model.key=null),this.$set(this.model,"value",null),this.$set(this.model,"value2",null),this.$set(this.model,"values",[])},selector:function(){this.selector?this.model.key=this.selector.key:this.model.key=""},model:{handler:function(){this.debounced()},deep:!0},rowChangeString:function(t){this.retrieveValues()}},methods:{addCriteriaRow:function(){var t=this,e={key:null,value:null,value2:null,values:[],guid:t.$fluro.utils.guid()};t.model.criteria?t.model.criteria.push(e):t.$set(t.model,"criteria",[e])},removeCriteria:function(t){this.model.criteria.splice(t,1)},selectDatePeriod:function(option){this.model.value=option.date1,this.model.value2=option.date2},retrieveValues:function(){var t=this,e=t.model.key;if(t.useBasicReferenceSelect)return t.possibleValues=[],t.loadingValues=!1,void console.log("Values > use basic reference select");if(!e||!e.length)return console.log("Values > No key so clear values",e,t.model),t.possibleValues=[],void(t.loadingValues=!1);var n=[];if(t.selector&&(t.selector.allowedValues&&t.selector.allowedValues.length?n=t.selector.allowedValues:t.selector.options&&t.selector.options.length&&(n=t.selector.options),n.length))return t.possibleValues=n,void(t.loadingValues=!1);if((t.forceLocalValues||"account"==e)&&t.rows.length){var r=function(t){return t._id||t.title||t.name||t.id?"deleted"==t.status||"archived"==t.status&&"event"!=t._type?void 0:c[t._id||t.id||t.title||t.name]=t:c[t]=t},o=function t(e,n){if("."==n[0]&&(n=n.slice(1)),l.a.includes(n,"[]")){var o=n.split("[]"),c=o.shift(),m=o.join("[]"),d=l.a.get(e,c)||[];return l.a.each(d,(function(e){t(e,m)}))}var f=l.a.get(e,n);f&&(l.a.isArray(f)?f.length&&l.a.each(f,(function(t){r(t)})):r(f))},c={};return l.a.each(t.rows,(function(t){return console.log("GET DEEP VALUE FOR",e),o(t,e)})),t.possibleValues=l.a.chain(c).values().compact().orderBy((function(t){return t.title||t.name||t})).map((function(t){return(t.title||t.name||t.id||t._id)&&(t.value=t._id||t.id||t.name||t.title),t})).value(),void(t.loadingValues=!1)}switch(t.dataType){case"date":case"number":case"float":case"integer":case"decimal":return t.possibleValues=[];case"boolean":return t.possibleValues=[!0,!1];default:switch(e){case"definition":if(t.definition&&t.definition.definitions)return t.possibleValues=l.a.map(t.definition.definitions,(function(t){return{text:t.title,value:t.definitionName}}));break;case"status":switch(l.a.get(t,"definition.type.definitionName")){case"contact":return t.possibleValues=["active","draft","archived","deceased"];case"account":return t.possibleValues=["active","cancelled","cancelling","disconnected","exempt","on_hold","onhold","suspended","trial","trial_error"];case"purchase":return t.possibleValues=["active","cancelled","expired","failed","archived"];default:return t.possibleValues=["active","draft","archived","template"]}break;case"gender":return t.possibleValues=["male","female","unknown"];case"dobMonthTitle":return t.possibleValues=["January","February","March","April","May","June","July","August","September","October","November","December"]}}if(!(t.useSample||t.rows&&t.rows.length))return t.possibleValues=[],t.loadingValues=!1,void console.log("No sample and no rows");t.loadingValues=!0;var m=this.$fluro.cache.get("filter-distinct-values"),d=m[t.rowChangeString];if(!d)if(l.a.some(t.rows,(function(t){return t.hasOwnProperty(e)})))t.possibleValues=l.a.chain(t.rows).map(e).flatten().compact().uniqBy((function(t){return t.title||t.name||String(t)})).orderBy((function(t){return t.title||t.name||String(t)})).value(),d=m[t.rowChangeString]=Promise.resolve(t.possibleValues);else{var f=t.$fluro.utils.arrayIDs(t.rows),v={};"reference"==t.dataType&&(v.params||(v.params={}),v.params.populate=!0);var h=t.discriminatorDefinition;h&&h.length&&(v.params||(v.params={}),v.params.definition=h);var y=t.discriminatorType;y&&y.length&&(v.params||(v.params={}),v.params.discriminatorType=y);var x=t.discriminator;x&&x.length&&(v.params||(v.params={}),v.params.discriminator=x),t.definition&&t.definition.type&&(v.type=t.definition.type.definitionName),d=m[t.rowChangeString]=t.$fluro.content.values(f,e,v)}d.then((function(e){t.possibleValues=e&&e.length?e:t.possibleValues||[],t.loadingValues=!1}),(function(e){t.possibleValues=[],t.loadingValues=!1,m[t.rowChangeString]=null}))}}},d=(n(1125),n(1127),n(1)),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ready?n("v-container",{staticClass:"filter-condition-row grid-list-sm",class:{mini:t.mini},attrs:{"pa-0":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm4:""}},[t.fields.length?[t.$vuetify.breakpoint.xsOnly?[n("v-select",{attrs:{"single-line":"",dense:"",loading:t.loadingKeys,"return-object":!0,"item-text":"title","item-value":"key",items:t.fields},model:{value:t.selectedKey,callback:function(e){t.selectedKey=e},expression:"selectedKey"}})]:[n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{content:t.keyCaption}},[n("v-autocomplete",{ref:"inputKey",attrs:{"single-line":"",dense:"",loading:t.loadingKeys,"return-object":!0,"item-text":"title","item-value":"key",items:t.groupedFields},scopedSlots:t._u([{key:"item",fn:function(data){return["object"!=typeof data.item?void 0:[t._v(t._s(data.item.title))]]}}],null,!1,961350708),model:{value:t.selectedKey,callback:function(e){t.selectedKey=e},expression:"selectedKey"}})],1)]]:[n("v-text-field",{attrs:{"single-line":"",label:""},model:{value:t.model.key,callback:function(e){t.$set(t.model,"key",e)},expression:"model.key"}})]],2),t._v(" "),n("v-flex",{attrs:{xs12:"",sm3:""}},[n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{content:t.comparatorsCaption}},[n("v-select",{ref:"inputComparator",attrs:{"single-line":"",dense:"","item-text":"title","item-value":"operator",items:t.comparators},model:{value:t.modelComparator,callback:function(e){t.modelComparator=e},expression:"modelComparator"}})],1)]),t._v(" "),t.comparator&&"none"!=t.inputType?["daterange"==t.inputType?n("v-flex",{attrs:{xs12:"",sm5:""}},[n("v-menu",{ref:"dateSelection",attrs:{fixed:!0,right:!0,"close-on-content-click":!1,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"ma-0",attrs:{small:"",flat:"",block:""}},r),[n("fluro-icon",{attrs:{library:"far",icon:"calendar",left:""}}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.readableStartDate)+" - "+t._s(t.readableEndDate)+"\n\t\t\t\t\t\t")],1)]}}],null,!1,2687385765)},[t._v(" "),n("v-card",[n("v-layout",[n("v-flex",[n("v-card-text",[n("label",[t._v("")]),t._v(" "),n("v-list",{attrs:{dense:""}},t._l(t.datePeriodOptions,(function(option){return n("v-list-tile",{key:option.value,on:{click:function(e){return t.selectDatePeriod(option)}}},[t._v(t._s(option.title))])})),1)],1)],1),t._v(" "),n("v-flex",[n("v-card-text",{staticClass:"text-sm-center"},[n("label",[t._v("From Date")])]),t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.startDateString,callback:function(e){t.startDateString=e},expression:"startDateString"}})],1),t._v(" "),n("v-flex",[n("v-card-text",{staticClass:"text-sm-center"},[n("label",[t._v("To Date")])]),t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.endDateString,callback:function(e){t.endDateString=e},expression:"endDateString"}})],1)],1)],1)],1)],1):"datemeasure"==t.inputType?n("v-flex",{attrs:{xs12:"",sm5:""}},[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{staticClass:"small-input",attrs:{"single-line":"",label:"Total"},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:""}},[n("v-autocomplete",{staticClass:"small-input",attrs:{dense:"",label:"Period","item-text":"title","item-value":"value",items:t.dateMeasures},model:{value:t.model.value2,callback:function(e){t.$set(t.model,"value2",e)},expression:"model.value2"}})],1)],1)],1):"range"==t.inputType?n("v-flex",{attrs:{xs12:"",sm5:""}},[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{staticClass:"small-input",attrs:{"single-line":"",label:"from"},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{staticClass:"small-input",attrs:{"single-line":"",label:"to"},model:{value:t.model.value2,callback:function(e){t.$set(t.model,"value2",e)},expression:"model.value2"}})],1)],1)],1):"array"==t.inputType&&"date"!=t.dataType?n("v-flex",{attrs:{xs12:"",sm5:""}},[t.simpleKeyIsRealms?[n("fluro-realm-select",{attrs:{action:"view any",filterDiscriminator:t.discriminator||t.discriminatorType||t.discriminatorDefinition,block:"",small:""},model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})]:t.useBasicReferenceSelect?[n("fluro-content-select-button",{attrs:{createDisabled:!0,small:"",block:"",allDefinitions:!0,type:t.useBasicReferenceSelect},model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})]:[t.referenceSelectField?[t.$vuetify.breakpoint.xsOnly?[n("v-select",{staticClass:"small-input",attrs:{multiple:"",dense:"","item-text":"title","item-value":"_id",loading:t.loadingValues,items:t.cleanedValueSelection},scopedSlots:t._u([{key:"item",fn:function(data){return["event"==data.item._type?[n("v-list-tile-content",{staticClass:"border-bottom",staticStyle:{height:"50px"}},[n("strong",[t._v(t._s(data.item.title))]),t._v(" "),n("div",{staticClass:"muted"},[t._v(t._s(t._f("readableEventDate")(data.item)))])])]:[t._v(t._s(data.item.title))]]}}],null,!1,2271830854),model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})]:[n("v-autocomplete",{staticClass:"small-input",attrs:{multiple:"",dense:"","item-text":"title","item-value":"_id",loading:t.loadingValues,items:t.cleanedValueSelection},scopedSlots:t._u([{key:"item",fn:function(data){return["event"==data.item._type?[n("v-list-tile-content",{staticClass:"border-bottom",staticStyle:{height:"50px"}},[n("strong",[t._v(t._s(data.item.title))]),t._v(" "),n("div",{staticClass:"muted"},[t._v(t._s(t._f("readableEventDate")(data.item)))])])]:[t._v(t._s(data.item.title))]]}}],null,!1,2271830854),model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})]]:[t.$vuetify.breakpoint.xsOnly?[n("v-select",{staticClass:"small-input",attrs:{multiple:"",dense:"",loading:t.loadingValues,items:t.cleanedValueSelection},model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})]:[n("v-autocomplete",{staticClass:"small-input",attrs:{multiple:"",dense:"",loading:t.loadingValues,items:t.cleanedValueSelection},model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})]]]],2):n("v-flex",{attrs:{xs12:"",sm5:""}},["date"==t.dataType?["datesameweekday"==t.model.comparator||"datedifferentweekday"==t.model.comparator?[n("div",[n("v-select",{attrs:{"single-line":"",multiple:"",dense:"","item-text":"title","item-value":"value",items:t.weekdays},model:{value:t.model.values,callback:function(e){t.$set(t.model,"values",e)},expression:"model.values"}})],1)]:[n("div",[n("v-menu",{ref:"date1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[t.model.computedValue&&t.model.computedValue.length?[n("v-text-field",{staticClass:"small-input",attrs:{"single-line":"",label:"Relative Date"},model:{value:t.model.computedValue,callback:function(e){t.$set(t.model,"computedValue",e)},expression:"model.computedValue"}})]:[n("v-text-field",t._g({staticClass:"small-input",attrs:{"single-line":"",label:"Date",placeholder:t.model.computedValue},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}},r))]]}}],null,!1,183020790),model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}},[n("v-spacer"),t._v(" "),n("v-text-field",{staticClass:"small-input",attrs:{"single-line":"",label:"Relative Date"},model:{value:t.model.computedValue,callback:function(e){t.$set(t.model,"computedValue",e)},expression:"model.computedValue"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.date1=!1}}},[t._v("Cancel")]),t._v(" "),n("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.date1.save(t.model.value)}}},[t._v("OK")])],1)],1)],1)]]:"number"==t.dataType||"float"==t.dataType||"decimal"==t.dataType?n("v-text-field",{staticClass:"small-input",attrs:{"single-line":""},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}}):"integer"==t.dataType?n("v-text-field",{staticClass:"small-input",attrs:{"single-line":"",mask:"############"},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}}):t.useBasicReferenceSelect?[n("fluro-content-select-button",{attrs:{createDisabled:!0,small:"",block:"",allDefinitions:!0,maximum:1,"single-value":!0,type:t.useBasicReferenceSelect},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})]:t.referenceSelectField?[t.$vuetify.breakpoint.xsOnly?[n("v-select",{staticClass:"small-input",attrs:{dense:"","item-text":"title","item-value":"_id",loading:t.loadingValues,items:t.cleanedValueSelection},scopedSlots:t._u([{key:"item",fn:function(data){return["event"==data.item._type?[n("v-list-tile-content",{staticClass:"border-bottom",staticStyle:{height:"50px"}},[n("strong",[t._v(t._s(data.item.title))]),t._v(" "),n("div",{staticClass:"muted"},[t._v(t._s(t._f("readableEventDate")(data.item)))])])]:[t._v(t._s(data.item.title))]]}}],null,!1,2271830854),model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})]:[n("v-autocomplete",{staticClass:"small-input",attrs:{dense:"","item-text":"title","item-value":"_id",loading:t.loadingValues,items:t.cleanedValueSelection},scopedSlots:t._u([{key:"item",fn:function(data){return["event"==data.item._type?[n("v-list-tile-content",{staticClass:"border-bottom",staticStyle:{height:"50px"}},[n("strong",[t._v(t._s(data.item.title))]),t._v(" "),n("div",{staticClass:"muted"},[t._v(t._s(t._f("readableEventDate")(data.item)))])])]:[t._v(t._s(data.item.title))]]}}],null,!1,2271830854),model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})]]:[t.requiresManualInput?[n("v-text-field",{staticClass:"small-input",attrs:{"single-line":""},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})]:[t.$vuetify.breakpoint.xsOnly?[n("v-select",{staticClass:"small-input",attrs:{dense:"",loading:t.loadingValues,items:t.cleanedValueSelection},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})]:[n("v-autocomplete",{staticClass:"small-input",attrs:{dense:"",loading:t.loadingValues,items:t.cleanedValueSelection},model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}})]]]],2)]:t._e()],2),t._v(" "),t.hasSubFields?[t.model.criteria&&t.model.criteria.length?n("div",{staticClass:"subfields"},[n("v-input",{staticClass:"no-flex"},[n("v-label",[t._v(t._s(t.selector.subfieldTitle))]),t._v(" "),t._l(t.model.criteria,(function(e,r){return n("v-layout",{key:e.guid},[n("v-flex",[n("filter-condition-row",{attrs:{forceLocalValues:t.forceLocalValues,type:t.type,definition:t.definition,rows:t.rows,fields:t.selector.subfields,mini:t.mini},model:{value:t.model.criteria[r],callback:function(e){t.$set(t.model.criteria,r,e)},expression:"model.criteria[index]"}})],1),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"ma-0",attrs:{small:"",flat:"",color:"error",icon:""},on:{click:function(e){return t.removeCriteria(r)}}},[n("fluro-icon",{attrs:{icon:"trash-alt"}})],1)],1)],1)}))],2)],1):t._e(),t._v(" "),n("v-btn",{staticClass:"ml-0",attrs:{small:""},on:{click:function(e){return t.addCriteriaRow()}}},[t._v("\n\t\t\tAdd criteria\n\t\t\t"),n("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)]:t._e()],2):t._e()}),[],!1,null,"fc4302f6",null);e.default=component.exports},270:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=n(15),f=n(13);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}n(26),n(40);var h=function(t){Object(l.a)(n,t);var e=v(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"fluroNode"}},{key:"defaultOptions",get:function(){return{classes:[{id:"lead",title:"Lead Text",tag:"span",className:"lead"}]}}},{key:"schema",get:function(){var t=this;return{attrs:{id:{},label:{},title:{},tag:{},className:{}},content:"inline*",group:"inline",defining:!0,draggable:!1,inline:!0,toDOM:function(e){return["fluroNode",{class:t.options.mentionClass,"data-fluroNode-id":e.attrs.id}]},parseDOM:[{tag:"fluroNode[data-fluroNode-id]",getAttrs:function(t){return{id:t.getAttribute("data-fluroNode-id")}}}]}}},{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(t){return function(r,o,view){t.class=t.className;t.tag,t.title,t.className;console.log(e,n,t),Object(f.p)(e,n.nodes.paragraph,t)}}}}]),n}(d.h)},271:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=n(15),f=n(13);n(40);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(t){Object(l.a)(n,t);var e=v(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"fluroMark"}},{key:"defaultOptions",get:function(){return{classes:[{id:"xs",title:"Extra Small",tag:"span",class:"text-xs"},{id:"sm",title:"Small",tag:"span",class:"text-sm"},{id:"muted",title:"Muted",tag:"span",class:"text-muted"},{id:"lg",title:"Large",tag:"span",class:"text-lg"},{id:"xl",title:"Extra Large",tag:"span",class:"text-xl"}]}}},{key:"schema",get:function(){return{attrs:{level:{default:""}},parseDOM:[{tag:"span.typography",getAttrs:function(t){return{level:t.classList[1]}}}],toDOM:function(mark){return["span",{class:"typography ".concat(mark.attrs.level)},0]}}}},{key:"commands",value:function(t){var e=t.type;return function(t){return Object(f.r)(e,t)}}}]),n}(d.g)},291:function(t,e,n){"use strict";n(23),n(102),n(59);var r=n(0),o=n.n(r),l=n(71),c=n.n(l),m=(n(17),n(25)),d=n(92),f=(n(208),{props:{options:{type:Object}},mixins:[m.a],data:function(){return{flipped:!1}},computed:{instructions:function(){return this.task.instructions||{}},pendingEnabled:function(){return!this.instructions.pendingDisabled},failedEnabled:function(){return!this.instructions.failedDisabled},completeLabel:function(){return this.instructions.completeLabel&&this.instructions.completeLabel.length?this.instructions.completeLabel:"Complete"},pendingLabel:function(){return this.instructions.pendingLabel&&this.instructions.pendingLabel.length?this.instructions.pendingLabel:"In Progress"},failedLabel:function(){return this.instructions.failedLabel&&this.instructions.failedLabel.length?this.instructions.failedLabel:"Failed"},completeDescription:function(){return this.instructions.completeDescription&&this.instructions.completeDescription.length?this.instructions.completeDescription:""},pendingDescription:function(){return this.instructions.pendingDescription&&this.instructions.pendingDescription.length?this.instructions.pendingDescription:""},failedDescription:function(){return this.instructions.failedDescription&&this.instructions.failedDescription.length?this.instructions.failedDescription:""},task:function(){return this.options.task},card:function(){return this.options.card},title:function(){return this.task.name},description:function(){return this.task.description}},methods:{select:function(option){var t,e,n=this;switch(n.task.status=option,option){case"complete":t=n.task.postComplete,e=n.task.postCompleteAttach;break;case"pending":t=n.task.postPending,e=n.task.postPendingAttach;break;case"failed":t=n.task.postFailed,e=n.task.postFailedAttach}if(!t)return n.close(option);console.log("Do a task",n.card.item,n.card,e);var r,o=n.card.item,l=o||n.card,c=n.card.contacts;if(o)switch(o._type){case"interaction":case"post":e||c&&c.length&&(e="contacts",console.log("ATTACH TO CONTACTS AS A PREFERENCE"))}switch(e){case"contact":o&&"contact"==o._type?(l=o,console.log("Attach to referenced contact")):c&&c.length&&(console.log("Attach to first key contact"),l=c[0]);break;case"contacts":c&&c.length&&(l=null,r=c,console.log("Attach to ALL contacts"));break;case"card":l=o,console.log("Attach to the card directly")}n.$fluro.modal({component:d.a,options:{definitionName:t,skip:!0,item:l,items:r}}).then((function(t){return n.close(option)})).catch((function(t){return t?n.$fluro.error(t):n.close(option)}))}}}),v=(n(1313),n(1)),h=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",{staticClass:"fluro-task-modal"},[n("flex-column-header",{staticClass:"border-bottom"},[n("v-container",{attrs:{fluid:""}},[n("h3",[t._v(t._s(t.title))])])],1),t._v(" "),n("flex-column-body",[n("v-container",{attrs:{fluid:""}},[n("div",{staticClass:"introduction",domProps:{innerHTML:t._s(t.description)}})]),t._v(" "),n("div",{staticClass:"task-options border-top border-bottom"},[n("div",{staticClass:"task-option-item complete",class:{active:"complete"==t.task.status},on:{click:function(e){return t.select("complete")}}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("strong",[t._v(t._s(t.completeLabel))]),t._v(" "),t.completeDescription?n("div",{staticClass:"sm muted"},[t._v(t._s(t.completeDescription))]):t._e()]),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("div",{staticClass:"task-icon"},[n("fluro-icon",{attrs:{icon:"thumbs-up"}})],1)])],1)],1),t._v(" "),t.pendingEnabled?n("div",{staticClass:"task-option-item pending",class:{active:"pending"==t.task.status},on:{click:function(e){return t.select("pending")}}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("strong",[t._v(t._s(t.pendingLabel))]),t._v(" "),t.pendingDescription?n("div",{staticClass:"sm muted"},[t._v(t._s(t.pendingDescription))]):t._e()]),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("div",{staticClass:"task-icon"},[n("fluro-icon",{attrs:{icon:"tasks"}})],1)])],1)],1):t._e(),t._v(" "),t.failedEnabled?n("div",{staticClass:"task-option-item failed",class:{active:"failed"==t.task.status},on:{click:function(e){return t.select("failed")}}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("strong",[t._v(t._s(t.failedLabel))]),t._v(" "),t.failedDescription?n("div",{staticClass:"sm muted"},[t._v(t._s(t.failedDescription))]):t._e()]),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("div",{staticClass:"task-icon"},[n("fluro-icon",{attrs:{icon:"thumbs-down"}})],1)])],1)],1):t._e(),t._v(" "),"incomplete"!=t.task.status?n("div",{staticClass:"task-option-item",on:{click:function(e){return t.select("incomplete")}}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("strong",[t._v("Incomplete")]),t._v(" "),n("div",{staticClass:"sm muted"},[t._v("Reset this task back to it's untouched state")])]),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("div",{staticClass:"task-icon"},[n("fluro-icon",{attrs:{icon:"circle"}})],1)])],1)],1):t._e()])],1),t._v(" "),n("flex-column-footer",{staticClass:"border-top"},[n("v-container",{staticClass:"py-1 px-2"},[n("v-btn",{attrs:{block:""},on:{click:function(e){return t.dismiss()}}},[t._v("Cancel")])],1)],1)],1)}),[],!1,null,null,null).exports,y=n(34),x=n(75),k=n(74),_={components:{FluroContentForm:y.default,FluroTabset:x.a,FluroTab:k.a},props:{options:{type:Object}},mixins:[m.a],data:function(){var t=JSON.parse(JSON.stringify(this.options.task));return t.instructions||(t.instructions={}),{model:t,fields:[{title:"Task name",key:"name",type:"string",minimum:0,maximum:1},{title:"Description",description:"Optional extra detail for how to complete this task",placeholder:"Optional extra detail for how to complete this task",key:"description",type:"string",directive:"textarea",minimum:0,maximum:1}]}},methods:{update:function(){console.log("Update occurred!"),this.options.callback(this.model)}},asyncComputed:{postTypes:{default:[],get:function(){return this.$fluro.types.subTypes("post")}}},computed:{postOptions:function(){var t=o.a.chain(this.postTypes).map((function(t){return{name:t.title,value:t.definitionName}})).orderBy((function(t){return t.name})).value();return t.unshift({name:"None",value:""}),t},postAttachOptions:function(){return[{name:"The Referenced Item",value:""},{name:"The Primary Key Contact",value:"contact"},{name:"Each Key Contact",value:"contacts"},{name:"The Card Itself",value:"card"}]},completeFields:function(){var t=this;return[{type:"group",asObject:!0,minimum:1,maximum:1,askCount:1,key:"instructions",fields:[{title:"Complete Label",description:"Set what label should be used when referring to this task being complete",key:"completeLabel",type:"string",minimum:0,maximum:1,params:{persistentDescription:!0}},{title:"Instructions",description:"Add extra detail about what this task means when it is marked as complete",key:"completeDescription",type:"string",directive:"textarea",minimum:0,maximum:1,params:{persistentDescription:!0}}]},{title:"Complete Post Type",description:"Ask for a post to be created for extra details when this task is marked as complete",params:{persistentDescription:!0},key:"postComplete",type:"string",directive:"select",minimum:0,maximum:1,options:t.postOptions},{title:"Complete Post Attach",description:"Where should the post be attached to?",params:{persistentDescription:!0},key:"postCompleteAttach",type:"string",directive:"select",minimum:1,maximum:1,options:t.postAttachOptions,expressions:{show:function(){return t.model.postComplete}}}]},pendingFields:function(){var t=this;return[{type:"group",asObject:!0,minimum:1,maximum:1,askCount:1,key:"instructions",className:"form-group",fields:[{title:"Disable '".concat(t.pendingLabel,"' Option"),description:"Disable the ability for this task to be marked as '".concat(t.pendingLabel,"'"),key:"pendingDisabled",type:"boolean",minimum:0,maximum:1},{type:"group",expressions:{hide:"model.pendingDisabled"},fields:[{title:"Pending Label",description:"Set what label should be used when referring to this task being in progress or",key:"pendingLabel",params:{persistentDescription:!0},type:"string",minimum:0,maximum:1},{title:"Instructions",description:"Add extra detail about what this task means when it is marked as pending",key:"pendingDescription",params:{persistentDescription:!0},type:"string",directive:"textarea",minimum:0,maximum:1}]}]},{title:"Pending Post Type",description:"Ask for a post to be created for extra details when this task is marked as pending",key:"postPending",params:{persistentDescription:!0},type:"string",directive:"select",minimum:0,maximum:1,options:t.postOptions,expressions:{hide:"data.instructions.pendingDisabled"}},{title:"Pending Post Attach",description:"Where should the post be attached to?",params:{persistentDescription:!0},key:"postPendingAttach",type:"string",directive:"select",minimum:1,maximum:1,options:t.postAttachOptions,expressions:{show:function(){return t.model.postPending}}}]},failedFields:function(){var t=this;return[{type:"group",asObject:!0,minimum:1,maximum:1,askCount:1,key:"instructions",fields:[{title:"Disable '".concat(t.failedLabel,"' Option"),description:"Disable the ability for this task to be marked as '".concat(t.failedLabel,"'"),key:"failedDisabled",type:"boolean",minimum:0,maximum:1},{type:"group",expressions:{hide:"model.failedDisabled"},fields:[{title:"Label",description:"Set what label should be used when referring to this task being '".concat(t.failedLabel,"'"),key:"failedLabel",type:"string",params:{persistentDescription:!0},minimum:0,maximum:1},{title:"Instructions",description:"Add extra detail about what this task means when it is marked as '".concat(t.failedLabel,"'"),key:"failedDescription",type:"string",params:{persistentDescription:!0},directive:"textarea",minimum:0,maximum:1}]}]},{title:"Failed Post Type",description:"Ask for a post to be created for extra details when this task is marked as '".concat(t.failedLabel,"'"),params:{persistentDescription:!0},key:"postFailed",expressions:{hide:"data.instructions.failedDisabled"},type:"string",directive:"select",minimum:0,maximum:1,options:t.postOptions},{title:"Failed Post Attach",description:"Where should the post be attached to?",params:{persistentDescription:!0},key:"postFailedAttach",type:"string",directive:"select",minimum:1,maximum:1,options:t.postAttachOptions,expressions:{show:function(){return t.model.postFailed}}}]},instructions:function(){return this.model.instructions||{}},completeLabel:function(){return this.instructions.completeLabel||"Complete"},pendingLabel:function(){return this.instructions.pendingLabel||"Pending"},failedLabel:function(){return this.instructions.failedLabel||"Failed"}}},w=(n(1315),Object(v.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",{staticClass:"fluro-task-edit-modal"},[n("flex-column-header",{staticClass:"border-bottom"},[n("v-container",{attrs:{"pa-2":""}},[n("v-layout",{attrs:{"align-center":"",row:""}},[n("v-flex",[n("h4",[n("fluro-icon",{attrs:{icon:"square-pencil"}}),t._v(" "+t._s(t.model.name))],1)]),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"ma-0",attrs:{small:"",color:"primary"},on:{click:function(e){return t.close(t.model)}}},[t._v(" Done ")])],1)],1)],1)],1),t._v(" "),n("fluro-tabset",{attrs:{justified:!0}},[n("fluro-tab",{attrs:{heading:"Description"}},[n("flex-column-body",[n("v-container",[n("fluro-content-form",{attrs:{fields:t.fields},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1),t._v(" "),n("fluro-tab",{attrs:{heading:t.completeLabel}},[n("flex-column-body",[n("v-container",{attrs:{fluid:""}},[n("fluro-content-form",{attrs:{fields:t.completeFields},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1),t._v(" "),n("fluro-tab",{attrs:{heading:t.pendingLabel}},[n("flex-column-body",[n("v-container",{attrs:{fluid:""}},[n("fluro-content-form",{attrs:{fields:t.pendingFields},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1),t._v(" "),n("fluro-tab",{attrs:{heading:t.failedLabel}},[n("flex-column-body",[n("v-container",{attrs:{fluid:""}},[n("fluro-content-form",{attrs:{fields:t.failedFields},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1)],1),t._v(" "),n("flex-column-footer",{staticClass:"border-top"},[n("v-container",{staticClass:"py-1 px-2"},[n("v-btn",{attrs:{block:""},on:{click:function(e){return t.dismiss()}}},[t._v(" Cancel ")])],1)],1)],1)}),[],!1,null,null,null).exports),D=n(87),C=n(125),S={components:{FluroInlineEdit:D.a,FluroEditor:C.default},props:{value:{type:Object,required:!0},state:{type:String},definition:{type:Object},card:{type:Object},mode:{type:String,default:function(){return"do"}}},mounted:function(){},data:function(){var t=JSON.parse(JSON.stringify(this.value));return t.autofocus&&delete t.autofocus,t.immediateModal&&(console.log("Immediate Modal!",this.value),delete t.immediateModal),{actionsOpen:!1,over:!1,checked:!1,model:t}},computed:{states:function(){var t=o.a.get(this,"definition.data.states");return JSON.parse(JSON.stringify(t))}},watch:{value:function(t){this.model=t}},methods:{clicked:function(){var t=this;if("edit"===t.mode)t.edit();else t.prompt()},removeTask:function(){console.log("REMOVE!!"),this.$emit("remove",this.model)},edit:function(){var t=this;return t.$fluro.modal({component:w,options:{task:t.model,card:t.card,definition:JSON.parse(JSON.stringify(t.definition)),callback:function(data){console.log("MODEL",data),t.model=data,t.update()}}}).then((function(e){console.log("MODEL RESULT",e),t.model=e,t.update()})).catch((function(t){}))},update:function(){this.$emit("input",this.model)},prompt:function(){var t=this;if("edit"!=t.mode){var e=this.model,n=o.a.chain(t.states).find((function(e){if(t.card)return e.key==t.card.state})).value().taskLists||[],r=o.a.chain(n).map("tasks").flatten().find((function(t){return t.name==e.name})).value();return t.$fluro.modal({component:h,options:{task:JSON.parse(JSON.stringify(r||t.model)),card:t.card}}).then((function(e){t.$set(t.model,"status",e),t.update()})).catch((function(t){}))}}}},T=(n(1317),Object(v.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluro-task-item",class:[t.model.status,{hover:t.over}],on:{mouseover:function(e){t.over=!0},mouseout:function(e){t.over=!1},click:function(e){return t.clicked()}}},[n("v-layout",{attrs:{"align-center":"",row:""}},[n("v-flex",{attrs:{shrink:""}},[n("div",{staticClass:"task-icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.prompt()}}},[n("v-btn",{staticClass:"ma-0 mr-2",attrs:{icon:""}},[n("span",{staticClass:"checkbox-outer",class:t.model.status},["pending"==t.model.status?n("fluro-icon",{attrs:{library:"fas",icon:"minus"}}):"failed"==t.model.status?n("fluro-icon",{attrs:{library:"fas",icon:"exclamation"}}):n("fluro-icon",{attrs:{library:"fas",icon:"check"}})],1)])],1)]),t._v(" "),n("v-flex",[n("fluro-inline-edit",{scopedSlots:t._u([{key:"default",fn:function(){return[n("strong",[t._v(t._s(t.model.name))])]},proxy:!0},{key:"edit",fn:function(e){e.props;var r=e.blur,o=e.focus;return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.model.name,expression:"model.name"}],staticClass:"input",domProps:{value:t.model.name},on:{focus:function(t){return o(t)},input:[function(e){e.target.composing||t.$set(t.model,"name",e.target.value)},t.update],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.apply(null,arguments)},blur:r}})]}}])}),t._v(" "),n("div",{staticClass:"wrap"},[n("fluro-inline-edit",{scopedSlots:t._u([{key:"default",fn:function(){return[n("div",{staticClass:"sm muted",domProps:{innerHTML:t._s(t.model.description)}}),t._v(" "),n("div",{staticClass:"detail-placeholder"},[t.model.description&&t.model.description.length?t._e():n("div",{staticClass:"sm muted"},[t._v("\n\t\t\t\t\t\t\t\tClick here to add more description\n\t\t\t\t\t\t\t")])])]},proxy:!0},{key:"edit",fn:function(e){e.props;var r=e.blur,o=e.focus;return[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.description,expression:"model.description"}],staticClass:"input",attrs:{placeholder:"Add more details to this task"},domProps:{value:t.model.description},on:{focus:function(t){return o(t)},input:[function(e){e.target.composing||t.$set(t.model,"description",e.target.value)},t.update],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.apply(null,arguments)},blur:r}})]}}])})],1)],1),t._v(" "),n("v-flex",{staticClass:"edit-button",attrs:{shrink:""},on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[n("v-menu",{attrs:{fixed:!0,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0",attrs:{content:"More Options",small:"",icon:""}},r),[n("fluro-icon",{attrs:{icon:"ellipsis-h"}})],1)]}}]),model:{value:t.actionsOpen,callback:function(e){t.actionsOpen=e},expression:"actionsOpen"}},[t._v(" "),n("v-list",{attrs:{dense:""}},[n("v-list-tile",{on:{click:t.edit}},[n("v-list-tile-content",[t._v("Edit Task")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list-tile",{on:{click:function(e){return t.removeTask()}}},[n("v-list-tile-content",[t._v("Delete Task")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null)),O=T.exports,N={components:{draggable:c.a,FluroTaskItem:O,FluroInlineEdit:D.a},props:{card:{type:Object},editMode:{type:Boolean},value:{type:Object,required:!0},state:{type:String,required:!0},definition:{type:Object,required:!0}},data:function(){var t=JSON.parse(JSON.stringify(this.value));return delete t.autofocus,{over:!1,actionsOpen:!1,model:t,proposedTaskName:""}},watch:{value:function(t){this.model!=t&&(this.model=JSON.parse(JSON.stringify(t)))}},methods:{removeTask:function(t){var e=this,n=o.a.camelCase(t.name),r=o.a.findIndex(e.model.tasks,(function(t){return o.a.camelCase(t.name)==n}));console.log("REMOVE",t,r),-1!=r&&(e.model.tasks.splice(r,1),e.update(),console.log("Remove tasks!"))},newTaskMore:function(){var t=this;t.model.tasks.push({name:t.proposedTaskName,required:!0,state:t.state,status:"incomplete"}),t.proposedTaskName="",t.update()},pushProposedTask:function(t){var e=this;e.proposedTaskName&&e.proposedTaskName.length&&(e.model.tasks.push({autofocus:!0,name:String(e.proposedTaskName),required:!0,state:e.state}),e.update()),e.proposedTaskName="",t&&t()},addTask:function(){var t=this;t.model.tasks.push({name:"New task",required:!0,state:t.state,status:"incomplete"}),t.update()},selectState:function(t){this.model.state=t,this.update()},dragStart:function(){},dragEnd:function(){this.update()},onChange:function(){this.update()},update:function(){this.$emit("input",this.model)},remove:function(){this.update(),this.$emit("remove",this.model)}},computed:{dragOptions:function(){return{group:"tasks",animation:150}},requiredMessage:function(){var t=this.model.state;if(t){var e=o.a.find(this.states,{key:t});if(e)return"Required to complete <strong>".concat(e.title,"</strong>")}},states:function(){return o.a.get(this.definition,"data.states")},availableActions:function(){return[{title:"Edit '".concat(this.model.title,"'"),click:function(){}}]}}},F=(n(1319),Object(v.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluro-task-list"},[n("v-layout",{attrs:{"align-center":"",row:""}},[n("v-flex",{staticStyle:{padding:"5px"}},[n("h5",[n("fluro-inline-edit",{scopedSlots:t._u([{key:"default",fn:function(){return[t._v("\n\t\t\t\t\t\t\t"+t._s(t.model.title)+"\n\t\t\t\t\t\t")]},proxy:!0},{key:"edit",fn:function(e){e.props;var r=e.blur,o=e.focus;return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.model.title,expression:"model.title"}],attrs:{block:""},domProps:{value:t.model.title},on:{input:[function(e){e.target.composing||t.$set(t.model,"title",e.target.value)},t.update],focus:function(t){return o(t)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.apply(null,arguments)},blur:r}})]}}])})],1),t._v(" "),t.requiredMessage?n("p",{staticClass:"help-block",domProps:{innerHTML:t._s(t.requiredMessage)}}):t._e()]),t._v(" "),n("v-flex",{staticClass:"hover",attrs:{shrink:""}},[n("v-menu",{attrs:{left:!0,fixed:!0,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0",attrs:{content:"More Options",icon:"",flat:""}},r),[t.actionsOpen?n("fluro-icon",{attrs:{icon:"times"}}):n("fluro-icon",{attrs:{icon:"ellipsis-h"}})],1)]}}]),model:{value:t.actionsOpen,callback:function(e){t.actionsOpen=e},expression:"actionsOpen"}},[t._v(" "),n("v-list",{attrs:{dense:""}},[t._l(t.states,(function(e){return n("v-list-tile",{on:{click:function(n){return t.selectState(e.key)}}},[n("v-list-tile-content",[t._v("Mark as required to complete '"+t._s(e.title)+"'")])],1)})),t._v(" "),n("v-list-tile",{on:{click:function(e){return t.selectState(null)}}},[n("v-list-tile-content",[t._v("Disconnect from process")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list-tile",{on:{click:function(e){return t.remove()}}},[n("v-list-tile-content",[t._v("Delete '"+t._s(t.model.title)+"'")])],1)],2)],1)],1)],1),t._v(" "),n("draggable",{staticClass:"task-list-items",attrs:{list:t.model.tasks,options:t.dragOptions},on:{start:t.dragStart,change:t.onChange,end:t.dragEnd}},t._l(t.model.tasks,(function(e,r){return n("fluro-task-item",{key:e.guid,attrs:{state:t.state,mode:t.editMode?"edit":"do",definition:t.definition,card:t.card},on:{remove:t.removeTask,input:t.update},model:{value:t.model.tasks[r],callback:function(e){t.$set(t.model.tasks,r,e)},expression:"model.tasks[index]"}})})),1),t._v(" "),[n("fluro-inline-edit",{attrs:{autofocus:t.value.autofocus},scopedSlots:t._u([{key:"default",fn:function(){return[n("v-btn",{staticClass:"ml-0",attrs:{small:""}},[t._v("\n\t\t\t\t\t\tAdd task\n\t\t\t\t\t\t"),n("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)]},proxy:!0},{key:"edit",fn:function(e){e.props;var r=e.blur;e.focus;return[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.proposedTaskName,expression:"proposedTaskName"}],attrs:{block:"",placeholder:"Type a title for this task and then press enter"},domProps:{value:t.proposedTaskName},on:{blur:r,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.pushProposedTask()},input:function(e){e.target.composing||(t.proposedTaskName=e.target.value)}}})]),t._v(" "),t.proposedTaskName.length?n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{mousedown:function(e){return t.newTaskMore()}}},[n("fluro-icon",{attrs:{icon:"ellipsis-h"}})],1)],1):t._e()],1)]}}])})]],2)}),[],!1,null,null,null));e.a=F.exports},767:function(t,e,n){var content=n(1122);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("b8cf19d2",content,!0,{sourceMap:!1})},768:function(t,e,n){var content=n(1124);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("495c5ef4",content,!0,{sourceMap:!1})},769:function(t,e,n){var content=n(1126);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("2623a5c6",content,!0,{sourceMap:!1})},770:function(t,e,n){var content=n(1128);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("6f62a5c8",content,!0,{sourceMap:!1})},771:function(t,e,n){var content=n(1130);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("7a2f2b6d",content,!0,{sourceMap:!1})},775:function(t,e,n){var content=n(1138);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("518ec226",content,!0,{sourceMap:!1})},790:function(t,e,n){var content=n(1195);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("a3cec862",content,!0,{sourceMap:!1})},791:function(t,e,n){var content=n(1197);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("4e70347d",content,!0,{sourceMap:!1})},82:function(t,e,n){"use strict";n.r(e);n(21),n(22),n(1145),n(17);var r=n(5),o=n.n(r),l=n(0),c=n.n(l),m=n(89),d=n(104),f={props:{createDisabled:{type:Boolean},label:{type:String},lockFilter:{type:Object},filter:{type:Object,default:function(){return{default:!0,operator:"and",filters:[{operator:"and",filters:[{key:"status",comparator:"in",values:["active","draft"]}]}]}}},small:{type:Boolean},block:{type:Boolean},large:{type:Boolean},color:{type:String},searchInheritable:{type:Boolean,default:!0},allDefinitions:{type:Boolean},singleValue:{type:Boolean},type:{type:String,default:function(){return"node"}},minimum:{type:Number,default:0},maximum:{type:Number,default:0},value:{}},computed:{createTooltip:function(){return"Create new ".concat(this.$fluro.types.readable(this.type))},canCreate:function(){return!this.createDisabled&&this.$fluro.access.can("create",this.type)},selection:function(){return this.selector?this.selector.selection:[]},title:function(){return this.$fluro.types.readable(this.type,!1)},plural:function(){return this.$fluro.types.readable(this.type,!0)},selectionSummary:function(){var t=this,e=c.a.filter(t.selection,(function(e){if(e){if(!t.type||"node"==t.type)return!0;var n=e.definition==t.type,r=e._type==t.type;return n||r}}));return e.length?e.length>3?"".concat(e.length," ").concat(t.plural," selected"):c.a.map(e,"title").join(", "):t.label&&t.label.length?t.label:t.small?"Select ".concat(t.plural):"Click to select ".concat(t.plural)}},created:function(){var t=this,e=o.a.extend(d.a),n=t.singleValue?[t.value]:t.value;t.selector=new e({propsData:{minimum:t.minimum,maximum:t.maximum,allDefinitions:t.allDefinitions,searchInheritable:t.searchInheritable,value:n}})},data:function(){return{selector:null}},watch:{minimum:function(t){this.selector.minimum=t},maximum:function(t){this.selector.maximum=t},value:function(t){this.selector.value=this.singleValue?[t]:t},selection:function(t){this.singleValue&&(t=c.a.first(t)),this.$emit("input",t)}},methods:{create:function(){var t=this;t.$fluro.global.create(t.type,{disableCacheClearOnSave:!0},!0).then((function(e){t.selector.select(e)}))},showModal:function(){var t=this;t.$fluro.modal({component:m.a,options:{selector:t.selector,type:t.type,allDefinitions:t.allDefinitions,searchInheritable:t.searchInheritable,filter:t.filter,lockFilter:t.lockFilter}})}}},v=n(1),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-select-button"},[n("v-layout",{staticStyle:{padding:"0",margin:"0"}},[n("v-flex",{staticStyle:{padding:"0",margin:"0"}},[n("v-btn",{staticClass:"pill ma-0",attrs:{small:t.small,large:t.large,color:t.color,block:t.block},nativeOn:{click:function(e){return t.showModal.apply(null,arguments)}}},[n("span",[t._v(t._s(t.selectionSummary))])])],1),t._v(" "),t.canCreate?n("v-flex",{staticStyle:{padding:"0",margin:"0"},attrs:{shrink:""}},[n("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pill my-0 mr-0 ml-1",attrs:{content:t.createTooltip,icon:"",small:t.small,large:t.large,color:"primary"},nativeOn:{click:function(e){return t.create.apply(null,arguments)}}},[n("fluro-icon",{attrs:{icon:"plus"}})],1)],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports},824:function(t,e,n){var content=n(1275);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("9f9933e8",content,!0,{sourceMap:!1})},825:function(t,e,n){var content=n(1277);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("a44d0282",content,!0,{sourceMap:!1})},83:function(t,e,n){"use strict";n(17),n(12),n(22);var r=n(0),o=n.n(r),l=n(160),c={name:"fluro-realm-select-item",props:{item:{type:Object,required:!0},callback:{type:Function,required:!0},check:{type:Function,required:!0},expandLookup:{type:Object,default:function(){return{}}},collapsible:{type:Boolean,default:!1}},methods:{toggleCollapsed:function(){this.expanded?this.collapse():this.expand()},expand:function(){this.$set(this.expandLookup,this.realmID,!0)},collapse:function(){this.$set(this.expandLookup,this.realmID,!1)}},computed:{hasChildren:function(){return this.item.children&&this.item.children.length},expandable:function(){return this.collapsible&&this.hasChildren},realmID:function(){return this.$fluro.utils.getStringID(this.item)},expanded:function(){return!this.collapsible||this.expandLookup[this.realmID]},isSelected:{get:function(){return this.check(this.item)},set:function(){}},dot:function(){return{backgroundColor:this.item.bgColor}}}},m=n(1),d=Object(m.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"realm-select-item-outer",class:{"has-children":t.item.children&&t.item.children.length}},[n("div",{staticClass:"realm-select-item",class:{selected:t.isSelected},on:{click:function(e){return t.callback(t.item)}}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("span",{staticClass:"dot",style:t.dot}),t._v("\n\t\t\t\t"+t._s(t.item.title)+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"type"},[t._v(t._s("Realm"!=t.item.fullDefinition.title?t.item.fullDefinition.title:""))]),t._v(" "),n("div",{staticClass:"check-icon"},[t.isSelected?n("fluro-icon",{attrs:{icon:"check"}}):t._e()],1),t._v(" "),t.expandable?n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"my-0",attrs:{small:"",icon:""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleCollapsed()}}},[n("fluro-icon",{attrs:{icon:t.expanded?"angle-up":"angle-down"}})],1)],1):t._e()],1)],1),t._v(" "),t.hasChildren?[t.expanded?n("div",{staticClass:"children"},[t._l(t.item.children,(function(e){return[n("fluro-realm-select-item",{attrs:{collapsible:t.collapsible,expandLookup:t.expandLookup,item:e,check:t.check,callback:t.callback}})]}))],2):t._e()]:t._e()],2)}),[],!1,null,null,null).exports,f=n(88),v=n(64),h=n(25),y=n(75),x=n(74),k={props:{options:{type:Object}},components:{FluroRealmSelectItem:d,FluroTabset:y.a,FluroTab:x.a},mixins:[h.a,v.a],data:function(){return{expandLookup:{},selector:this.options.selector}},methods:{isSelected:function(t){return this.selector.isSelected(t)},toggleRealm:function(t){return this.selector.toggleRealm(t)}},computed:{mega:function(){return _.some(this.tree,(function(t){return t.count>1e3}))},title:function(){var t="Realms";return 1==this.tree.length&&(t=this.tree[0].plural),"Select ".concat(t)},selection:function(){return this.selector.selection},tree:function(){return this.selector.tree},loading:function(){return this.selector.loading},ids:function(){return this.$fluro.utils.arrayIDs(this.options.items)}}},w=(n(1121),Object(m.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",{staticClass:"realm-select-modal"},[t.loading?n("flex-column",[n("v-container",{staticClass:"text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t.mega?[n("flex-column-header",{staticClass:"border-bottom"},[n("v-container",{attrs:{"py-2":""}},[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",[n("h3",{staticStyle:{margin:"0"}},[t._v(t._s(t.title))])]),t._v(" "),n("div",[n("v-btn",{staticClass:"ma-0",attrs:{color:"primary"},on:{click:function(e){return t.dismiss()}}},[t._v(" Done ")])],1)],1)],1)],1),t._v(" "),n("flex-column",[n("fluro-tabset",t._l(t.tree,(function(e){return n("fluro-tab",{key:e.definitionName,attrs:{heading:e.plural}},[n("flex-column-body",{staticClass:"realm-select-item-outer",class:{"has-selection":t.selection.length}},[n("div",{staticClass:"children"},[t._l(e.realms,(function(e){return[n("fluro-realm-select-item",{attrs:{item:e,collapsible:"",expandLookup:t.expandLookup,check:t.isSelected,callback:t.toggleRealm}})]}))],2)])],1)})),1)],1),t._v(" "),t.selector.selection.length?n("flex-column-footer",{staticClass:"border-top"},[n("v-container",{attrs:{"pa-1":""}},[n("v-btn",{attrs:{small:"",flat:""},on:{click:function(e){return t.selector.deselectAll()}}},[t._v("\n\t\t\t\t\t\tDeselect all "+t._s(t.selector.selection.length)+"\n\t\t\t\t\t")])],1)],1):t._e()]:[n("flex-column-header",{staticClass:"border-bottom"},[n("v-container",{attrs:{"py-2":""}},[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",[n("h3",{staticStyle:{margin:"0"}},[t._v(t._s(t.title))])]),t._v(" "),n("div",[n("v-btn",{staticClass:"ma-0",attrs:{color:"primary"},on:{click:function(e){return t.dismiss()}}},[t._v(" Done ")])],1)],1)],1)],1),t._v(" "),n("flex-column",[n("fluro-tabset",t._l(t.tree,(function(e){return n("fluro-tab",{key:e.definitionName,attrs:{heading:e.plural}},[n("flex-column-body",{staticClass:"realm-select-item-outer",class:{"has-selection":t.selection.length}},[n("div",{staticClass:"children"},[t._l(e.realms,(function(e){return[n("fluro-realm-select-item",{attrs:{item:e,check:t.isSelected,callback:t.toggleRealm}})]}))],2)])],1)})),1)],1),t._v(" "),t.selector.selection.length?n("flex-column-footer",{staticClass:"border-top"},[n("v-container",{attrs:{"pa-1":""}},[n("v-btn",{attrs:{small:"",flat:""},on:{click:function(e){return t.selector.deselectAll()}}},[t._v("\n\t\t\t\t\t\tDeselect all "+t._s(t.selector.selection.length)+"\n\t\t\t\t\t")])],1)],1):t._e()]],2)}),[],!1,null,null,null).exports),D={computed:{selectionAvailable:function(){return this.tree.length},singleOption:{get:function(){return this.singleOptionAvailable},set:function(t){this.singleOptionAvailable=t,this.$emit("single",t)}},mainType:function(){var t=this.tree;return 1==t.length?t[0].definition||t[0]._type:this.filterDiscriminator?this.filterDiscriminator:"realm"},title:function(){return this.$fluro.types.readable(this.mainType,!1,"realm")},plural:function(){return this.$fluro.types.readable(this.mainType,!0,"realm")},valueSummary:function(){var t=this;if(t.value)return t.value.length?t.value.length>3?"".concat(t.value.length," ").concat(t.plural," selected"):o.a.map(t.value,"title").join(", "):"Select ".concat(t.plural)},selectionSummary:function(){var t=this;return t.selection.length?t.selection.length>3?"".concat(t.selection.length," ").concat(t.plural," selected"):o.a.map(t.selection,"title").join(", "):"Select ".concat(t.plural)}},components:{FluroRealmSelectItem:d,FluroRealmDots:l.a},mixins:[v.a,f.a],props:{visibleSingle:{type:Boolean},small:{type:Boolean},block:{type:Boolean},action:{type:String,default:"create"},expanded:{type:Boolean},value:{type:Array,default:function(){return[]}},type:{type:String},definition:{type:String},filterDiscriminator:{type:String}},data:function(){return{singleOptionAvailable:!0,loading:!0}},asyncComputed:{tree:{default:[],get:function(){var t=this;function e(t,n){n[t._id]=t,t.children&&t.children.length&&o.a.each(t.children,(function(t){e(t,n)}))}return t.loading=!0,new Promise((function(n,r){t.$fluro.access.retrieveSelectableRealms(t.action,t.definition,t.type).then((function(r){var l=o.a.filter(r,(function(e){return!t.filterDiscriminator||!t.filterDiscriminator.length||("team"==t.filterDiscriminator?"team"==e._discriminatorType:e.definition==t.filterDiscriminator)})),c=o.a.reduce(r,(function(t,n){return o.a.each(n.realms,(function(n){e(n,t)})),t}),{}),m=o.a.map(c,(function(t){return t})),d=o.a.filter(c,(function(t){return t.basic})),f=(d.length,o.a.chain(t.$fluro.utils.arrayIDs(t.value)).map((function(t){return c[t]})).compact().value());n(l);var v=!1;f&&f.length?t.setSelection(f):1==m.length?t.setSelection(m):1==d.length&&(t.setSelection(d),console.log("PLAIN REALMS 1")),1!=m.length&&1!=d.length||(v=!0),t.singleOption=v,t.loading=!1}),(function(e){r(e),t.loading=!1}))}))}}},watch:{value:function(){this.setSelection(this.value)},selection:function(){this.$emit("input",this.selection)}},methods:{showModal:function(){this.$fluro.modal({component:w,options:{selector:this,fixed:!0}})},toggleRealm:function(t){this.toggle(t)}}},C=(n(1123),Object(m.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleSingle||!t.singleOptionAvailable,expression:"visibleSingle || !singleOptionAvailable"}],staticClass:"realm-select"},[t.selectionAvailable?[n("v-btn",{staticClass:"pill mx-0",attrs:{small:t.small,block:t.block},nativeOn:{click:function(e){return t.showModal.apply(null,arguments)}}},[n("fluro-realm-dots",{attrs:{realms:t.selection}}),t._v(" "),n("span",{staticClass:"label"},[t._v(t._s(t.selectionSummary))])],1)]:[n("v-btn",{staticClass:"pill mx-0",attrs:{small:t.small,block:t.block,disabled:!0}},[n("fluro-realm-dots",{attrs:{realms:t.value}}),t._v(" "),n("span",{staticClass:"label"},[t._v(t._s(t.valueSummary))])],1)]],2)}),[],!1,null,"0fa6b53a",null));e.a=C.exports},844:function(t,e,n){var content=n(1314);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("fbaa533e",content,!0,{sourceMap:!1})},845:function(t,e,n){var content=n(1316);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("922e39e6",content,!0,{sourceMap:!1})},846:function(t,e,n){var content=n(1318);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("527f23b6",content,!0,{sourceMap:!1})},847:function(t,e,n){var content=n(1320);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("4e17b385",content,!0,{sourceMap:!1})},89:function(t,e,n){"use strict";n(22),n(14);var r=n(25),o=n(64),l=n(75),c=n(74),m=n(200),d=n(171),f=n(121),v=n(68),h=n(69),y=n(97),x=n(161),k=n(116),_=n(98),w=n(276),D=n(18),C=n(7),S=n.n(C),T={created:function(){console.log("MODAL",this)},props:{options:{type:Object},dateFilterPresets:{type:Array,default:function(){var t=[],e=new Date;return t.push({title:"Today",startDate:e,endDate:e}),t.push({title:"Past 7 Days",startDate:S()().subtract(7,"days").toDate(),endDate:e}),t.push({title:"Next 7 Days",startDate:e,endDate:S()().add(7,"days").toDate()}),t.push({title:"Past 4 Weeks",startDate:S()().subtract(4,"weeks").toDate(),endDate:e}),t.push({title:"Next 4 Weeks",startDate:e,endDate:S()().add(4,"weeks").toDate()}),t}},dateFilterDefault:{type:Object,default:function(){new Date;return{startDate:S()().subtract(4,"weeks").toDate(),endDate:S()().add(4,"weeks").toDate()}}}},components:{FilterConditionGroup:d.default,FluroTabset:l.a,FluroTab:c.a,FluroDynamicTable:m.a,RealmDotCell:f.a,DateCell:v.a,TitleCell:h.a,StatusCell:y.a,DefinitionCell:x.a,ThumbnailCell:k.a,TypeImageCell:_.a,EventTitleCell:w.a},mixins:[r.a,o.a],data:function(){var t,e,n=["active","draft"];switch(this.$fluro.types.parentType(this.options.type)||this.options.type){case"plan":t=!0,n.push("template");break;case"event":case"checkin":case"attendance":case"ticket":case"post":e=!0,t=!0}e&&(n.push("archived"),console.log("Include archived",n));var r=this.options.filter;r&&!r.default||(console.log("CREATE INITIAL FILTER"),r={operator:"and",filters:[{operator:"and",filters:[{key:"status",comparator:"in",values:n}]}]});var o=JSON.parse(JSON.stringify(r)),l=this.dateFilterPresets,c=this.dateFilterDefault;return{sorted:[],rows:[],search:"",searchFocussed:!1,showFilters:!(!this.$vuetify.breakpoint.smAndUp||!this.options.filter),defaultFilter:o,filterConfig:o,filterConfigCopy:o,selector:this.options.selector,dateFilterEnabled:t,datePeriodOptions:l,includeArchivedByDefault:e,rawStartDate:c.startDate,rawEndDate:c.endDate}},methods:{applyFilters:function(){this.filterConfigCopy=JSON.parse(JSON.stringify(this.filterConfig))},resetFilters:function(){this.filterConfig=JSON.parse(JSON.stringify(this.defaultFilter)),this.applyFilters()},stringDate:function(t){return this.$fluro.date.formatDate(t,"YYYY-MM-DD")},selectDatePeriod:function(t){this.startDate=new Date(t.startDate),this.endDate=new Date(t.endDate)},rowClicked:function(t){this.selectionManager.toggle(t)},isSelected:function(t){return this.selectionManager.isSelected(t)},toggleRealm:function(t){return this.selectionManager.toggleRealm(t)},resetFilter:function(){this.filterConfig={}},filteredChanged:function(t){this.sorted=t},rowsChanged:function(t){this.rows=t},pageChanged:function(t){this.$router.push({query:Object.assign({},this.$route.query,{page:t})})},sortChanged:function(t){this.$router.replace({query:Object.assign({},this.$route.query,t)})}},computed:{dateFilterVisible:function(){return this.dateFilterEnabled},readableDate:function(){return this.$fluro.date.readableEventDate({startDate:this.startDate,endDate:this.endDate},"day")},readableStartDate:function(){return this.$fluro.date.formatDate(this.startDate)},readableEndDate:function(){return this.$fluro.date.formatDate(this.endDate)},startDate:{get:function(){if(this.dateFilterEnabled)return this.rawStartDate},set:function(t){var e=new Date(t);return this.rawEndDate<e&&(this.rawEndDate=new Date(e)),this.rawStartDate=new Date(t)}},endDate:{get:function(){if(this.dateFilterEnabled)return this.rawEndDate},set:function(t){var e=new Date(t);return this.rawStartDate>e&&(this.rawStartDate=new Date(e)),this.rawEndDate=new Date(t)}},startDateString:{get:function(){return this.stringDate(this.startDate)},set:function(t){return this.startDate=new Date(t)}},endDateString:{get:function(){return this.stringDate(this.endDate)},set:function(t){return this.endDate=new Date(t)}},joins:function(){return this.options.joins},retrieveAllDefinitions:function(){return this.options.allDefinitions||this.selector.allDefinitions},selectionManager:function(){return this.selector},filterChangeString:function(){return D.FilterService.getFilterChangeString(this.filterConfig)},filterDebounce:function(){return this.$vuetify.breakpoint.smAndDown?1500:700},modalTitle:function(){var t=this.selectionManager.selection.length;return t?1==t?"1 ".concat(this.title," selected"):"".concat(t," ").concat(this.plural," selected"):this.options.title?this.options.title:1==this.selector.maximum?"Select ".concat(this.title):"Select ".concat(this.plural)},type:function(){return this.options.type||"node"},parentType:function(){var t=this.$fluro.types.parentType(this.type);return t},title:function(){return this.$fluro.types.readable(this.type,!1)},plural:function(){return this.$fluro.types.readable(this.type,!0)},selection:function(){return this.selectionManager.selection},tree:function(){return this.selectionManager.tree},loading:function(){return this.selectionManager.loading},ids:function(){return this.$fluro.utils.arrayIDs(this.options.items)},multiType:function(){return this.parentType==this.type&&this.retrieveAllDefinitions},columns:function(){var t=[{title:"",shrink:!0,align:"center",key:"realms",renderer:f.a}];switch(this.parentType){case"node":t=t.concat([{title:"",key:"_id",renderer:_.a,shrink:!0},{title:"Title",key:"title",renderer:h.a,additionalFields:["firstLine"]}]);break;case"image":t=t.concat([{title:"Thumbnail",key:"_id",renderer:k.a},{title:"Title",key:"title",renderer:h.a},{title:"Width",key:"width",sortType:"number"},{title:"Height",key:"height",sortType:"number"}]);break;case"video":t=t.concat([{title:"Thumbnail",key:"_id",renderer:k.a},{title:"Title",key:"title",renderer:h.a},{title:"Source",key:"assetType"}]);break;case"academic":t=t.concat([{title:"Title",key:"title",renderer:h.a,additionalFields:["grades"]}]);break;case"interaction":t=t.concat([{title:"Title",key:"title",renderer:h.a,additionalFields:["contacts","primaryEmail"]}]);break;case"event":t=t.concat([{title:"",key:"_id",renderer:_.a,shrink:!0},{title:"Title",key:"title",renderer:w.a,additionalFields:["startDate","endDate","firstLine"]}]);break;case"plan":t=t.concat([{title:"Title",key:"title",renderer:h.a,additionalFields:["event","startDate","endDate"]}]);break;case"family":t=t.concat([{title:"Title",key:"title",renderer:h.a,additionalFields:["firstLine"]},{title:"Address",key:"address.addressLine1"}]);break;case"contact":t=t.concat([{title:"",key:"_id",renderer:_.a,shrink:!0},{title:"Title",key:"title",renderer:h.a,additionalFields:["firstName","preferredName","lastName"]},{title:"Gender",key:"gender"},{title:"Age",key:"age"}]);break;default:t=t.concat([{title:"Title",key:"title",renderer:h.a,additionalFields:["firstLine"]}])}return this.multiType&&(t=t.concat([{title:"Definition",key:"definition",shrink:!0,renderer:x.a}])),t=t.concat([{title:"Status",key:"status",shrink:!0,renderer:y.a},{type:"date",title:"Updated",shrink:!0,key:"updated",renderer:v.a,sortType:"date"},{type:"date",title:"Created",shrink:!0,key:"created",renderer:v.a,sortType:"date"}])}},watch:{type:function(){this.filterConfig=JSON.parse(JSON.stringify(defaultFilters)),this.$router.replace({query:Object.assign({},this.$route.query,{filter:JSON.stringify(this.filterConfig)})})},filterChangeString:function(){this.$router.replace({query:Object.assign({},this.$route.query,{filter:JSON.stringify(this.filterConfig)})})}}},O=(n(1137),n(1)),component=Object(O.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",{staticClass:"content-select-modal"},[t.loading?n("flex-column",[n("v-container",{staticClass:"text-xs-center",attrs:{fluid:""}},[n("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):[n("flex-column-header",{staticClass:"border-bottom"},[n("v-container",{attrs:{fluid:"","pa-2":""}},[n("v-layout",{attrs:{row:"","align-center":""}},[t.$vuetify.breakpoint.smAndUp?[n("v-flex",{attrs:{shrink:""}},[n("h5",[n("fluro-icon",{attrs:{left:"",type:t.type}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.modalTitle)+"\n\t\t\t\t\t\t\t\t")],1)]),t._v(" "),n("v-spacer")]:t._e(),t._v(" "),n("v-flex",[t.showFilters?t._e():[n("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{autofocus:t.$vuetify.breakpoint.smAndUp,placeholder:"Search by keyword"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?n("fluro-icon",{attrs:{icon:"times"}}):n("fluro-icon",{attrs:{icon:"search"}})],1)])]],2),t._v(" "),n("v-spacer"),t._v(" "),t.dateFilterVisible&&!t.showFilters?n("v-flex",{attrs:{shrink:""}},[n("v-menu",{attrs:{fixed:!0,right:!0,"close-on-content-click":!1,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{small:""}},r),[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.readableDate)+"\n\t\t\t\t\t\t\t\t\t\t"),n("fluro-icon",{attrs:{library:"far",icon:"angle-down",right:""}})],1)]}}],null,!1,1705361022)},[t._v(" "),n("v-card",[n("v-layout",[n("v-flex",[n("v-card-text",[n("label",[t._v("")]),t._v(" "),n("v-list",{attrs:{dense:""}},t._l(t.datePeriodOptions,(function(option){return n("v-list-tile",{key:option.value,on:{click:function(e){return t.selectDatePeriod(option)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(option.title)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)],1),t._v(" "),n("v-flex",[n("v-card-text",{staticClass:"text-sm-center"},[n("label",[t._v("From Date")])]),t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.startDateString,callback:function(e){t.startDateString=e},expression:"startDateString"}})],1),t._v(" "),n("v-flex",[n("v-card-text",{staticClass:"text-sm-center"},[n("label",[t._v("To Date")])]),t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.endDateString,callback:function(e){t.endDateString=e},expression:"endDateString"}})],1)],1)],1)],1)],1):t._e(),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"my-0",attrs:{icon:"",small:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[n("fluro-icon",{attrs:{icon:"filter",library:t.showFilters?"fas":"far"}})],1)],1),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"my-0 mr-0",attrs:{small:""},on:{click:function(e){return t.dismiss()}}},[t._v("Back")])],1),t._v(" "),n("v-flex",{attrs:{shrink:""}},[n("v-btn",{staticClass:"my-0 mr-0",attrs:{color:"primary",small:""},on:{click:function(e){return t.close(t.selector.selection)}}},[t._v("Done")])],1)],2)],1)],1),t._v(" "),n("flex-column",[n("v-layout",{attrs:{"fill-height":""}},[n("flex-column",{staticStyle:{"min-height":"50vh"}},[n("fluro-dynamic-table",{attrs:{startDate:t.startDate,endDate:t.endDate,includeArchivedByDefault:t.includeArchivedByDefault,additionalKeys:t.joins,queryString:!1,"enable-actions":!1,allDefinitions:t.retrieveAllDefinitions,searchInheritable:t.options.searchInheritable,"filter-config":t.filterConfigCopy,"lock-filter":t.options.lockFilter,"selection-controller":t.selector,clicked:t.rowClicked,search:t.search,"data-type":t.type,columns:t.columns},on:{raw:t.rowsChanged,filtered:t.filteredChanged,page:t.pageChanged,sort:t.sortChanged}})],1),t._v(" "),n("flex-column",{directives:[{name:"show",rawName:"v-show",value:t.showFilters,expression:"showFilters"}],staticClass:"filter-sidebar"},[n("flex-column-body",[n("v-container",{attrs:{"pa-2":""}},[n("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Keyword search"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?n("fluro-icon",{attrs:{icon:"times"}}):n("fluro-icon",{attrs:{icon:"search"}})],1)])]),t._v(" "),t.dateFilterVisible?n("v-container",{attrs:{"pa-2":""}},[n("help",{attrs:{title:"Date filters",body:"Filter records by providing a relevant date range",keywords:"Date Range Filter"}}),t._v(" "),n("v-menu",{attrs:{fixed:!0,right:!0,"close-on-content-click":!1,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-input",{staticClass:"no-flex"},[n("v-label",[t._v("Between Dates")]),t._v(" "),n("v-btn",t._g({attrs:{block:""}},r),[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.readableDate)+"\n\t\t\t\t\t\t\t\t\t\t\t\t"),n("fluro-icon",{attrs:{library:"far",icon:"angle-down",right:""}})],1)],1)]}}],null,!1,3303282133)},[t._v(" "),n("v-card",[n("v-layout",[n("v-flex",[n("v-card-text",[n("label",[t._v("")]),t._v(" "),n("v-list",{attrs:{dense:""}},t._l(t.datePeriodOptions,(function(option){return n("v-list-tile",{key:option.value,on:{click:function(e){return t.selectDatePeriod(option)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(option.title)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)],1),t._v(" "),n("v-flex",[n("v-card-text",{staticClass:"text-sm-center"},[n("label",[t._v("From Date")])]),t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.startDateString,callback:function(e){t.startDateString=e},expression:"startDateString"}})],1),t._v(" "),n("v-flex",[n("v-card-text",{staticClass:"text-sm-center"},[n("label",[t._v("To Date")])]),t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.endDateString,callback:function(e){t.endDateString=e},expression:"endDateString"}})],1)],1)],1)],1)],1):t._e(),t._v(" "),n("v-container",{attrs:{"pa-2":""}},[n("filter-condition-group",{attrs:{rows:t.rows,mini:!0,type:t.type,debounce:t.filterDebounce},model:{value:t.filterConfig,callback:function(e){t.filterConfig=e},expression:"filterConfig"}})],1)],1),t._v(" "),n("flex-column-footer",{staticClass:"border-top"},[n("v-container",{attrs:{"py-1":"","px-2":""}},[n("v-layout",[n("v-flex",[n("v-btn",{attrs:{block:"",small:""},on:{click:function(e){return t.resetFilters()}}},[n("fluro-icon",{staticClass:"mr-2",attrs:{icon:"redo-alt"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t\t\t\t\t")],1)],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-flex",{staticClass:"mr-2"}),t._v(" "),n("v-flex",[n("v-btn",{attrs:{block:"",small:"",color:"primary"},on:{click:function(e){return t.applyFilters()}}},[n("fluro-icon",{staticClass:"mr-2",attrs:{icon:"search"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tApply filters\n\t\t\t\t\t\t\t\t\t\t")],1)],1)],1)],1)],1)],1)],1)],1)]],2)}),[],!1,null,null,null);e.a=component.exports},943:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var f=function(t){Object(l.a)(n,t);var e=d(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"asset"}},{key:"schema",get:function(){return{inline:!0,attrs:{item:{}},group:"inline",draggable:!0,parseDOM:[{tag:"a[asset]",getAttrs:function(t){return{item:t.getAttribute("item")}}}],toDOM:function(t){return["a",t.attrs]}}}},{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,r){var o=n.selection,l=o.$cursor?o.$cursor.pos:o.$to.pos,c=e.create(t);r(n.tr.insert(l,c))}}}},{key:"view",get:function(){return{props:["node","updateAttrs","view"],computed:{text:function(){return"Link text"},url:{get:function(){return this.$fluro.asset.downloadUrl(this.node.attrs.item)},set:function(t){this.updateAttrs({url:t})}}},template:'<a :href="url">{{text}}</a>'}}}]),n}(n(15).h)},944:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=n(15),f=n(8);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(t){Object(l.a)(n,t);var e=v(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"image"}},{key:"schema",get:function(){return{inline:!0,attrs:{item:{},width:{default:"100%"},height:{default:"100%"}},group:"inline",draggable:!0,parseDOM:[{tag:"fluro-image[item][width][height]",getAttrs:function(t){return{item:t.getAttribute("item"),width:t.getAttribute("width"),height:t.getAttribute("height")}}}],toDOM:function(t){return["fluro-image",t.attrs]}}}},{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,r){var o=n.selection,l=o.$cursor?o.$cursor.pos:o.$to.pos,c=e.create(t);"image"==_.get(o,"node.type.name")?r(n.tr.replaceSelectionWith(c)):r(n.tr.insert(l,c))}}}},{key:"view",get:function(){return{props:["node","updateAttrs","view","getPos","editable"],methods:{clicked:function(){var t=this.view.state,tr=t.tr,e=f.c.create(t.doc,this.getPos());tr=tr.setSelection(e),this.view.dispatch(tr)},onChange:function(t){console.log("OnChange",t)}},computed:{item:{get:function(){return this.$fluro.asset.imageUrl(this.node.attrs.item)},set:function(t){this.updateAttrs({item:t})}},width:{get:function(){return this.node.attrs.width},set:function(t){this.updateAttrs({width:t})}},height:{get:function(){return this.node.attrs.height},set:function(t){this.updateAttrs({height:t})}}},template:"<div @click.stop.prevent=\"clicked()\" class=\"fluro-image-preview\" ><img :src='item' :width='width' :height='height'/></div>"}}}]),n}(d.h)},945:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=n(15),f=n(8);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(t){Object(l.a)(n,t);var e=v(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"video"}},{key:"schema",get:function(){return{inline:!0,attrs:{item:{},width:{default:"100%"}},group:"inline",draggable:!0,parseDOM:[{tag:"fluro-video[item][width]",getAttrs:function(t){return{item:t.getAttribute("item"),width:t.getAttribute("width")}}}],toDOM:function(t){return["fluro-video",t.attrs]}}}},{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,r){var o=n.selection,l=o.$cursor?o.$cursor.pos:o.$to.pos,c=e.create(t);"video"==_.get(o,"node.type.name")?r(n.tr.replaceSelectionWith(c)):r(n.tr.insert(l,c))}}}},{key:"view",get:function(){return{props:["node","updateAttrs","view","getPos","editable"],methods:{clicked:function(){var t=this.view.state,tr=t.tr,e=f.c.create(t.doc,this.getPos());tr=tr.setSelection(e),this.view.dispatch(tr)}},computed:{item:{get:function(){return this.$fluro.asset.posterUrl(this.node.attrs.item)},set:function(t){this.updateAttrs({item:t})}},width:{get:function(){return this.node.attrs.width},set:function(t){this.updateAttrs({width:t})}}},template:"<div class=\"fluro-video-preview\" @click.stop.prevent=\"clicked()\"><img :src='item' :width='width' height='auto'/></div>"}}}]),n}(d.h)},946:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var f=function(t){Object(l.a)(n,t);var e=d(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"token"}},{key:"schema",get:function(){return{attrs:{},inline:!0,selectable:!1,content:"inline*",draggable:!1,isText:!0,toDOM:function(t){return t.attrs}}}},{key:"commands",value:function(t){t.type,t.schema;return function(t){return function(e,n){var r=e.selection.$from.pos.pos;n(e.tr.insertText("{{".concat(t,"}}"),r))}}}}]),n}(n(15).h)},947:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=n(13);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(t){Object(l.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"alignment"}},{key:"schema",get:function(){return{attrs:{textAlign:{default:"left"}},parseDOM:[{style:"text-align",getAttrs:function(t){return{textAlign:t}}}],toDOM:function(mark){return["span",{style:"text-align: ".concat(mark.attrs.textAlign,";display: block")},0]}}}},{key:"commands",value:function(t){var e=t.type;return function(t){return Object(d.t)(e,t)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(d.e)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}}]),n}(n(15).g)},948:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=n(15),f=n(13);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(t){Object(l.a)(n,t);var e=v(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"typography"}},{key:"defaultOptions",get:function(){return{levels:[{title:"Muted",level:"text-muted"},{title:"Normal",level:""},{title:"Extra Small",level:"font-xs"},{title:"Small",level:"font-sm"},{title:"Large",level:"font-lg"},{title:"Extra Large",level:"font-xl"}]}}},{key:"schema",get:function(){return{attrs:{level:{default:""}},parseDOM:[{tag:"span",getAttrs:function(t){return{level:t.classList[1]}}}],toDOM:function(mark){return["span",{class:"".concat(mark.attrs.level)},0]}}}},{key:"commands",value:function(t){var e=t.type;return function(t){return Object(f.r)(e,t)}}}]),n}(d.g)},949:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));n(86),n(60),n(42),n(22),n(76),n(84);var r=n(11),o=n(38),l=n(39),c=n(45),m=n(46),d=n(30);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}var y=function(t){Object(c.a)(n,t);var e=h(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"schema",get:function(){return{attrs:{href:{default:null},target:{default:null},class:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),target:t.getAttribute("target"),class:t.getAttribute("class")}}}],toDOM:function(t){return["a",v({},t.attrs),0]}}}}]),n}(n(36).l)},962:function(t,e,n){"use strict";var r={created:function(){var t=this,e="https://js.squareup.com/v2/paymentform";t.sandboxed&&(e="https://js.squareupsandbox.com/v2/paymentform"),t.$fluro.utils.injectScript(e).then((function(){console.log("Square has been included on page"),t.scriptReady=!0,t.init()}))},mounted:function(){this.uiReady=!0,this.init()},mixins:[n(25).a],computed:{sandboxed:function(){return this.debugMode||this.options.sandbox||_.get(this.actualPaymentIntegration,"publicDetails.sandbox")},webMode:function(){return this.options.webMode},confirmText:function(){var t=this;return"Pay ".concat(t.$fluro.utils.formatCurrency(t.amount,t.currency))},cancelText:function(){return"Back"},formattedAmount:function(){return this.$fluro.utils.formatCurrency(this.amount,this.currency)},amount:function(){return parseInt(this.options.amount)},currency:function(){return _.get(this.actualPaymentIntegration,"publicDetails.currency")},debugMode:function(){return this.options.debugMode},actualPaymentIntegration:function(){return this.options.integration}},methods:{done:function(){this.onGetCardNonce()},onGetCardNonce:function(t){console.log("Get card nonce",t),this.paymentForm.requestCardNonce(),this.processing=!0},init:function(){var t=this;if(console.log("attempt init()"),t.scriptReady)if(t.uiReady)if(t.initialized)console.log("halt - already initialized");else{console.log("Initialize NOW!"),t.initialized=!0;var e,n,r=_.get(t.actualPaymentIntegration,"publicDetails.productionApplicationID"),o=_.get(t.actualPaymentIntegration,"publicDetails.sandboxApplicationID"),l=_.get(t.actualPaymentIntegration,"publicDetails.productionLocationID"),c=_.get(t.actualPaymentIntegration,"publicDetails.sandboxLocationID"),m=_.get(t.actualPaymentIntegration,"publicDetails.sandbox");if(t.debugMode||m?(e=o,n=c,console.log("debug mode use sandbox key")):(e=r,n=l),!e&&!n)return done(null,{error:{message:t.debugMode?"Integration Setup Error: No test keys found.":"Integration Setup Error: No live keys found."}});t.paymentForm=new SqPaymentForm({applicationId:e,locationId:n,inputClass:"sq-input",autoBuild:!1,postalCode:!1,cardNumber:{elementId:"sq-card-number",placeholder:"Card Number"},cvv:{elementId:"sq-cvv",placeholder:"CVV"},expirationDate:{elementId:"sq-expiration-date",placeholder:"MM/YY"},callbacks:{methodsSupported:function(t,e){console.log("Methods Supported!",t)},paymentFormLoaded:function(){t.rendered=!0},cardNonceResponseReceived:function(e,n,r){if(e)return console.log("Errors NOW DISMISS",e),t.dismiss(e);var o=t.$fluro.utils.guid();t.close({nonce:n,cardData:r,idempotencyKey:o})}}}),SqPaymentForm.isSupportedBrowser()?(console.log("Square is supported in this browser!"),t.paymentForm.build()):t.dismiss([{message:"Square payments are not supported in this browser"}])}else console.log("halt - ui not ready");else console.log("halt - script not ready")}},data:function(){return{rendered:!1,paymentForm:null,processing:!1,initialized:!1,scriptReady:!1,uiReady:!1}}},o=(n(1194),n(1196),n(1)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",{staticClass:"fluro-prompt-dialog"},[n("flex-column-header",{staticClass:"border-bottom text-center"}),t._v(" "),n("form",{staticStyle:{flex:"1",display:"flex"},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.done.apply(null,arguments)}}},[n("flex-column-body",[n("v-container",{attrs:{"pa-2":"","grid-list-xl":""}},[n("constrain",{attrs:{xs:""}},[n("div",{staticClass:"payment-logo"},[n("svg",{staticStyle:{"enable-background":"new 0 0 652 652"},attrs:{version:"1.1",id:"layer",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 652 652","xml:space":"preserve"}},[n("g",[n("path",{staticClass:"st0",attrs:{d:"M148.7,252.5H51c-13.4,0-24.4,11-24.4,24.4v97.6c0,13.4,11,24.4,24.4,24.4h97.6c13.4,0,24.4-11,24.4-24.4\n\tv-97.6C173.1,263.4,162.1,252.5,148.7,252.5L148.7,252.5z M146.4,364.5c0,4.3-3.5,7.7-7.8,7.7H61c-4.3,0-7.8-3.5-7.8-7.7v-77.7\n\tc0-4.3,3.5-7.8,7.8-7.8h77.7c4.3,0,7.8,3.5,7.8,7.8L146.4,364.5L146.4,364.5z M119.8,341.2c0,2.4-2,4.4-4.4,4.4H84.3\n\tc-2.4,0-4.4-2-4.4-4.4v-31.1c0-2.4,2-4.4,4.4-4.4h31.1c2.4,0,4.4,2,4.4,4.4C119.8,310.1,119.8,341.2,119.8,341.2z M240.8,373.7\n\tc-8.7,0-17-3.3-22.9-9.2c-5.2-5.2-8.2-12-8.2-19.2h8.8c0,4.8,2,9.4,5.6,12.9c4.2,4.2,10.3,6.6,16.7,6.6h0.1\n\tc12.3,0,22.2-8.6,22.2-19.1c0-7.9-4.4-14.2-25.7-19.1c-8.7-2-14.5-4.7-18.4-8.4c-4.1-4-6.2-9.4-6.2-16.3c0-13.8,12.3-25,27.5-25\n\tc7.3,0,14.1,2.5,19.3,7c5.3,4.7,8.3,11,8.3,17.8h-8.8c0-8.9-8.4-16.1-18.8-16.1c-10.2,0-18.7,7.4-18.7,16.2c0,8,2.8,12.7,17.8,16.2\n\tc16,3.7,32.4,9.9,32.5,27.7c0,7.6-3.3,14.6-9.2,19.9C256.9,370.9,249.1,373.7,240.8,373.7L240.8,373.7z M344.4,398.7v-38.5h-0.2\n\tc-5.7,8.7-15.5,13.2-25.9,13.2c-19.9,0-35.7-14.9-35.7-35c0-19.9,16.2-34.7,35.7-34.7c10.3,0,20.2,4.5,25.9,13.4h0.2v-11.7h8.5\n\tv93.3H344.4L344.4,398.7z M318.3,311.4c-15.8,0-27.2,11.8-27.2,27.4c0,15.5,11.6,27,27.2,27c15.1,0,26.6-12.3,26.6-27.1\n\tC344.9,323.9,333.3,311.4,318.3,311.4z M501,371.9v-11.7h-0.2c-5.8,8.7-15.5,13.2-25.9,13.2c-19.9,0-35.7-14.9-35.7-35\n\tc0-19.9,16.1-34.7,35.7-34.7c10.4,0,20.2,4.4,25.9,13.4h0.2v-11.7h8.5v66.4H501L501,371.9z M474.8,311.4\n\tc-15.8,0-27.2,11.8-27.2,27.4c0,15.5,11.7,27,27.2,27c15.1,0,26.6-12.3,26.6-27.1C501.4,323.9,489.9,311.4,474.8,311.4z M534.9,333\n\tv38.9h-8.5v-66.4h8.5v9.6h0.2c3.7-8.5,10.1-10.7,18.7-11.3v9C542.2,313.7,534.9,321.1,534.9,333 M626.5,341.8H566\n\tc0.6,13.1,12.8,24,25.8,24c10.2,0,20.2-5.8,23.8-15.7h9c-4.8,13.8-18,23.3-32.7,23.3c-19.2,0-34.6-15.7-34.6-34.7\n\tc0-18.9,15.4-35,34.5-35c19.4,0,34.9,16.4,34.9,35.6C626.6,340.2,626.5,340.9,626.5,341.8 M591.9,311.4c-13.2,0-23.8,9.7-25.9,22.7\n\th51.9C615.7,321.1,605.3,311.4,591.9,311.4 M418.8,372v-10.4h-0.2c-3.9,8.2-12.6,12-21.4,12c-8.7,0-17.4-3-22.9-10\n\tc-4.8-6-5.8-14-5.8-21.5v-36.9h8.5V342c0,13.8,5,23.9,20.3,23.9c5.6,0,10-1.5,14.2-5.4c5.9-5.6,7-12.2,7-20v-35.3h8.5V372\n\tL418.8,372L418.8,372z"}})])])]),t._v(" "),t.rendered?t._e():n("div",{staticClass:"text-center"},[t._v("Initializing")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.rendered,expression:"rendered"}]},[n("div",{attrs:{id:"sq-card-number"}}),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",[n("div",{attrs:{id:"sq-expiration-date"}})]),t._v(" "),n("v-flex",[n("div",{attrs:{id:"sq-cvv"}})])],1)],1)])],1)],1),t._v(" "),t.rendered?n("flex-column-footer",{staticClass:"border-top"},[n("v-container",{attrs:{"pa-2":""}},[n("constrain",{attrs:{xs:""}},[n("v-layout",[t.webMode?[n("fluro-button",{attrs:{tag:"a",block:""},on:{click:function(e){return t.dismiss()}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.cancelText)+"\n\t\t\t\t\t\t\t\t")])]:[n("v-btn",{attrs:{block:""},on:{click:function(e){return t.dismiss()}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.cancelText)+"\n\t\t\t\t\t\t\t")])],t._v(" "),n("v-spacer"),t._v(" "),t.webMode?[n("fluro-button",{attrs:{tag:"button",loading:t.processing,block:"",type:"submit",color:"primary"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.confirmText)+"\n\t\t\t\t\t\t\t\t")])]:[n("v-btn",{attrs:{block:"",type:"submit",loading:t.processing,color:"primary"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.confirmText)+"\n\t\t\t\t\t\t\t\t")])]],2)],1)],1)],1):t._e()],1)],1)}),[],!1,null,"346cf334",null);e.a=component.exports},964:function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));n(86);var r=n(38),o=n(39),l=n(45),c=n(46),m=n(30),d=(n(28),n(23),n(15)),f=n(13),v=(n(60),n(42),n(76),n(84),n(11)),h=n(29),y=(n(65),n(103),n(24),n(22),n(51),n(48),n(12),n(56),n(57),n(8)),x=n(33);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){var e=t.matcher,n=void 0===e?{char:"@",allowSpaces:!1,startOfLine:!1}:e,r=t.appendText,o=void 0===r?null:r,l=t.suggestionClass,c=void 0===l?"suggestion":l,m=t.command,d=void 0===m?function(){return!1}:m,_=t.items,w=void 0===_?[]:_,D=t.onEnter,C=void 0===D?function(){return!1}:D,S=t.onChange,T=void 0===S?function(){return!1}:S,O=t.onExit,N=void 0===O?function(){return!1}:O,F=t.onKeyDown,$=void 0===F?function(){return!1}:F,M=t.onFilter,P=void 0===M?function(t,e){return e?t.filter((function(t){return JSON.stringify(t).toLowerCase().includes(e.toLowerCase())})):t}:M;return new y.d({key:new y.e("suggestions"),view:function(){var t,e=this;return{update:(t=Object(h.a)(regeneratorRuntime.mark((function t(view,n){var r,l,c,m,v,h,y,x,k,_,D,S,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.key.getState(n),l=e.key.getState(view.state),c=r.active&&l.active&&r.range.from!==l.range.from,m=!r.active&&l.active,v=r.active&&!l.active,h=!m&&!v&&r.query!==l.query,x=h&&!c,k=v||c,(y=m||c)||x||k){t.next=11;break}return t.abrupt("return");case 11:if(_=k?r:l,D=document.querySelector('[data-decoration-id="'.concat(_.decorationId,'"]')),S=D?{getBoundingClientRect:function(){return D.getBoundingClientRect()},clientWidth:D.clientWidth,clientHeight:D.clientHeight}:null,t.t0=view,t.t1=_.range,t.t2=_.query,t.t3=_.text,t.t4=D,t.t5=S,!x&&!y){t.next=36;break}if(t.t7=P,!Array.isArray(w)){t.next=26;break}t.t8=w,t.next=29;break;case 26:return t.next=28,w();case 28:t.t8=t.sent;case 29:return t.t9=t.t8,t.t10=_.query,t.next=33,(0,t.t7)(t.t9,t.t10);case 33:t.t6=t.sent,t.next=37;break;case 36:t.t6=[];case 37:t.t11=t.t6,t.t12=function(t){var e=t.range,n=t.attrs;d({range:e,attrs:n,schema:view.state.schema})(view.state,view.dispatch,view),o&&Object(f.c)(o)(view.state,view.dispatch,view)},O={view:t.t0,range:t.t1,query:t.t2,text:t.t3,decorationNode:t.t4,virtualNode:t.t5,items:t.t11,command:t.t12},k&&N(O),x&&T(O),y&&C(O);case 43:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}},state:{init:function(){return{active:!1,range:{},query:null,text:null}},apply:function(tr,t){var e,r,o,l,c,m,d,f=tr.selection,h=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(v.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t);if(f.from===f.to){(f.from<t.range.from||f.from>t.range.to)&&(h.active=!1);var y=f.$from,x=(r=(e=n).char,o=void 0===r?"@":r,l=e.allowSpaces,c=void 0!==l&&l,m=e.startOfLine,d=void 0!==m&&m,function(t){if(t.depth<=0)return!1;for(var e,n="\\".concat(o),r=new RegExp("\\s".concat(n,"$")),l=d?"^":"",m=c?new RegExp("".concat(l).concat(n,".*?(?=\\s").concat(n,"|$)"),"gm"):new RegExp("".concat(l,"(?:^)?").concat(n,"[^\\s").concat(n,"]*"),"gm"),f=t.before(),v=t.end(),text=t.doc.textBetween(f,v,"\0","\0"),h=m.exec(text);null!==h;){var y=h.input.slice(Math.max(0,h.index-1),h.index);if(/^[\s\0]?$/.test(y)){var x=h.index+t.start(),k=x+h[0].length;c&&r.test(text.slice(k-1,k+1))&&(h[0]+=" ",k+=1),x<t.pos&&k>=t.pos&&(e={range:{from:x,to:k},query:h[0].slice(o.length),text:h[0]})}h=m.exec(text)}return e})(y),_=(Math.random()+1).toString(36).substr(2,5);x?(h.active=!0,h.decorationId=t.decorationId?t.decorationId:_,h.range=x.range,h.query=x.query,h.text=x.text):h.active=!1}else h.active=!1;return h.active||(h.decorationId=null,h.range={},h.query=null,h.text=null),h}},props:{handleKeyDown:function(view,t){var e=this.getState(view.state),n=e.active,r=e.range;return!!n&&$({view:view,event:t,range:r})},decorations:function(t){var e=this.getState(t),n=e.active,r=e.range,o=e.decorationId;return n?x.b.create(t.doc,[x.a.inline(r.from,r.to,{nodeName:"span",class:c,"data-decoration-id":o})]):null}}})}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var D=function(t){Object(l.a)(n,t);var e=w(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"mention"}},{key:"defaultOptions",get:function(){return{matcher:{char:"@",allowSpaces:!1,startOfLine:!1},mentionClass:"mention",suggestionClass:"mention-suggestion"}}},{key:"schema",get:function(){var t=this;return{attrs:{id:{},label:{}},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:function(e){return["mention",{class:t.options.mentionClass,"data-mention-id":e.attrs.id},"".concat(e.attrs.label)]},parseDOM:[{tag:"mention[data-mention-id]",getAttrs:function(e){return{id:e.getAttribute("data-mention-id"),label:e.innerText.split(t.options.matcher.char).join("")}}}]}}},{key:"commands",value:function(t){var e=this,n=t.schema;return function(t){return Object(f.j)(null,n.nodes[e.name],t)}}},{key:"plugins",get:function(){var t=this;return[_({command:function(e){var n=e.range,r=e.attrs,o=e.schema;return Object(f.j)(n,o.nodes[t.name],r)},appendText:" ",matcher:this.options.matcher,items:this.options.items,onEnter:this.options.onEnter,onChange:this.options.onChange,onExit:this.options.onExit,onKeyDown:this.options.onKeyDown,onFilter:this.options.onFilter,suggestionClass:this.options.suggestionClass})]}}]),n}(d.h)}}]);