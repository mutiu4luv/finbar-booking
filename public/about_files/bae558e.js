(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1551:function(e,t,n){var content=n(1648);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("77d27634",content,!0,{sourceMap:!1})},1647:function(e,t,n){"use strict";n(1551)},1648:function(e,t,n){var r=n(9)(!1);r.push([e.i,'.issues{position:fixed;z-index:99999999;background:rgba(0,0,0,.8);color:#fff;padding:10px;font-weight:700;font-size:18px;font-family:"Courier New",Courier,monospace}',""]),e.exports=r},1849:function(e,t,n){"use strict";n.r(t);var r=n(29),o=(n(65),n(14),n(17),n(28),n(103),n(24),n(51),n(48),n(12),n(55),n(31),n(920)),c=n(0),l=n.n(c),d={components:{},props:{value:{type:String}},computed:{highestPriority:function(){return l.a.chain(this.layers).map("index").max().value()},panelStyle:function(){return{"z-index":99999+this.highestPriority}},id:function(){return"site-".concat(this.value)},layers:function(){var e=this;return l.a.reduce(e.$fluro.app.layers,(function(t,n){return n.drawer==e.value&&t.push(n),t}),[])}},methods:{backdropClick:function(e){this.$fluro.app.removeLayer(e)}}},m=n(1),f=Object(m.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:e.value}},[e.layers.length?n("div",{style:e.panelStyle,attrs:{id:e.id}},e._l(e.layers,(function(t,r){return n("div",{key:r,staticClass:"layer"},[n("div",{staticClass:"layer-bg",on:{click:function(n){return e.backdropClick(t.index)}}}),e._v(" "),n("flex-column",{staticClass:"layer-fg"},[t.options.portal?n("portal-target",{attrs:{slim:!0,name:t.options.portal}}):e._e()],1)],1)})),0):e._e()])}),[],!1,null,null,null).exports,h=n(875),v=n(921),y=n(0);n(186);function _(e,t){e||(e=""),t||(t={});return e.replace(/\{\{(.*?)\}\}/g,(function(e,n){var r=y.chain(n.split("|")).map((function(e){return e.trim()})).compact().value(),o=r.shift(),c=y.get(t,o);return y.each(r,(function(e){var t=y.compact(e.split(new RegExp("\\((.*)\\)"))),n=t.shift(),r=y.chain(t).map((function(e){return e.split(",")})).flatten().compact().map((function(e){var t=e.trim();return"'"!=t[0]&&'"'!=t[1]&&"`"!=t[1]||(t=t.slice(1,t.length)),"'"!=t[t.length-1]&&'"'!=t[t.length-1]&&"`"!=t[t.length-1]||(t=t.slice(0,-1)),t})).compact().value();switch(n){case"pre":c="<pre>".concat(y.isObject(c)?JSON.stringify(c,null,2):c,"</pre>");break;case"timeago":c=moment(c).fromNow();break;case"formatDate":c=controller.renderDate(c,r[0],r[1])}})),c}))}var w={head:function(){var e,t=this,n=t.site,r=t.site.seo||{},o=t.route,c=t.route.seo||{},l=r.title||n.title,d=c.title||o.title,m=c.description||"",f=r.description||"",h=c.image||r.image,v="".concat(t.domain||t.application.domain),w="https://".concat(v).concat(t.$route.fullPath),x=r.icon?t.$fluro.asset.imageUrl(r.icon,600,600):null;c.dynamicImage&&(h=_(c.dynamicImage,t),console.log("PARSE THE SHARE IMAGE",h,c.dynamicImage)),h&&(e=t.$fluro.asset.imageUrl(h,1200,627)),d.includes("{{")&&(d=_(d,t)),f.includes("{{")&&(f=_(f,t)),m.includes("{{")&&(m=_(m,t));var k=m||f,P=y.kebabCase("route ".concat(o.state)),C="".concat(P),link=[{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Material+Icons"}];x&&link.push({rel:"icon",href:x}),t.fontUrl&&t.fontUrl.length&&link.push({rel:"stylesheet",href:t.fontUrl});var meta=[{hid:"description",name:"description",content:k},{hid:"viewport",name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"},{hid:"safarifix",name:"format-detection",content:"telephone=no"},{hid:"og:title",name:"og:title",content:d||l},{hid:"og:url",name:"og:url",content:w}];e&&meta.push({hid:"og:image",name:"og:image",content:e});var output={title:"".concat(d," - ").concat(l),meta:meta,htmlAttrs:{lang:"en"},bodyAttrs:{},style:[{type:"text/css",cssText:this.css}],link:link,__dangerouslyDisableSanitizers:["style"]};return C.length&&(output.htmlAttrs.class=C),"".length&&(output.bodyAttrs.class=""),output},transition:{name:"route"},components:{ComponentLayerPanel:f,ComponentRenderList:o.a,ModalStack:v.a},data:function(){return{mounted:!1}},mounted:function(){console.log("page mounted"),this.mounted=!0},computed:{deviceHasMounted:function(){if(this.mounted)return this.$fluro.app.device&&this.$fluro.app.device.mounted}},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=function(t,n,r){return new Promise((function(o,c){var l=t.getTokens(n,t.cleanURL(r.url)),d=t.loadDynamicProperties(e,l,r.url);Promise.all(d).then((function(t){var c=y.reduce(t,(function(e,t){return t&&(e[t.property]=t.content),e}),{}),d={params:l.params||{},query:e.route.query||{},name:r.state,path:r.url,items:c,title:r.title,href:n,settings:r.settings};return o(d)}))}))},n=!!e.req,!!n){t.next=10;break}if(o=e.store.state.applicationState){t.next=7;break}return t.abrupt("return",Promise.resolve());case 7:return c=new h.a(o.routes),o.route=c.getMatchingRoute(e.route.path),t.abrupt("return",new Promise((function(t,n){r(c,e.route.fullPath,o.route).then((function(n){return e.store.commit("currentPage",n),t(o)}))})));case 10:return t.abrupt("return",new Promise((function(t,n){var o=e.req,c=o.routes,l=new h.a(c),d=l.getMatchingRoute(o.path),output={application:o.application,domain:o.headers.host,site:o.siteData,fontUrl:o.fontUrl,route:d,routes:c,initialUser:o.user,issues:o.issues,cacheDetails:o.cacheDetails,modules:o.siteModules,footerEnabled:!d.settings||!d.settings.hideFooter,headerEnabled:!d.settings||!d.settings.hideHeader};e.store.commit("applicationState",output),r(l,o.originalUrl,d).then((function(n){return e.store.commit("currentPage",n),t(output)}))})));case 11:case"end":return t.stop()}}),t)})))()}},x=(n(1647),Object(m.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{directives:[{name:"show",rawName:"v-show",value:e.deviceHasMounted,expression:"deviceHasMounted"}],attrs:{id:"site"}},[e.cacheDetails?n("pre",{staticStyle:{display:"none"},attrs:{id:"cache-details"}},[e._v("        "+e._s(e.cacheDetails)+"\n    ")]):e._e(),e._v(" "),e.issues?n("div",{staticClass:"issues"},e._l(e.issues,(function(t){return n("div",{staticClass:"issue"},[n("strong",[e._v(e._s(t.type))]),e._v(" "),n("div",{staticStyle:{"font-size":"0.9em"}},[e._v(e._s(t.title)),n("br"),e._v("\n                "+e._s(t.details)),n("br")])])})),0):e._e(),e._v(" "),n("component-render-list",{attrs:{id:"site-page",site:e.site,modules:e.modules,route:e.route,partition:e.route}}),e._v(" "),n("modal-stack"),e._v(" "),n("component-layer-panel",{attrs:{value:"left"}}),e._v(" "),n("component-layer-panel",{attrs:{value:"right"}}),e._v(" "),n("component-layer-panel",{attrs:{value:"modal"}})],1)}),[],!1,null,null,null));t.default=x.exports}}]);