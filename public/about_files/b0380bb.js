(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{193:function(t,e,n){"use strict";n(21),n(85),n(17),n(12),n(22);var o=n(18),r=n(0),c=n.n(r),l=n(939),f=n.n(l);e.a={props:{changeKey:{type:[String,Number]},filterConfig:{type:Object,default:function(){return{operator:"and",filters:[]}}},lockFilter:{type:Object},allDefinitions:{type:Boolean,default:!1},searchInheritable:{type:Boolean,default:!1},includeArchivedByDefault:{type:Boolean},search:{type:String},startDate:{type:Date},endDate:{type:Date},dataType:{type:String},defaultSort:{type:String},defaultSortType:{type:String},defaultSortDirection:{type:String},initSort:{type:Object,default:function(){return{key:this.defaultSort,direction:this.defaultSortDirection,type:this.defaultSortType}}},literal:{type:Array}},data:function(){return{inflightRequest:null,reloadChangeKey:0,cacheKey:null,all:[],rows:[],groupingColumn:null,unwindColumns:[],debouncedSearch:this.search,loadingItems:!0,sort:JSON.parse(JSON.stringify(this.initSort)),isFirstLoad:!0,loadedIterationCount:0}},watch:{literal:function(t){t&&this.reload()},searchInheritable:function(){this.reload()},changeKey:function(){this.reload()},search:c.a.debounce((function(t){this.debouncedSearch=t}),500),unwindColumns:"debouncedReload",reloadRequired:{immediate:!0,handler:"debouncedReload"}},methods:{unwind:function(t,e){return t&&t.length&&e&&e.length?c.a.chain(t).map((function(t){var n=c.a.get(t,e);return n&&c.a.isArray(n)&&n.length?c.a.chain(n).map((function(n,i){var o=JSON.parse(JSON.stringify(t));return o.unwindKey=i,c.a.set(o,e,n),o})).value():t})).flattenDeep().compact().value():t},updateCacheKey:function(){this.cacheKey=this.$fluro.global.CACHE_KEY},debouncedReload:c.a.debounce((function(){this.reload()}),500),reload:function(){var t=this,e=this.isFirstLoad;if(t.inflightRequest&&(console.log("Cancel inflight request"),t.inflightRequest.cancel("Operation canceled by the user.")),t.loadingItems=!0,t.literal)return t.loadingItems=!1,t.all=t.literal,t.$emit("raw",t.all),t.rows=t.all,t.$emit("filtered",t.rows),t.setPage&&t.setPage(1),t.loadingItems=!1,void t.reloadChangeKey++;var n=t.sort,filter=JSON.parse(JSON.stringify(t.filterConfig));this.lockFilter&&("and"==filter.operator?filter.filters.push(this.lockFilter):filter=this.lockFilter.filters.push(filter));var o=c.a.map(t.unwindColumns,(function(t){return t.key})),r={sort:n,filter:filter,search:t.debouncedSearch,includeArchived:t.includeArchived,allDefinitions:t.allDefinitions,searchInheritable:t.searchInheritable,includeUnmatched:!0,groupingColumn:t.groupingColumn?t.groupingColumn.key:void 0,unwindColumns:o&&o.length?o:void 0};e&&(this.isFirstLoad=!1,r.limit=this.pageSize),t.select&&(r.select=t.select);var l=t.joins||[];o&&o.length&&(l=l.concat(o)),l&&l.length&&(r.joins=l),t.populateAll&&(r.populateAll=t.populateAll);var d=t.calendarStartDate||t.startDate||(this.lockFilter?this.lockFilter.startDate:null);d&&((d=new Date(d)).setHours(0,0,0,0),r.startDate=d);var h=t.calendarEndDate||t.endDate||(this.lockFilter?this.lockFilter.endDate:null);h&&((h=new Date(h)).setHours(23,59,59,999),r.endDate=h),r.timezone=t.$fluro.date.defaultTimezone;var m=t.$fluro.api.CancelToken.source();return t.inflightRequest=m,t.loadingItems=!0,t.$fluro.api.post("/content/".concat(t.dataType,"/filter"),r,{cancelToken:m.token}).then((function(e){var n=e.data;t.all=n,t.$emit("raw",t.all),t.rows=c.a.filter(n,{_matched:!0}),t.$emit("filtered",t.rows),t.setPage&&t.setPage(1),t.loadingItems=!1,t.reloadChangeKey++})).catch((function(e){f.a.isCancel(e)&&t.inflightRequest==m&&(t.loadingItems=!1),t.rows=[],t.$emit("filtered",t.rows),t.all=[],t.$emit("raw",t.all),t.setPage&&t.setPage(1),t.reloadChangeKey++,t.$fluro.api.axios.isCancel(e)})).finally((function(){t.loadedIterationCount+=1,e&&setTimeout(t.reload,1e3)}))}},computed:{includeArchived:function(){return this.includeArchivedByDefault},reloadRequired:function(){return"".concat(this.cacheKey,"-").concat(this.searchInheritable,"-").concat(this.dataType,"-").concat(this.joins,"-").concat(this.filterCheckString," ").concat(this.dateWatchString," ").concat(this.sort.sortKey," ").concat(this.sort.sortDirection," ").concat(this.sort.sortType," ").concat(this.groupingColumn?this.groupingColumn.key:""," ").concat(this.unwindColumns&&this.unwindColumns.length?c.a.map(this.unwindColumns,"key").join("."):"","  ").concat(this.debouncedSearch)},activeFilters:function(){return o.FilterService.activeFilters(this.filterConfig)},activeFilterRows:function(){return c.a.filter(this.activeFilters,(function(t){return t.comparator&&t.comparator.length}))},activeFilterKeys:function(){return o.FilterService.activeFilterKeys(this.filterConfig)},activeFilterValues:function(){return o.FilterService.activeFilterValues(this.filterConfig)},activeFilterComparators:function(){return o.FilterService.activeFilterComparators(this.filterConfig)},activeFilterOperators:function(){return o.FilterService.activeFilterComparators(this.filterConfig)},filterCheckString:function(){return o.FilterService.getFilterChangeString(this.filterConfig)},dateWatchString:function(){var t=this.calendarStartDate||this.startDate;if(t){var e=this.calendarEndDate||this.endDate;if(e)return(t=new Date(t)).setHours(0,0,0,0),(e=new Date(e)).setHours(0,0,0,0),"".concat(t.getTime()," ").concat(e.getTime())}}},created:function(){this.$fluro.addEventListener("cache.reset",this.updateCacheKey)},beforeDestroy:function(){this.$fluro.removeEventListener("cache.reset",this.updateCacheKey)}}},20:function(t,e,n){"use strict";n.d(e,"j",(function(){return o.a})),n.d(e,"t",(function(){return f.a})),n.d(e,"l",(function(){return c.a})),n.d(e,"L",(function(){return l.a})),n.d(e,"i",(function(){return r.a})),n.d(e,"w",(function(){return d.a})),n.d(e,"g",(function(){return h.a})),n.d(e,"f",(function(){return m.a})),n.d(e,"P",(function(){return v.a})),n.d(e,"Q",(function(){return y.a})),n.d(e,"v",(function(){return S.a})),n.d(e,"N",(function(){return C.a})),n.d(e,"C",(function(){return P.a})),n.d(e,"D",(function(){return J.a})),n.d(e,"x",(function(){return D.a})),n.d(e,"G",(function(){return $.a})),n.d(e,"m",(function(){return F.a})),n.d(e,"p",(function(){return I.a})),n.d(e,"q",(function(){return N.default})),n.d(e,"r",(function(){return K.default})),n.d(e,"y",(function(){return T.a})),n.d(e,"s",(function(){return O.a})),n.d(e,"I",(function(){return x.a})),n.d(e,"H",(function(){return M.a})),n.d(e,"O",(function(){return R.a})),n.d(e,"M",(function(){return j.a})),n.d(e,"n",(function(){return B.default})),n.d(e,"o",(function(){return L.default})),n.d(e,"E",(function(){return H.a})),n.d(e,"h",(function(){return W.a})),n.d(e,"u",(function(){return _.a})),n.d(e,"F",(function(){return z.a})),n.d(e,"J",(function(){return V.a})),n.d(e,"K",(function(){return U.a})),n.d(e,"z",(function(){return G.a})),n.d(e,"A",(function(){return Q.a})),n.d(e,"B",(function(){return Y.a})),n.d(e,"a",(function(){return X.a})),n.d(e,"e",(function(){return Z.a})),n.d(e,"d",(function(){return tt.a})),n.d(e,"b",(function(){return et.a})),n.d(e,"c",(function(){return nt.a})),n.d(e,"k",(function(){return ct.a}));n(12),n(59),n(102);var o=n(890),r=n(136),c=(n(70),n(891)),l=n(892),f=n(250),d=n(25),h=n(113),m=(n(285),n(283),n(137),n(206),n(893),n(251)),v=n(252),y=n(253),S=n(894),C=(n(87),n(278),n(888),n(101)),w=(n(139),n(138),n(134),n(292),n(168),n(200),n(161),n(69),n(98),n(895),n(164),n(896),n(97),n(68),n(897),n(116),n(898),n(163),n(121),n(899),n(201),n(140),n(202),n(203),n(204),n(900),n(901),n(118),n(902),n(903),n(290),n(293),n(904),n(294),n(295),n(296),n(297),n(905),n(906),n(907),n(908),n(248)),D=(n(207),n(208)),$=n(254),F=n(255),k=n(256),I=(n(192),n(889),n(280),n(171),n(205),n(909)),N=n(91),K=n(162),T=(n(291),n(257)),O=(n(910),n(258)),x=n(160),A=n(259),E=n(122),M=(n(172),n(198),n(199),n(35)),R=n(75),j=n(74),P=n(911),J=n(912),B=(n(286),n(287),n(913),n(197),n(104),n(92),n(89),n(82),n(83),n(135),n(125),n(126),n(132),n(914),n(34)),L=n(50),H=(n(196),n(195),n(288),n(915)),W=n(916),_=n(191),z=n(917),V=n(918),U=n(919),G=(n(925),n(926),n(927),n(928)),Q=n(929),Y=n(930),X=n(260),Z=n(261),tt=n(262),et=n(263),nt=n(264),it=(n(127),n(128),n(221),n(222),n(289),n(284),n(64)),ot=(n(193),n(21),n(14),n(56),n(57),n(0)),at=n.n(ot),ct=(n(282),n(88),n(279));n(210),n(209),n(211),n(298),n(299);function lt(t){var e=t.prototype.$fluro;e.global.modals=[],e.modal=function(t){return new Promise((function(n,o){t.modalID=e.global.modals.length,t.resolve=n,t.reject=o,e.global.modals.splice(t.modalID,0,t)}))},e.options=function(t,title,n){return e.modal({component:D.a,options:{title:title,description:n,options:t}})},e.prompt=function(t,title,n,o,r){return r||(r={}),r.title=title,r.fields=t,r.model=n,r.description=o,e.modal({component:$.a,options:r})},e.confirm=function(title,t,n){return n||(n={}),n.title=title,n.description=t,e.modal({component:F.a,options:n})},e.closeModal=function(t){var n=at.a.find(e.global.modals,{modalID:t}),o=at.a.findIndex(e.global.modals,n);e.global.modals.splice(o,1)},t.mixin(it.a),t.component("fluro-icon",O.a),t.component("fluro-realm-dots",x.a),t.component("fluro-realm-tags",A.a),t.component("fluro-realm-bar",M.a),t.component("fluro-status-label",E.a),t.component("fluro-avatar",h.a),t.component("fluro-image",f.a),t.component("fluro-audio",m.a),t.component("fluro-list-item",k.a),t.component("fluro-toggle-item",w.a),t.component("fluro-video",v.a),t.component("fluro-video-thumbnail",y.a),t.component("fluro-page-preloader",T.a),t.component("flex-row",Z.a),t.component("flex-column",X.a),t.component("flex-column-body",et.a),t.component("flex-column-header",tt.a),t.component("flex-column-footer",nt.a)}console.log("fluro-vue-ui 2.8.4"),"undefined"!=typeof window&&window.Vue&&lt(window.Vue)},25:function(t,e,n){"use strict";e.a={props:{options:{type:Object,default:function(){return{}}}},methods:{dismiss:function(t){this.$emit("dismiss",t)},close:function(t){this.$emit("close",t)}}}},282:function(t,e,n){"use strict";n(12),n(22),n(17);var o=n(92),r=n(0),c=n.n(r);e.a={asyncComputed:{postable:{default:[],get:function(){var t=this;return new Promise((function(e,n){return t.$fluro.types.subTypes("post").then((function(n){var o=c.a.filter(n,(function(e){var n=t.$fluro.access.can("submit",e.definitionName,"post"),o=t.$fluro.access.can("create",e.definitionName,"post");return n||o}));e(o)})).catch(n)}))}}},computed:{phoneNumbers:function(){var t=this.model||this.item,e=[];return t.phoneNumbers&&t.phoneNumbers.length&&(e=e.concat(t.phoneNumbers)),t.family&&t.family.phoneNumbers&&t.family.phoneNumbers.length&&(e=e.concat(t.family.phoneNumbers)),e},canPost:function(){return this.postable.length},canEmail:function(){var t=this.model||this.item;return t.emails&&t.emails.length},canCall:function(){return this.phoneNumbers&&this.phoneNumbers.length},canSMS:function(){return this.$fluro.access.can("create","smscorrespondence")||this.$fluro.access.can("sms")}},methods:{addPost:function(){console.log("ADD NEW POST");var t=this,e=t.model||t.item;return t.$fluro.types.subTypes("post").then((function(n){var r=c.a.chain(n).map((function(t){return"archived"==t.status||t.systemOnly?null:{title:"New ".concat(t.title),definition:t}})).compact().value();t.$fluro.options(r).then((function(n){var r={definition:n.definition,items:[e]};t.$fluro.modal({component:o.a,options:r})}))}))},communicate:function(t){var e=this,n=e.model||e.item,o=e.$fluro.utils.getStringID(n);switch(t){case"vcard":var r=e.$fluro.auth.getCurrentToken();window.open("".concat(e.$fluro.apiURL,"/contact/").concat(o,"/vcard.vcf?access_token=").concat(r),"_blank");break;case"phone":var c=n.international||e.phoneNumbers;e.$communications.call(c);break;case"email":if(!e.$fluro.access.can("create","simpleemail"))return window.open("mailto:".concat(n.emails[0]));e.$communications.email([n]);break;case"sms":e.$communications.sms([n])}}}}},64:function(t,e,n){"use strict";var o=n(198),r=n(199),c=n(35);e.a={components:{Wrapper:o.a,Constrain:r.a,FluroRealmBar:c.a}}},88:function(t,e,n){"use strict";var o=n(277),r=(n(24),n(102),n(0)),c=n.n(r);e.a={data:function(){return{selectionMinimum:0,selectionMaximum:0,selection:[]}},methods:{select:function(t){var e=this;if(!e.isSelected(t)){var n=e.selection.length,o=e.selectionMaximum;return!o||n<o?e.$set(e.selection,e.selection.length,t):e.$set(e.selection,e.selection.length-1,t)}},selectMultiple:function(t){var e=this,n=[].concat(Object(o.a)(e.selection),Object(o.a)(t));n=c.a.uniqBy(n,(function(t){return t._id||t})),console.log("SELECT NEW ITEMS",e.selectionMaximum,n.length),e.setSelection(n)},deselectMultiple:function(t){var e=this;c.a.each(t,(function(t){e.deselect(t)}))},setSelection:function(t){var e=this;e.selectionMaximum&&t.length>e.selectionMaximum&&(t=t.slice(0,e.selectionMaximum)),e.selection=t},deselect:function(t){var e=this;if(t){var n=e.$fluro.utils.getStringID(t),o=c.a.findIndex(e.selection,(function(t){var o=e.$fluro.utils.getStringID(t);return n==o}));e.selection.splice(o,1)}},toggle:function(t){var e=this;e.isSelected(t)?e.deselect(t):e.select(t)},deselectAll:function(){this.selection=[]},isSelected:function(t){var e=this,n=e.$fluro.utils.getStringID(t);return c.a.some(e.selection,(function(t){var o=e.$fluro.utils.getStringID(t);return n==o}))}}}}}]);