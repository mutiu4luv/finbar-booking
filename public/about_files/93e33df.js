(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{18:function(e,t,r){(function(e){var n,o,c,l,f=r(1064),d=r(3);r(42),r(12),r(56),r(57),r(60),r(14),r(24),r(93),r(55),r(31),r(23),r(490),r(59),r(22),r(28),r(102),r(320),r(51),r(48),r(17),r(103),r(120),r(169),r(85),"undefined"!=typeof self&&self,l=function(e,t,r,n,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==d(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,a=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],s=Object.keys(o),u=0;u<s.length;++u){var c=s[u],l=o[c];"object"==d(l)&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:o,prop:c}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(a(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==d(e)?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",o=0;o<n.length;++o){var s=n.charCodeAt(o);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?a+=n.charAt(o):s<128?a+=i[s]:s<2048?a+=i[192|s>>6]+i[128|63&s]:s<55296||s>=57344?a+=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(o+=1,s=65536+((1023&s)<<10|1023&n.charCodeAt(o)),a+=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}return a},isBuffer:function(e){return!(!e||"object"!=d(e)||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=d(r)){if(a(t))t.push(r);else{if(!t||"object"!=d(t))return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=d(t))return[t].concat(r);var s=t;return a(t)&&!a(r)&&(s=o(t,i)),a(t)&&a(r)?(r.forEach((function(r,a){if(n.call(t,a)){var o=t[a];o&&"object"==d(o)&&r&&"object"==d(r)?t[a]=e(o,r,i):t.push(r)}else t[a]=r})),t):Object.keys(r).reduce((function(t,a){var o=r[a];return n.call(t,a)?t[a]=e(t[a],o,i):t[a]=o,t}),s)}}},function(e,t){e.exports=a},function(e,t,r){"use strict";(function(e){var n=r(2),a=r.n(n),i=r(0),o=r.n(i),s=r(11),u=r.n(s);r(3);var c=a.a.CancelToken;t.a=function(t){var r;e.browser&&(r=t.cache.get("api"));var s,n,l=a.a.defaults.adapter,i=(s=function(e){return new Promise((function(t,i){var n,s;switch(String(e.method).toLowerCase()){case"post":case"patch":case"put":case"delete":e.cache||(e.cache=!1)}if(!1===e.cache);else if(n=e.cache||r){var u=p(e);s=n.get(u)}return s?t(s):(Object.assign(e,{adapter:l}),a.a.request(e).then((function(e){t(e)}),(function(e){i(e)})))}))},(n=a.a.create({paramsSerializer:function(e){return u.a.stringify(e,{arrayFormat:"repeat"})},adapter:s})).defaults.baseURL=t.apiURL,n.defaults.headers.common.Accept="application/json",n.defaults.withCredentials=t.withCredentials,n.interceptors.request.use((function(e){return e.headers["fluro-request-date"]=(new Date).getTime(),t.date.defaultTimezone&&(e.headers["fluro-request-timezone"]=t.date.defaultTimezone),e.headers["fluro-api-version"]="2.2.30",(t.userContextByDefault||e.application&&!e.disableUserContext)&&t.app?(t.app.uuid&&(e.headers["fluro-app-uuid"]=t.app.uuid,console.log("request uuid")),t.app.user?(console.log("Request as user",t.app.user.firstName),e.headers.Authorization="Bearer ".concat(t.app.user.token),e.params&&e.params.access_token&&delete e.params.access_token,e):e):e})),n.interceptors.response.use((function(e){var t=e.config,n=p(t),a=e.config.cache||r;if(!a)return e;switch(String(t.method).toLowerCase()){case"put":case"patch":case"post":case"delete":var i=f({_id:(t.data||{})._id,params:t.params,url:t.url});a.forEach((function(e,t,r){e.data&&(e=e.data);var n=f({key:t,value:e});o.a.intersection(n,i).length&&r.del(t)}));break;default:a.set(n,e)}return e}),(function(e){if(a.a.isCancel(e))return console.log("Request cancelled"),Promise.reject(e);var r=o.a.get(e,"response.status")||e.status;switch(r){case 401:t.app&&t.app.user&&(t.app.user=null);break;case 502:case 504:return console.log("fluro.api > ".concat(r," connection error retrying")),n.request(e.config);case 404:break;default:console.log("fluro.api > connection error",r,e)}return Promise.reject(e)})),n);function f(e){var t=(o.a.isString(e)?e:JSON.stringify(e)).match(/[0-9a-fA-F]{24}/g);return o.a.uniq(t)}function p(e){return o.a.compact([e.method,e.url,JSON.stringify({params:e.params,data:e.data}),t.app&&t.app.user?t.app.user.persona:"",e.application?"application":"",e.disableUserContext?"disableUserContext":""]).join("-")}return i.generateEndpointURL=function(e,r){if(e&&String(e).length){r||(r={});var n="".concat(t.apiURL).concat(e);n=function(e,r){if(!r.withoutToken){var n=t.auth.getCurrentToken();!r.access_token&&n&&(r.access_token=n)}return t.app&&t.app.uuid&&(r.did=t.app.uuid),e}(n,r);var a=t.utils.mapParameters(r);return a.length&&(n+="?"+a),n}},i.CancelToken=c,i.axios=a.a,i}}).call(this,r(7))},function(e,t){var r,n,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||s(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";var n=String.prototype.replace,a=/%20/g,i=r(4),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return n.call(e,a,"+")},RFC3986:function(e){return String(e)}}},o)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(e){return d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":d(e)},n="undefined"!=typeof window&&void 0!==window.document,a="object"===("undefined"==typeof self?"undefined":r(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,i=void 0!==e&&null!=e.versions&&null!=e.versions.node;t.isBrowser=n,t.isWebWorker=a,t.isNode=i}).call(this,r(7))},function(e,t){function r(e,t){if(e=e.replace(/\s+/g,""),t=t.replace(/\s+/g,""),!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e===t)return 1;if(1===e.length&&1===t.length)return 0;if(e.length<2||t.length<2)return 0;for(var r=new Map,n=0;n<e.length-1;n++){var o=e.substr(n,2),c=r.has(o)?r.get(o)+1:1;r.set(o,c)}for(var l=0,f=0;f<t.length-1;f++){var d=t.substr(f,2),i=r.has(d)?r.get(d):0;i>0&&(r.set(d,i-1),l++)}return 2*l/(e.length+t.length-2)}e.exports={compareTwoStrings:r,findBestMatch:function(e,t){if(!function(e,t){return"string"==typeof e&&!!Array.isArray(t)&&!!t.length&&!t.find((function(e){return"string"!=typeof e}))}(e,t))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");for(var n=[],a=0,o=0;o<t.length;o++){var c=t[o],s=r(e,c);n.push({target:c,rating:s}),s>n[a].rating&&(a=o)}return{ratings:n,bestMatch:n[a],bestMatchIndex:a}}}},function(e,t,r){"use strict";var n=r(12),a=r(13),i=r(8);e.exports={formats:i,parse:a,stringify:n}},function(e,t,r){"use strict";var n=r(4),a=r(8),i=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,s(t)?t:[t])},l=Date.prototype.toISOString,f=a.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:f,formatter:a.formatters[f],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},m=function e(t,r,a,i,o,u,l,f,m,h,v,g,y){var w,b=t;if("function"==typeof l?b=l(r,b):b instanceof Date?b=h(b):"comma"===a&&s(b)&&(b=n.maybeMap(b,(function(e){return e instanceof Date?h(e):e})).join(",")),null===b){if(i)return u&&!g?u(r,p.encoder,y,"key"):r;b=""}if("string"==typeof(w=b)||"number"==typeof w||"boolean"==typeof w||"symbol"==d(w)||"bigint"==typeof w||n.isBuffer(b))return u?[v(g?r:u(r,p.encoder,y,"key"))+"="+v(u(b,p.encoder,y,"value"))]:[v(r)+"="+v(String(b))];var D,k=[];if(void 0===b)return k;if(s(l))D=l;else{var S=Object.keys(b);D=f?S.sort(f):S}for(var M=0;M<D.length;++M){var A=D[M],T=b[A];if(!o||null!==T){var O=s(b)?"function"==typeof a?a(r,A):r:r+(m?"."+A:"["+A+"]");c(k,e(T,O,a,i,o,u,l,f,m,h,v,g,y))}}return k};e.exports=function(e,t){var r,n=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=a.default;if(void 0!==e.format){if(!i.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=a.formatters[r],o=p.filter;return("function"==typeof e.filter||s(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?n=(0,u.filter)("",n):s(u.filter)&&(r=u.filter);var l,f=[];if("object"!=d(n)||null===n)return"";l=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=o[l];r||(r=Object.keys(n)),u.sort&&r.sort(u.sort);for(var v=0;v<r.length;++v){var g=r[v];u.skipNulls&&null===n[g]||c(f,m(n[g],g,h,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var y=f.join(u.delimiter),w=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),y.length>0?w+y:""}},function(e,t,r){"use strict";var n=r(4),a=Object.prototype.hasOwnProperty,i=Array.isArray,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,l=[];if(c){if(!r.plainObjects&&a.call(Object.prototype,c)&&!r.allowPrototypes)return;l.push(c)}for(var f=0;r.depth>0&&null!==(s=o.exec(i))&&f<r.depth;){if(f+=1,!r.plainObjects&&a.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var a=n?t:u(t,r),i=e.length-1;i>=0;--i){var o,s=e[i];if("[]"===s&&r.parseArrays)o=[].concat(a);else{o=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);r.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[])[l]=a:o[c]=a:o={0:a}}a=o}return a}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,p=l.split(t.delimiter,f),d=-1,m=t.charset;if(t.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?m="utf-8":"utf8=%26%2310003%3B"===p[r]&&(m="iso-8859-1"),d=r,r=p.length);for(r=0;r<p.length;++r)if(r!==d){var h,g,v=p[r],y=v.indexOf("]="),b=-1===y?v.indexOf("="):y+1;-1===b?(h=t.decoder(v,o.decoder,m,"key"),g=t.strictNullHandling?null:""):(h=t.decoder(v.slice(0,b),o.decoder,m,"key"),g=n.maybeMap(u(v.slice(b+1),t),(function(e){return t.decoder(e,o.decoder,m,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===m&&(g=s(g)),v.indexOf("[]=")>-1&&(g=i(g)?[g]:g),a.call(c,h)?c[h]=n.combine(c[h],g):c[h]=g}return c}(e,r):e,f=r.plainObjects?Object.create(null):{},p=Object.keys(l),d=0;d<p.length;++d){var m=p[d],h=c(m,l[m],r,"string"==typeof e);f=n.merge(f,h,r)}return n.compact(f)}},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(1),o=r.n(i),s=r(5),u=r.n(s),c=r(2),l=r.n(c),d=r(9),p={mapParameters:function(e){return a.a.chain(e).reduce((function(e,t,r){return null==t||!1===t||(a.a.isArray(t)?a.a.each(t,(function(t){e.push("".concat(r,"=").concat(encodeURIComponent(t)))})):e.push(encodeURIComponent(r)+"="+encodeURIComponent(t))),e}),[]).compact().value().join("&")},formatCurrency:function(e,t){return e&&!isNaN(e)||(e=0),"".concat(p.currencySymbol(t)).concat(parseFloat(parseInt(e)/100).toFixed(2))},currencySymbol:function(e){switch(e=String(e).toLowerCase(),String(e).toLowerCase()){case"gbp":return"£";case"eur":return"€";default:return"$"}},getAvailableCurrencies:function(e){var t=[];if(t.push({name:"USD (".concat(p.currencySymbol("usd"),")"),value:"usd",countryCode:{US:!0}}),t.push({name:"GBP (".concat(p.currencySymbol("gbp"),")"),value:"gbp",countryCode:{GB:!0,UK:!0}}),t.push({name:"CAD (".concat(p.currencySymbol("cad"),")"),value:"cad",countryCode:{CA:!0}}),t.push({name:"AUD (".concat(p.currencySymbol("aud"),")"),value:"aud",countryCode:{AU:!0}}),t.push({name:"NZD (".concat(p.currencySymbol("nzd"),")"),value:"nzd",countryCode:{NZ:!0}}),t.push({name:"SGD (".concat(p.currencySymbol("sgd"),")"),value:"sgd",countryCode:{SG:!0}}),e){var r=t.findIndex((function(t){return t.countryCode[e]}));-1!=r&&(t=function(e,t,r){var n=f(e);return n.splice.apply(n,[r,0].concat(f(n.splice(t,1)))),n}(t,r,0),console.log("Default currency is",t[0]))}return t},hash:function(e,t){return a.a.reduce(e,(function(e,t){var r=a.a.get(t,r);return e[r]=t,e}),{})},guid:function(){var e=(new Date).getTime().toString(16)+Math.random().toString(16).substring(2)+"0".repeat(16);return e.substr(0,8)+"-"+e.substr(8,4)+"-4000-8"+e.substr(12,3)+"-"+e.substr(15,12)},getDefaultValueForField:function(e){var t,r=1!=e.maximum,n="group"==e.type&&e.asObject||"embedded"==e.directive;if("reference"===(r&&(t=[]),e.type)?e.defaultReferences&&e.defaultReferences.length&&(t=r?t.concat(e.defaultReferences):a.a.first(e.defaultReferences)):e.defaultValues&&e.defaultValues.length&&(t=r?t.concat(e.defaultValues):a.a.first(e.defaultValues)),r){var i=Math.max(e.askCount,e.minimum),o=Math.max(i-t.length,0);if(o)switch(e.type,e.directive){case"wysiwyg":case"textarea":case"code":a.a.times(o,(function(){t.push("")}));break;default:n&&a.a.times(o,(function(){t.push({})}))}}else if(!t)if("string"===e.type)t="";else switch(e.directive){case"wysiwyg":case"textarea":case"code":t="";break;default:n&&(t={})}return t},extractFromArray:function(e,t,r,n,i,o,s){s||(s={}),r&&(s.sum=r),n&&(s.flatten=!0),i&&(s.unique=!0),o&&(s.excludeNull=!0);var u=a.a.reduce(e,(function(e,r){var n=a.a.get(r,t),i=!n&&!1!==n&&0!==n;return s.excludeNull&&i||e.push(n),e}),[]);return s.flatten&&(u=a.a.flatten(u)),s.unique&&(u=a.a.uniq(u)),s.sum&&(u=u.reduce((function(e,t){return e+t}),0)),u},matchInArray:function(e,t,r,n){return a.a.filter(e,(function(e){var i,o=a.a.get(e,t);switch(n){case">":i=o>r;break;case"<":i=o<r;break;case">=":i=o>=r;break;case"<=":i=o<=r;break;case"in":i=a.a.includes(o,r);break;default:i=void 0===r?o:o==r}return i}))},comma:function(e,t,r){return r&&(e=e.slice(0,r)),a.a.chain(e).compact().map((function(e){return t&&t.length?a.a.get(e,t):e})).value().join(", ")},getStringID:function(e,t){return e?(r=e._id?String(e._id):String(e),!t||d.isBrowser,r):e;var r},arrayIDs:function(e,t){return e?a.a.chain(e).compact().map((function(e){return p.getStringID(e,t)})).compact().uniq().value():[]},errorMessage:function(e){a.a.isArray(e)&&(e=a.a.first(e));var t=a.a.chain(["response.data.message","response.data","message"]).map((function(t){return a.a.get(e,t)})).compact().first().value();return Array.isArray(t)&&(t=t[0]),t&&t.length?t:String(e)},processCardPrioritySort:function(e){var t="2",r=0;if("archived"==e.status)return t="4",parseFloat(t+"."+r)+"-"+e.title;if("complete"==e.processStatus)return t="3",parseFloat(t+"."+r)+"-"+e.title;if(e.dueDate){var n=u()(e.dueDate).toDate(),a=u()().toDate(),i=n.getTime();r=n.getTime(),t=i<a.getTime()?"0":"1"}return parseFloat(t+"."+r)+"-"+e.title},machineName:function(e){if(e&&e.length)return e.replace(/[^a-zA-Z0-9-_]+/g,"")},hhmmss:function(e){function t(e){return("0"+e).slice(-2)}var r=Math.floor(e/60);e%=60;var n=Math.floor(r/60);return r%=60,t(n)+":"+t(r)+":"+t(e)}},m={};p.injectScript=function(e){return new Promise((function(t,r){if(!document)return r("Script injection can only be used when running in a browser context");if(m[e])return t(e);m[e]=!0;var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.onload=function(){return console.log("Included external script",e),t(e)},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}))};var h={};p.injectModule=function(e,t){if(t||(t={}),!document)return Promise.reject("Script injection can only be used when running in a browser context");if(!t.clearCache&&h[e])return h[e];var r=new Promise((function(t,r){l.a.get(e).then((function(e){var r=e.data,n=Function('"use strict"; var object = {}; try {object = '.concat(r,"} catch(e) {console.log(e)} finally {return object}"))();return t(n)}))}));return h[e]=r,r},p.getFlattenedFields=function(e,t,r){return t||(t=[]),r||(r=[]),a.a.chain(e).map((function(e,n){var a=[];if((e=Object.assign({},e)).fields&&e.fields.length){(e.asObject||"embedded"==e.directive)&&(t.push(e.key),r.push(e.title),e.trail=t.slice(),e.titles=r.slice(),t.pop(),r.pop(),a.push(e),1!=e.maximum||1!=e.minimum&&e.asObject?(t.push(e.key+"[]"),r.push(e.title)):(t.push(e.key),r.push(e.title)));var i=p.getFlattenedFields(e.fields,t,r);(e.asObject||"embedded"==e.directive)&&(t.pop(),r.pop()),a.push(i)}else t.push(e.key),r.push(e.title),e.trail=t.slice(),e.titles=r.slice(),t.pop(),r.pop(),a.push(e);return a})).flattenDeep().value()};var v,g=p;function y(){var e={},t={removeAllListeners:function(){e={}},dispatch:function(t,r){e[t]&&e[t].forEach((function(e){return e(r)}))},addEventListener:function(t,r){e[t]||(e[t]=[]),-1==e[t].indexOf(r)&&e[t].push(r)},removeEventListener:function(t,r){e[t]||(e[t]=[]);var n=e[t].indexOf(r);-1!=n&&e[t].splice(n,1)},bootstrap:function(e){e&&(e.dispatch=t.dispatch,e.addEventListener=t.addEventListener,e.removeEventListener=t.removeEventListener,e.removeAllListeners=t.removeAllListeners)}};return t}"undefined"!=typeof window&&(v=Intl.DateTimeFormat().resolvedOptions().timeZone);var w={defaultTimezone:v,moment:o.a,timezones:function(){return o.a.tz.names()},militaryTimestamp:function(e,t){var r=e;r&&String(r)||(console.log("reset to 0000",e),r="0000"),(r=String(parseInt(String(r).split(":").join(""))).slice(0,4)).length<1?r="0000"+r:r.length<2?r="000"+r:r.length<3?r="00"+r:r.length<4&&(r="0"+r);var n=parseInt(r.substring(0,2)),a=parseInt(r.substring(2));return n=Math.max(n,0),a=Math.max(a,0),n=Math.min(n,23),a=Math.min(a,59),String(n).length<2&&(n="0".concat(n)),String(a).length<2&&(a="0".concat(a)),t?"".concat(n,":").concat(a):"".concat(n).concat(a)},timestampToAmPm:function(e){var t=w.militaryTimestamp(e),r=!0,n=parseInt(t.substring(0,2)),a=parseInt(t.substring(2));return n>12&&(r=!1,n-=12),n=Math.max(n,0),a=Math.max(a,0),n=Math.min(n,12),a=Math.min(a,59),String(a).length<2&&(a="0".concat(a)),"".concat(n,":").concat(a).concat(r?"am":"pm")},currentTimezone:function(){return o.a.tz.guess()},isDifferentTimezoneThanUser:function(e){var t=o.a.tz.guess();if(!e)return!1;if(t==(e=String(e)))return!1;var r=new Date;return o.a.tz(r,t).utcOffset()!=o.a.tz(r,e).utcOffset()},localDate:function(e,t){var r;if((r=e?new Date(e):new Date).getTimezoneOffset(),t){var n=60*(o.a.tz(r,t).utcOffset()-o()(r).utcOffset())*1e3;new Date(r),r.setTime(r.getTime()+n)}return r},getAge:function(e){w.localDate(e);var t=new Date(e),r=today.getFullYear()-t.getFullYear(),n=today.getMonth()-t.getMonth();return(n<0||0===n&&today.getDate()<t.getDate())&&r--,r},formatDate:function(e,t,r){var n=w.localDate(e,r);return o()(n).format(t)},timeago:function(e,t){return o()(e).fromNow(t)},dateFromID:function(e,t,r){e=g.getStringID(e);var n=new Date(1e3*parseInt(e.substring(0,8),16));return w.formatDate(n,t,r)},isMultiDayEvent:function(e){var t,r;if(e&&e.startDate&&(t=w.localDate(e.startDate,e.timezone),e.endDate))return r=w.localDate(e.endDate,e.timezone),t=o()(t),r=o()(r),String(t.format("D MMM YYYY"))!=String(r.format("D MMM YYYY"))},readableEventDate:function(e,t){var r,n;if(e&&e.startDate){r=w.localDate(e.startDate,e.timezone),n=e.endDate?w.localDate(e.endDate,e.timezone):r;var a="";e.timezone&&w.isDifferentTimezoneThanUser(e.timezone)&&(a="(".concat(e.timezone,")")),r=o()(r),n=o()(n);var i=r.format("h:mma D MMM YYYY")==n.format("h:mma D MMM YYYY"),s=r.format("YYYY")==n.format("YYYY"),u=r.format("MMM YYYY")==n.format("MMM YYYY"),c=r.format("D MMM YYYY")==n.format("D MMM YYYY");switch(t){case"short":return i||c?"".concat(r.format("D MMM")," ").concat(a):u||s?"".concat(r.format("D")+" - "+n.format("D MMM")," ").concat(a):"".concat(r.format("D MMM Y")+" - "+n.format("D MMM Y")," ").concat(a);case"day":return i||c?"".concat(r.format("dddd D MMMM")," ").concat(a):u?"".concat(r.format("D")+" - "+n.format("D MMMM Y")," ").concat(a):s?"".concat(r.format("D MMM")+" - "+n.format("D MMM Y")," ").concat(a):"".concat(r.format("D MMM Y")+" - "+n.format("D MMM Y")," ").concat(a);default:return i?"".concat(r.format("h:mma dddd D MMM Y")," ").concat(a):c?"".concat(r.format("h:mma")+" - "+n.format("h:mma dddd D MMM Y")," ").concat(a):u?"".concat(r.format("D")+" - "+n.format("D MMM Y")," ").concat(a):s?"".concat(r.format("D MMM")+" - "+n.format("D MMM Y")," ").concat(a):"".concat(r.format("D MMM Y")+" - "+n.format("D MMM Y")," ").concat(a)}}},readableEventTime:function(e){var t,r;if(e&&e.startDate){t=w.localDate(e.startDate,e.timezone),r=e.endDate?w.localDate(e.endDate,e.timezone):t,t=o()(t),r=o()(r);var n=t.format("h:mma D MMM YYYY")==r.format("h:mma D MMM YYYY"),a=(t.format("YYYY"),r.format("YYYY"),t.format("MMM YYYY"),r.format("MMM YYYY"),t.format("D MMM YYYY")==r.format("D MMM YYYY"));return n?t.format("h:mma"):a?t.format("h:mma")+" - "+r.format("h:mma"):w.readableEventDate(e)}},groupEventByDate:function(e){return a.a.chain(e).reduce((function(e,t,r){var n="dddd D MMMM",i=new o.a(t.startDate||a.a.get(t,"event.startDate")||a.a.get(t,"roster.event.startDate")||t.created),s=t.timezone||a.a.get(t,"event.timezone")||a.a.get(t,"roster.event.timezone");s&&i.tz(s),o()().format("YYYY")!=i.format("YYYY")&&(n="dddd D MMMM YYYY");var u=i.format(n),c=e[u];return c||(c=e[u]={title:u,items:[],index:r}),c.items.push(t),e}),{}).values().orderBy("index").value()},timeline:function(e,t,r){return t||(t="created"),e=a.a.orderBy(e,(function(e){return new Date(a.a.get(e,t))})),r||(e=e.reverse()),a.a.chain(e).reduce((function(e,r,n,i){var s,u,c,l=new Date(a.a.get(r,t));if(!(l instanceof Date)||isNaN(l))return e;var f=i.timezone||r.timezone;f&&w.isDifferentTimezoneThanUser(f)?(s="".concat(o()(l).tz(f).format("D MMM YYYY")),u="".concat(o()(l).tz(f).format("MMM YYYY")),c="".concat(o()(l).tz(f).format("YYYY"))):(s=o()(l).format("D MMM YYYY"),u=o()(l).format("MMM YYYY"),c=o()(l).format("YYYY"));var p=e.lookup[c];p||(p=e.lookup[c]={date:l,months:[]},e.years.push(p));var d=e.lookup[u];d||(d=e.lookup[u]={date:l,days:[]},p.months.push(d));var m=e.lookup[s];return m||(m=e.lookup[s]={date:l,items:[]},d.days.push(m)),m.items.push(r),e}),{lookup:{},years:[]}).get("years").value()},countdown:function(e,t){var r=(new Date).getTime(),n=new Date(e).getTime()-r,a=n%6e4/1e3,i=Math.floor(n%36e5/6e4),o=Math.floor(n%864e5/36e5),s=Math.floor(n/864e5);if(t){var c=function(e){return e=Math.ceil(e),1==String(e).length?"0".concat(e):String(e)};return{days:c(s),minutes:c(i),hours:c(o),seconds:c(a)}}return{days:s,minutes:i,hours:o,seconds:Math.ceil(a)}}},b=w,D={getAssetMediaIDFromURL:function(e,t){var r,n=String(e).toLowerCase();switch(t||(n.includes("youtube")?t="youtube":n.includes("vimeo")&&(t="vimeo")),t){case"youtube":r=D.getYouTubeIDFromURL(e);break;case"vimeo":r=D.getVimeoIDFromURL(e)}return r},getYouTubeIDFromURL:function(e){if(e&&e.length){var t;if(-1!=e.indexOf("youtube.com/watch"))t=function(e,t){var r=new RegExp("(\\?|&)v\\=([^&]*)(&|$)"),n=e.match(r);return n?n[2]:""}(e);else{var r=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,n=e.replace(r,"$1");if(o(n,";")){var a=n.split(";");if(o(a[1],"%")){var i=decodeURIComponent(n.split(";")[1]);n=("https://youtube.com"+i).replace(r,"$1")}else n=a[0]}else o(n,"#")&&(n=n.split("#")[0]);t=n}return t}function o(e,t){return e.indexOf(t)>-1}},getVimeoIDFromURL:function(e){if(e&&e.length){var t=e.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);return t?t[3]:void 0}},readableMilliseconds:function(e,t){var r=e%6e4/1e3,n=Math.floor(e%36e5/6e4),a=Math.floor(e%864e5/36e5),i=Math.floor(e/864e5),o="";return t?(0!==i&&(o+=i+"d "),0!==a&&(o+=a+"h "),0!==n&&(o+=n+"m "),(0!==r||e<1e3)&&(o+=r.toFixed(0)+"s ")):(0!==i&&(o+=1!==i?i+" days ":i+" day "),0!==a&&(o+=1!==a?a+" hrs ":a+"hr "),0!==n&&(o+=1!==n?n+" mins ":n+"min "),(0!==r||e<1e3)&&(o+=r.toFixed(0)+"s ")),o},readableSeconds:function(e,t){return D.readableMilliseconds(1e3*e,t)},hhmmss:function(e){return function(e){var t=new Date(0),r=new Date(1e3*e);return new Date(r.getTime()-t.getTime()).toISOString().split("T")[1].split("Z")[0]}(e).split(".")[0]}},k=D,S=r(10),M=r.n(S),A={};function T(e){return isNaN(parseInt(e))}function O(e,t){if(!e)return"";if(t){if(e._id)return String(e._id).toLowerCase();if(e._external)return String(e._external).toLowerCase();if(e.id)return String(e.id).toLowerCase()}return e.title?String(e.title).toLowerCase():e.name?String(e.name).toLowerCase():String(e).toLowerCase()}function P(e,t,r){var n=parseFloat(t),a=parseFloat(r),i=parseFloat(e||0),o=Math.min(n,a),s=Math.max(n,a);return i>=o&&i<=s}function Y(e,t){var r=O(e,!0);return a.a.some(t,(function(e){return O(e,!0),r==O(e,!0)}))}function x(e){return!e||null==e||null==e||""==e||!(!a.a.isArray(e)||e.length)||0==e||"0"==e||void 0}function C(e,t){var r=function e(t,r){var n=[];return t?a.a.isObject(t)?a.a.isArray(t)?a.a.flatten(e(t,r)):(n.push(O(t,r)),1==n.length?n[0]:n):[O(t,r)]:n}(e,!0),n=O(t,!0);return r==n||a.a.includes(r,n)}function I(e,t){return a.a.isString(t)&&(t=O(t)),a.a.includes(t,O(e))}function j(e,t,r,n,a){if(!e)return!1;var i=o.a.tz(e,a),s=o.a.tz(t,a);switch(r){case"next":case"past":break;default:i.startOf("day"),s.startOf("day")}var u,c=i.toDate(),l=s.toDate(),f=new Date;switch(r){case"date":u=String(c)==String(l);break;case"week":u=i.format("W YYYY")==s.format("W YYYY");break;case"month":u=i.format("M YYYY")==s.format("M YYYY");break;case"year":u=i.format("YYYY")==s.format("YYYY");break;case"dateanniversary":u=i.format("D MMM")==s.format("D MMM");break;case"dateanniversarynext":var p=o()().diff(i,"years",!0);u=!((d=i.add(Math.ceil(p),"years").toDate())<f)&&d.getTime()<=l.getTime();break;case"dateanniversarypast":var d;p=s.diff(i,"years",!0),u=!((d=i.add(Math.ceil(p),"years").toDate())>f)&&d.getTime()>=l.getTime();break;case"dateanniversarymonth":u=i.format("MMM")==s.format("MMM");break;case"before":u=c.getTime()<l.getTime();break;case"after":u=c.getTime()>=l.getTime();break;case"next":u=!(c<f)&&c.getTime()<l.getTime();break;case"past":u=!(c>f)&&c.getTime()>=l.getTime()}return u}A.activeFilters=function(e){var t=[];return function e(t,r){A.isValidFilter(t)&&r.push(t),t.filters&&t.filters.length&&a.a.each(t.filters,(function(t){e(t,r)}))}(e,t),t},A.activeFilterRows=function(e){return a.a.filter(A.activeFilters,(function(e){return e.comparator&&e.comparator.length}))},A.activeFilterKeys=function(e){return a.a.chain(A.activeFilters(e)).map((function(e){if(e&&e.key)return A.getRootKey(e.key)})).compact().uniq().value()},A.activeFilterCriteriaString=function(e){return a.a.chain(A.activeFilters(e)).map((function(e){if(e.criteria&&e.criteria.length){var t=A.activeFilters({filters:e.criteria});if(t&&t.length)return A.getFilterChangeString({filters:t})}})).flatten().compact().map((function(e){var t=e.title||e.name||e._id||e;return String(t).toLowerCase()})).compact().uniq().value()},A.activeFilterValues=function(e){return a.a.chain(A.activeFilters(e)).map((function(e){var t=[],r=A.getComparator(e.comparator);if(r){switch(r.inputType){case"array":t=t.concat(e.values);break;case"range":case"daterange":t=t.concat([e.value,e.value2]);break;default:var n=e.value,a=e.value2;"boolean"==e.dataType&&(n=String(A.convertToBoolean(n)),a=String(A.convertToBoolean(a))),t=t.concat([n,a])}return t}})).flatten().compact().map((function(e){var t=e.title||e.name||e._id||e;return String(t).toLowerCase()})).compact().uniq().value()},A.activeFilterComparators=function(e){var t=[];return function e(t,r){A.isValidFilter(t)&&r.push(t.comparator),t.filters&&t.filters.length&&a.a.each(t.filters,(function(t){e(t,r)}))}(e,t),t},A.activeFilterOperators=function(e){var t=[];return function e(t,r,n){var i=t.operator;i?(n.push(i),a.a.some(t.filters,(function(e){return A.isValidFilter(e)}))&&r.push(n.slice())):n.length=0,t.filters&&t.filters.length?a.a.each(t.filters,(function(t){e(t,r,n)})):n.length=0}(e,t,[]),a.a.chain(t).flatten().reduce((function(e,t){return e[t]||(e[t]=0),e[t]++,e}),{}).map((function(e,t){return"".concat(e).concat(t)})).compact().value()},A.getFilterChangeString=function(e){return[A.activeFilterKeys(e).join(", "),A.activeFilterValues(e).join(", "),A.activeFilterComparators(e).join(", "),A.activeFilterOperators(e).join(", "),A.activeFilterCriteriaString(e).join(", ")].join("")},A.matchAnyString=function(e,t){var r=O(e);if(a.a.isString(t))return i(t);var n=a.a.values(t);return a.a.some(n,i);function i(e){var t=O(e);return a.a.includes(t,r)||A.isSimilar(t,r)}},A.isSimilar=function(e,t,r){r||(r={});var n=M.a.compareTwoStrings(O(e),O(t))>=.6;return r.source&&(r._similar||(r._similar=0),r._similar+=n),n},A.comparators=[],A.comparators.push({title:"Is on day ",operator:"datesameday",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return j(e,t,"date",0,n.timezone)})):j(e,t,"date",0,n.timezone)},restrict:["date"]}),A.comparators.push({title:"Anniversary Date",operator:"dateanniversary",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return j(e,t,"dateanniversary",0,n.timezone)})):j(e,t,"dateanniversary",0,n.timezone)},dateDisplayFormat:"YYYY",restrict:["date"]}),A.comparators.push({title:"Anniversary is Between",operator:"dateanniversarybetween",match:function(e,t,r,n,a){if(a||(a={}),e){var i=new Date(e);if(!isNaN(i)){i.setHours(0,0,0,0);var o=new Date(t);o.setHours(0,0,0,0);var s=new Date(r);s.setHours(0,0,0,0);var u=new Date(Math.min(o,s)),c=new Date(Math.max(o,s)),l=parseInt("".concat(d(i.getMonth())).concat(d(i.getDate()))),f=parseInt("".concat(d(u.getMonth())).concat(d(u.getDate()))),p=parseInt("".concat(d(c.getMonth())).concat(d(c.getDate())));return l>=f&&l<=p}}function d(e){return 1==(e=String(e)).length?"0"+e:e}},dateDisplayFormat:"YYYY",restrict:["date"],inputType:"daterange"}),A.comparators.push({title:"Is same week as",operator:"datesameweek",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return j(e,t,"week",0,n.timezone)})):j(e,t,"week",0,n.timezone)},dateDisplayFormat:"[Wk]W YYYY",restrict:["date"],inputType:"array"}),A.comparators.push({title:"Is same month as",operator:"datesamemonth",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return j(e,t,"month",0,n.timezone)})):j(e,t,"month",0,n.timezone)},dateDisplayFormat:"MMM YYYY",restrict:["date"]}),A.comparators.push({title:"Is same year as",operator:"datesameyear",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return j(e,t,"year",0,n.timezone)})):j(e,t,"year",0,n.timezone)},dateDisplayFormat:"YYYY",restrict:["date"]}),A.comparators.push({title:"Is weekday",operator:"datesameweekday",match:function(e,t,r,n){n||(n={});var i=String(t);if(a.a.isArray(e))return a.a.some(e,(function(e){var t=String(o()(e).weekday());return a.a.includes(i,t)}));var s=String(o()(e).weekday());return a.a.includes(i,s)},dateDisplayFormat:"dddd",restrict:["date"],inputType:"array"}),A.comparators.push({title:"Is not weekday",operator:"datedifferentweekday",match:function(e,t,r,n){n||(n={});var i=String(t);if(a.a.isArray(e))return!a.a.some(e,(function(e){var t=String(o()(e).weekday());return a.a.includes(i,t)}));var s=String(o()(e).weekday());return!a.a.includes(i,s)},dateDisplayFormat:"dddd",restrict:["date"],inputType:"array"}),A.comparators.push({title:"Is before",operator:"datebefore",match:function(e,t,r,n){if(n||(n={}),e){if(a.a.isArray(e)){if(!e.length)return;return a.a.some(e,(function(e){return j(e,t,"before",0,n.timezone)}))}return j(e,t,"before",0,n.timezone)}},restrict:["date"]}),A.comparators.push({title:"Is after",operator:"dateafter",match:function(e,t,r,n){if(n||(n={}),e){if(a.a.isArray(e)){if(!e.length)return;return a.a.some(e,(function(e){return j(e,t,"after",0,n.timezone)}))}return j(e,t,"after",0,n.timezone)}},restrict:["date"]}),A.comparators.push({title:"Is not before",operator:"datenotbefore",match:function(e,t,r,n){return n||(n={}),!e||(a.a.isArray(e)?!e.length||a.a.every(e,(function(e){return!j(e,t,"before",0,n.timezone)})):!j(e,t,"before",0,n.timezone))},restrict:["date"]}),A.comparators.push({title:"Is not after",operator:"datenotafter",match:function(e,t,r,n){return n||(n={}),!e||(a.a.isArray(e)?!e.length||a.a.every(e,(function(e){return!j(e,t,"after",0,n.timezone)})):!j(e,t,"after",0,n.timezone))},restrict:["date"]}),A.comparators.push({title:"Anniversary is in the next",inputType:"datemeasure",operator:"dateanniversarynext",match:function(e,t,r,n){if(n||(n={}),e){var i=o()().add(t,r).toDate();if(a.a.isArray(e)){if(!e.length)return;return a.a.some(e,(function(e){return j(e,i,"dateanniversarynext",0,n.timezone)}))}return j(e,i,"dateanniversarynext",0,n.timezone)}},restrict:["date"]}),A.comparators.push({title:"Anniversary is in the last",inputType:"datemeasure",operator:"dateanniversarypast",match:function(e,t,r,n){if(n||(n={}),e){var i=o()().subtract(t,r).toDate();if(a.a.isArray(e)){if(!e.length)return;return a.a.some(e,(function(e){return j(e,i,"dateanniversarypast",0,n.timezone)}))}return j(e,i,"dateanniversarypast",0,n.timezone)}},restrict:["date"]}),A.comparators.push({title:"Is in the next",inputType:"datemeasure",operator:"datenext",match:function(e,t,r,n){var i;if(n||(n={}),!e)return i;var s=o()().add(t,r).toDate();if(a.a.isArray(e)){if(!e.length)return i;i=a.a.some(e,(function(e){return j(e,s,"next",0,n.timezone)}))}else i=j(e,s,"next",0,n.timezone);return i},restrict:["date"]}),A.comparators.push({title:"Is in the last",inputType:"datemeasure",operator:"datepast",match:function(e,t,r,n){var i;if(n||(n={}),!e)return i;var s=o()().subtract(t,r).toDate();if(a.a.isArray(e)){if(!e.length)return i;i=a.a.some(e,(function(e){return j(e,s,"past",0,n.timezone)}))}else i=j(e,s,"past",0,n.timezone);return i},restrict:["date"]}),A.comparators.push({title:"Is not in the next",inputType:"datemeasure",operator:"datenotnext",match:function(e,t,r,n){var i;if(n||(n={}),!e)return!i;var s=o()().add(t,r).toDate();if(a.a.isArray(e)){if(!e.length)return!i;i=a.a.some(e,(function(e){return j(e,s,"next",0,n.timezone)}))}else i=j(e,s,"next",0,n.timezone);return!i},restrict:["date"]}),A.comparators.push({title:"Is not in the last",inputType:"datemeasure",operator:"datenotpast",match:function(e,t,r,n){var i;if(n||(n={}),!e)return!i;var s=o()().subtract(t,r).toDate();if(a.a.isArray(e)){if(!e.length)return!i;i=a.a.some(e,(function(e){return j(e,s,"past",0,n.timezone)}))}else i=j(e,s,"past",0,n.timezone);return!i},restrict:["date"]}),A.comparators.push({title:"Is between",operator:"datebetween",match:function(e,t,r,n){n||(n={});var i=new Date(t);i.setHours(0,0,0,0);var o=new Date(r);if(o.setHours(0,0,0,0),a.a.isArray(e))return a.a.some(e,(function(e){var t=new Date(e);return t.setHours(0,0,0,0),P(t.getTime(),i.getTime(),o.getTime())}));var s=new Date(e);return s.setHours(0,0,0,0),P(s.getTime(),i.getTime(),o.getTime())},restrict:["date"],inputType:"daterange"}),A.comparators.push({title:"Is not between",operator:"datenotbetween",match:function(e,t,r,n){n||(n={});var i=new Date(t);i.setHours(0,0,0,0);var o=new Date(r);if(o.setHours(0,0,0,0),a.a.isArray(e))return!a.a.some(e,(function(e){var t=new Date(e);return t.setHours(0,0,0,0),P(t.getTime(),i.getTime(),o.getTime())}));var s=new Date(e);return s.setHours(0,0,0,0),!P(s.getTime(),i.getTime(),o.getTime())},restrict:["date"],inputType:"daterange"}),A.comparators.push({title:"Is one of",operator:"in",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return Y(e,t)})):Y(e,t)},restrict:["string","email","url","reference"],inputType:"array"}),A.comparators.push({title:"Is not one of",operator:"notin",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?!a.a.some(e,(function(e){return Y(e,t)})):!Y(e,t)},restrict:["string","email","url","reference"],inputType:"array"}),A.comparators.push({title:"Is ",operator:"==",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return C(e,t)})):C(e,t)},restrict:["string","email","url","boolean","number","integer","decimal","float","reference"]}),A.comparators.push({title:"Is not",operator:"!=",positive:!1,match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?!a.a.some(e,(function(e){return C(e,t)})):!C(e,t)},restrict:["string","email","url","boolean","number","integer","decimal","float","reference"]}),A.comparators.push({title:"Starts with",operator:"startswith",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return a.a.startsWith(O(e),O(t))})):a.a.startsWith(O(e),O(t))},restrict:["string","email","url","reference"]}),A.comparators.push({title:"Ends with",operator:"endswith",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return a.a.endsWith(O(e),O(t))})):a.a.endsWith(O(e),O(t))},restrict:["string","email","url","reference"]}),A.comparators.push({title:"Is similar to",operator:"like",match:function(e,t,r,n){return a.a.isArray(e)?a.a.some(e,(function(e){return A.isSimilar(e,t)})):A.isSimilar(e,t)},restrict:["string","url","email"]}),A.comparators.push({title:"Contains characters",operator:"contains",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?a.a.some(e,(function(e){return I(t,e)})):I(t,e)},restrict:["string","url","email"]}),A.comparators.push({title:"Does not contain characters",operator:"excludes",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?!a.a.some(e,(function(e){return I(t,e)})):!I(t,e)},restrict:["string","url","email"]}),A.comparators.push({title:"Is greater than",operator:">",match:function(e,t,r,n){return n||(n={}),parseFloat(e||0)>parseFloat(t||0)},restrict:["number","integer","decimal","float"]}),A.comparators.push({title:"Is less than",operator:"<",match:function(e,t,r,n){if(n||(n={}),!T(e))return parseFloat(e||0)<parseFloat(t||0)},restrict:["number","integer","decimal","float"]}),A.comparators.push({title:"Is not greater than",operator:"!>",match:function(e,t,r,n){return n||(n={}),!(parseFloat(e||0)>parseFloat(t||0))},restrict:["number","integer","decimal","float"]}),A.comparators.push({title:"Is not less than",operator:"!<",match:function(e,t,r,n){return n||(n={}),!(parseFloat(e||0)<parseFloat(t||0))},restrict:["number","integer","decimal","float"]}),A.comparators.push({title:"Is greater than or equal to",operator:">=",match:function(e,t,r,n){if(n||(n={}),!T(e))return parseFloat(e||0)>=parseFloat(t||0)},restrict:["number","integer","decimal","float"]}),A.comparators.push({title:"Is less than or equal to",operator:"<=",match:function(e,t,r,n){if(n||(n={}),!T(e))return parseFloat(e||0)<=parseFloat(t||0)},restrict:["number","integer","decimal","float"]}),A.comparators.push({title:"Is between",operator:"between",match:function(e,t,r,n){return n||(n={}),P(e,t,r)},restrict:["number","integer","decimal","float"],inputType:"range"}),A.comparators.push({title:"Is not between",operator:"notbetween",match:function(e,t,r,n){return n||(n={}),!P(e,t,r)},restrict:["number","integer","decimal","float"],inputType:"range"}),A.comparators.push({title:"Is empty",operator:"empty",match:function(e,t,r,n){return n||(n={}),x(e)},inputType:"none"}),A.comparators.push({title:"Is not empty",operator:"notempty",match:function(e,t,r,n){return n||(n={}),!x(e)},inputType:"none"}),A.comparators.push({title:"Does not start with",operator:"doesnotstartwith",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?!a.a.some(e,(function(e){return a.a.startsWith(O(e),O(t))})):!a.a.startsWith(O(e),O(t))},restrict:["string","email","url","reference"]}),A.comparators.push({title:"Does not end with",operator:"doesnotendwith",match:function(e,t,r,n){return n||(n={}),a.a.isArray(e)?!a.a.some(e,(function(e){return a.a.endsWith(O(e),O(t))})):!a.a.endsWith(O(e),O(t))},restrict:["string","email","url","reference"]});var R=["string","email","url","phone","date","boolean","number","integer","decimal","float","reference"];function F(e,t){return t._id||t.title||t.name||t.id?e[t._id||t.title||t.name||t.id]=t:e[t]=t}A.comparatorLookup={},A.comparatorTypeLookup={},a.a.each(A.comparators,(function(e){A.comparatorLookup[e.operator]=e;var t=e.restrict||[];t.length||(t=R),a.a.each(t,(function(t){var r=A.comparatorTypeLookup[t];r||(r=A.comparatorTypeLookup[t]=[]),r.push(e)}))})),A.getComparator=function(e){return A.comparatorLookup[e]},A.getComparatorsForType=function(e){return A.comparatorTypeLookup[e]||A.comparators},A.isValidFilter=function(e){if(e.operator)return a.a.some(e.filters,A.isValidFilter);var t=A.getComparator(e.comparator);if(t){var r=A.getRootKey(e.key);if(r&&r.length){switch(e.computedValue&&String(e.computedValue).length&&e.computedValue,t.inputType){case"none":return!0;case"range":if(!e.value||isNaN(e.value))return;if(!e.value2||isNaN(e.value2))return;break;case"daterange":if(!e.value||!a.a.isDate(new Date(e.value)))return;if(!e.value2||!a.a.isDate(new Date(e.value)))return;break;case"array":if(!e.values||!e.values.length)return;break;default:if(e.computedValue)return!0;if("boolean"==e.dataType)switch(String(e.value).toLowerCase()){case"yes":case"true":case"false":case"no":case"1":case"0":return!0;default:return}else if(!e.value||!a.a.isDate(new Date(e.value)))return}return!0}}},A.filterGroupMatch=function(e,t,r){t||(t={});var n,i=e.operator,o=a.a.chain(e.filters).filter(A.isValidFilter).orderBy((function(e){var t=e.dataType,r=e.comparator;if(!t&&!r)return 0;var n=function(e,t){for(var r=0,n=0,a="[]".length;(n=(e||"").indexOf("[]",n))>-1;)r++,n+=a;return r}(e.key),a=A.getComparatorWeight(r),i=0;switch(t){case"number":case"integer":case"decimal":case"float":i=2;break;case"date":i=3;break;case"reference":i=4;break;default:t="string",i=1}return parseInt("".concat(n).concat(i).concat(a))})).value();if(o&&o.length)switch(i){case"or":n=a.a.some(o,(function(e){return A.filterMatch(e,t,r)}));break;case"nor":n=!a.a.some(o,(function(e){return A.filterMatch(e,t,r)}));break;default:n=a.a.every(o,(function(e){return A.filterMatch(e,t,r)}))}return n},A.getRootKey=function(e){return String(e).split("|")[0]},A.filter=function(e,t){t||(t={});var r=t.search?String(t.search).toLowerCase().trim():null,n=(r||"").split(" "),i=t.startDate?new Date(t.startDate):null,o=t.endDate?new Date(t.endDate):null,s=t.filter,u=A.activeFilters(s),c=u&&u.length,l=r&&r.length,f=i&&o;return c||l||f?a.a.filter(e,(function(e){var t;if(!c||A.filterGroupMatch(s,void 0,e)){if(l){var u=String(e.title).trim().toLowerCase(),p=String(e._id).trim().toLowerCase();if(r==p)t=!0;else if(a.a.includes(u,r))t=!0;else{var d=(e.keywords||[]).join(" ");d.length&&(a.a.includes(d,r)||a.a.every(n,(function(e){return a.a.includes(u,e)||a.a.includes(d,e)})))&&(t=!0),t||(t=function e(t){return a.a.isString(t)?A.matchAnyString(r,t):a.a.isArray(t)||a.a.isObject(t)?a.a.some(t,(function(t){return e(t)})):void 0}(e))}if(!t)return}if(f){i.setHours(0,0,0,0),o.setHours(0,0,0,0);var m=new Date(row.startDate);m.setHours(0,0,0,0);var h=new Date(row.endDate);if(h.setHours(0,0,0,0),h<i)return;if(m>o)return}return!0}})):e},A.filterMatch=function(e,t,r){if(t||(t={}),e.filters)return A.filterGroupMatch(e,t,r);var n=e.key;if(a.a.includes(n,"[]")){var i=n.split("[]"),s=i.shift(),u=i.join("[]"),c=JSON.parse(JSON.stringify(e));c.key=u;var l=a.a.get(r,s)||[];if(function(e){switch(e){case"excludes":case"doesnotstartwith":case"doesnotendwith":case"!>":case"!<":case"!=":case"notbetween":case"notin":case"empty":case"datenotbetween":case"datenotafter":case"datenotbefore":return!0}}(c.comparator))return!l.length||a.a.every(l,(function(e){return A.filterMatch(c,t,e)}));if(!l.length)return;return a.a.some(l,(function(e){return A.filterMatch(c,t,e)}))}var f=A.getRootKey(n);"."==f[0]&&(f=f.slice(1));var p=e.value,d=e.value2;if("date"==e.dataType&&e.computedValue&&e.computedValue.length){var m=e.computedValue;if("now"==m)p=new Date;else{var h,g=t.contextDate?t.contextDate:new Date;if(t.timezone){var v=o.a.tz.zone(t.timezone);v&&(m="".concat(m," ").concat(v.abbr(g)))}h||(h=new Date(g).strtotime(m)),p=new Date(h)}}var y=A.getComparator(e.comparator||"=="),b=y.inputType;if(!f||!f.length)return!0;if(!("array"!=b||(p=e.values||[])&&p.length))return!0;if("none"!=b&&null==p)return!0;if(("range"==b||"daterange"==b)&&null==d)return!0;var w=a.a.get(r,f);if(a.a.includes(n,"|")){var D=n.split("|"),k=(D[0],D[1]);k&&"tags"!=f&&(w=a.a.filter(w,(function(e){return e.definition==k||e._discriminatorType==k||e._discriminator==k})))}if("boolean"===e.dataType)w=A.convertToBoolean(w),p=A.convertToBoolean(p);else if("none"!=b&&(null==p||""==p))return;if(e.criteria&&e.criteria.length){var S=f.split(".length")[0],M=a.a.get(r,S);M=M&&M.length?a.a.filter(M,(function(r){return A.filterMatch({filters:e.criteria},t,r)})):[],r._matchedFilters||(r._matchedFilters={}),r._matchedFilters[f]||(r._matchedFilters[f]=[]),r._matchedFilters[f].push(M.slice(0,100)),w=a.a.endsWith(f,".length")?M.length:M}return y.match(w,p,d,{source:r,key:f,timezone:t.timezone,contextDate:t.contextDate})},A.getComparatorWeight=function(e){switch(e){case"==":case"!=":case"empty":case"notempty":return 0;case">":case"<":case"!>":case"!<":case">=":case"<=":case"between":case"notbetween":return 1;case"startswith":case"endswith":case"doesnotstartwith":case"doesnotendwith":case"contains":case"excludes":return 2;case"in":case"notin":return 3;case"datesameday":case"dateanniversary":case"dateanniversarybetween":case"dateanniversarynext":case"dateanniversarypast":case"datesameweek":case"datesamemonth":case"datesameyear":case"datesameweekday":case"datedifferentweekday":case"datebefore":case"dateafter":case"datenotbefore":case"datenotafter":case"datebetween":case"datenotbetween":return 4;case"like":return 5}return 0},A.allKeys=function(e,t){e||(e=[]);var r=a.a.get(t,"type.definitionName"),n=a.a.chain(t).get("definition.fields").map((function(e){return"interaction"==r?Object.assign({},e,{prefixKey:"rawData"}):Object.assign({},e,{prefixKey:"data"})})).value(),i=a.a.chain(t).get("definition.filters").map((function(e){return Object.assign({},e)})).value(),o=a.a.chain(t).get("definition.dynamicFilters").map((function(e){return Object.assign({},e)})).value(),s=a.a.chain(t).get("type.fields").map((function(e){return Object.assign({},e)})).value();function u(e,t,r){return a.a.chain(e).map((function(e,n){e=Object.assign({},e);var a=[];if(t.length||e.prefixKey&&t.push(e.prefixKey),e.fields&&e.fields.length){(e.asObject||"embedded"==e.directive)&&(t.push(e.key),r.push(e.title),e.trail=t.slice(),e.titles=r.slice(),t.pop(),r.pop(),a.push(e),1!=e.maximum||1!=e.minimum&&e.asObject?(t.push(e.key+"[]"),r.push(e.title)):(t.push(e.key),r.push(e.title)));var i=u(e.fields,t,r);(e.asObject||"embedded"==e.directive)&&(t.pop(),r.pop()),a.push(i)}else t.push(e.key),r.push(e.title),e.trail=t.slice(),e.titles=r.slice(),t.pop(),r.pop(),a.push(e);return a})).flattenDeep().value()}var c=[];t&&t.details&&(c=a.a.reduce(t.details,(function(e,t){var r=u(t.fields,[],[]),n=a.a.chain(r).map((function(e){if("group"!=e.type)return{title:t.title+" - "+e.titles.join(" > "),key:"details.".concat(t.definitionName,".items[].data.").concat(e.trail.join(".")),minimum:e.minimum,maximum:e.maximum,detail:t.definitionName,type:e.type}})).compact().value();return n.unshift({title:t.title,key:"details.".concat(t.definitionName,".items[]._id"),minimum:0,maximum:0,detail:t.definitionName,type:"string"}),n.unshift({title:"".concat(t.title," - Number of sheets"),key:"details.".concat(t.definitionName,".items.length"),minimum:0,maximum:0,detail:t.definitionName,type:"integer"}),e.concat(n)}),[]));var l=u(e.concat(s,n,c,o,i),[],[]);return a.a.chain(l).reduce((function(e,t){if("object"==t.type)return e;t.key;var r=(t.trail||[]).join(".")||t.key,n=Object.assign({},t,{key:r,title:t.titles.join(" > ")});return e[r]=n,e}),{}).values().orderBy("title").value()},A.getDeepValue=function(e,t,r){if(a.a.includes(r,"[]")){var n=r.split("[]"),i=n.shift(),o=n.join("[]"),s=a.a.get(t,i)||[];return a.a.each(s,(function(t){A.getDeepValue(e,t,o)}))}var u=a.a.get(t,r);null!=u&&null!=u&&u!=[]&&""!=u&&(a.a.isArray(u)?u.length&&a.a.each(u,(function(t){F(e,t)})):F(e,u))},A.convertToBoolean=function(e){switch(String(e).toLowerCase(e)){case"true":case"yes":case"y":case"1":return!0;default:return!1}},A.extractDeepValues=function(e,t){var r={};return A.getDeepValue(r,e,t),a.a.values(r)};var L=A,U=function(e,t,r){r||(r={}),r.pageIndex||(r.pageIndex=0),r.perPage||(r.perPage=25);var n=e,i=r.criteria||{},o=Math.max(r.pageIndex,0),s=Math.min(r.perPage,200),u=!1,c=!1,l=r.fields||[],f=[],p=[],d=r.cacheKey,m=r.cumulative,h={},g=new y;g.bootstrap(h);var v=t.cache.get("listcache"),b=t.cache.get("pagecache"),w=t.cache.get("cumulativecache");return h.filter=function(){return u=!0,new Promise((function(e,r){var a="".concat(n,"-").concat(JSON.stringify(i),"-").concat(d||"none"),o=v.get(a);o?(f=o,g.dispatch("items",f),e(o),u=!1):t.content.filter(n,i).then((function(t){f=t,g.dispatch("items",f);var r=t;v.set(a,r),e(r),u=!1,g.dispatch("loadingFilter",u)})).catch((function(e){r(e),u=!1,g.dispatch("loadingFilter",u),g.dispatch("error",e)}))}))},h.reloadCurrentPage=function(){var e=Math.floor(s*o),r=e+s,i="".concat(l.join(","),"-").concat(d||"none");return c=!0,new Promise((function(o,s){h.filter().then((function(u){var f=m?0:e,v=u.slice(f,r),y=v.reduce((function(e,t){return e[t._id]=t,e}),{}),D=[];if(m){var k=a.a.map(v,(function(e){var t="".concat(i,"-").concat(e._id),r=w.get(t);return r||D.push(e._id),r}));if(!D.length)return A(k)}else D=t.utils.arrayIDs(v);g.dispatch("totalPages",h.totalPages);var S="".concat(m,"-").concat(D.join(","),"-").concat(l.join(","),"-").concat(d||"none"),M=b.get(S);return M?A(M):t.content.getMultiple(n,D,{select:l}).then((function(e){var t=e.reduce((function(e,t){return e[t._id]=t,e}),{});return A(m?v.map((function(e){var r="".concat(i,"-").concat(e._id);return w.get(r)||t[e._id]})):e)})).catch((function(e){s(e),c=!1,g.dispatch("loadingPage",c)}));function A(e){var t=e.map((function(e){var t=Object.assign({},y[e._id],e),r="".concat(i,"-").concat(e._id);return w.get(r)||w.set(r,t),t}));b.set(S,t),p=t,o(t),c=!1,g.dispatch("loadingPage",c),g.dispatch("page",p)}}))}))},h.nextPage=function(){h.pageIndex++},h.previousPage=function(){h.pageIndex--},Object.defineProperty(h,"loading",{get:function(){return u||c}}),Object.defineProperty(h,"perPage",{get:function(){return s},set:function(e){e||(e=25),e=Math.min(e,200),e=Math.max(e,0),s!=e&&(s=e,h.pageIndex=0,g.dispatch("perPage",s),g.dispatch("totalPages",h.totalPages),h.reloadCurrentPage())}}),Object.defineProperty(h,"cacheKey",{get:function(){return d},set:function(e){d!=e&&(d=e,h.reloadCurrentPage())}}),Object.defineProperty(h,"pageIndex",{get:function(){return o},set:function(e){e||(e=0);var t=Math.ceil(f.length/s);e=Math.min(e,t-1),e=Math.max(e,0),o!=e&&(o=e,g.dispatch("pageIndex",o),h.reloadCurrentPage())}}),Object.defineProperty(h,"items",{get:function(){return f}}),Object.defineProperty(h,"page",{get:function(){return p}}),Object.defineProperty(h,"totalPages",{get:function(){return Math.ceil(f.length/s)}}),Object.defineProperty(h,"total",{get:function(){return f.length}}),Object.defineProperty(h,"criteria",{get:function(){return i},set:function(e){JSON.stringify(i)!=JSON.stringify(e)&&(i=e,h.reloadCurrentPage())}}),Object.defineProperty(h,"fields",{get:function(){return l},set:function(e){JSON.stringify(l)!=JSON.stringify(e)&&(l=e,h.reloadCurrentPage())}}),Object.defineProperty(h,"type",{get:function(){return n},set:function(e){n!=e&&(n=e,h.reloadCurrentPage())}}),Object.defineProperty(h,"cumulative",{get:function(){return m},set:function(e){m!=e&&(m=e,h.reloadCurrentPage())}}),h.reloadCurrentPage(),h},N=r(6),z=function(e){if(!e.api)throw new Error("Can't Instantiate FluroAuth before FluroAPI exists");var t={},r={debug:!1};Object.defineProperty(r,"store",{value:t,writable:!1});var n=new y;function i(e){var a=t.user;r.onChange&&r.onChange(a),n.dispatch("change",a,e)}function o(e){r.debug&&console.log(e)}n.bootstrap(r),r.set=function(e,r,n){return t.user=e,o("fluro.auth > user set"),i(r)},r.logout=function(){return delete t.user,e.cache.reset(),o("fluro.auth > user logout"),e.withCredentials&&(window.location.href="/fluro/logout"),i()},r.changeAccount=function(t,n){t=e.utils.getStringID(t),n||(n={});var a=!0;n.disableAutoAuthenticate&&(a=!1);var i=e.api.post("/token/account/".concat(t));return i.then((function(t){a&&(e.cache.reset(),r.set(t.data))}),(function(e){})),i},r.impersonate=function(t,n){t=e.utils.getStringID(t),n||(n={});var a=!0;n.disableAutoAuthenticate&&(a=!1);var i=e.api.post("/token/persona/".concat(t));return i.then((function(t){a&&(e.cache.reset(),r.set(t.data))}),(function(e){})),i},r.login=function(r,n){n||(n={});var a=!0;return n.disableAutoAuthenticate&&(a=!1),new Promise((function(o,s){if(!r)return s({message:"Missing credentials!"});if(!r.username||!r.username.length)return s({message:"Username was not provided"});if(!r.password||!r.password.length)return s({message:"Password was not provided"});var u=e.apiURL+"/token/login";n.application&&(u="".concat(e.domain||"","/fluro/application/login")),n.managedAccount&&(u=e.apiURL+"/managed/"+n.managedAccount+"/login"),n.url&&(u=n.url),e.api.post(u,r,{bypassInterceptor:!0}).then((function(e){a&&(t.user=e.data,i()),o(e)}),s)}))},r.signup=function(r,n){n||(n={});var a=!0;return n.disableAutoAuthenticate&&(a=!1),new Promise((function(o,s){if(!r)return s({message:"No details provided"});if(!r.firstName||!r.firstName.length)return s({message:"First Name was not provided"});if(!r.lastName||!r.lastName.length)return s({message:"Last Name was not provided"});if(!r.username||!r.username.length)return s({message:"Email/Username was not provided"});if(!r.password||!r.password.length)return s({message:"Password was not provided"});if(!r.confirmPassword||!r.confirmPassword.length)return s({message:"Confirm Password was not provided"});if(r.confirmPassword!=r.password)return s({message:"Your passwords do not match"});var u=e.apiURL+"/user/signup";n.application&&(u="".concat(e.domain||"","/fluro/application/signup")),n.url&&(u=n.url),e.api.post(u,r,{bypassInterceptor:!0}).then((function(e){a&&(t.user=e.data,i()),o(e)}),s)}))},r.retrieveUserFromResetToken=function(t,r){return r||(r={}),new Promise((function(n,a){var i="".concat(e.apiURL,"/auth/token/").concat(t);r.application&&(i="".concat(e.domain||"","/fluro/application/reset/").concat(t)),r.url&&(i=r.url),e.api.get(i,{bypassInterceptor:!0}).then((function(e){return n(e.data)}),a)}))},r.updateUserWithToken=function(t,n,a){a||(a={});var i=!0;return a.disableAutoAuthenticate&&(i=!1),new Promise((function(o,s){var u="".concat(e.apiURL,"/auth/token/").concat(t);a.application&&(u="".concat(e.domain||"","/fluro/application/reset/").concat(t)),a.url&&(u=a.url),e.api.post(u,n,{bypassInterceptor:!0}).then((function(t){return i&&(e.cache.reset(),r.set(t.data)),o(t.data)}),s)}))},r.sendResetPasswordRequest=function(t,r){return r||(r={}),new Promise((function(n,a){if(!t)return a({message:"No details provided"});if(!t.username||!t.username.length)return a({message:"Email/Username was not provided"});t.email=t.username;var i=e.apiURL+"/auth/resend";r.application&&(i="".concat(e.domain||"","/fluro/application/forgot")),r.url&&(i=r.url),e.api.post(i,t,{bypassInterceptor:!0}).then(n,a)}))};var s={},u={};return r.refreshAccessToken=function(r,n,c){var l=c?u:s;return l.inflightRefreshRequest?(o("fluro.auth > use inflight request"),l.inflightRefreshRequest):(o("fluro.auth > refresh token new request"),l.inflightRefreshRequest=new Promise((function(s,u){o("fluro.auth > refresh token ".concat(r)),e.api.post("/token/refresh",{refreshToken:r,managed:n},{bypassInterceptor:!0,application:c}).then((function(r){if(!r)return o("fluro.auth > no res"),l.inflightRefreshRequest=null,u();e.GLOBAL_AUTH||c?e.app&&(e.app.user?(a.a.assign(e.app.user,r.data),e.app.user=e.app.user):e.app.user=r.data):t.user?Object.assign(t.user,r.data):t.user=r.data,o("fluro.auth > token refreshed > ".concat(r.data)),i(),s(r.data.token),setTimeout((function(){l.inflightRefreshRequest=null}))})).catch((function(e){console.log("TOKEN REFRESH FAILED",e),setTimeout((function(){l.inflightRefreshRequest=null})),u(e)}))})),l.inflightRefreshRequest)},r.sync=function(){return e.api.get("/session").then((function(r){r.data?e.GLOBAL_AUTH?e.app.user?e.app.user=Object.assign(e.app.user,r.data):e.app.user=r.data:t.user&&Object.assign(t.user,r.data):e.GLOBAL_AUTH?e.app.user=null:t.user=null,o("fluro.auth > server session refreshed"),i()})).catch((function(r){console.log("auth sync not logged in"),e.GLOBAL_AUTH?e.app.user=null:t.user=null,i()}))},r.getCurrentToken=function(){return(r.getCurrentUser()||{}).token||e.applicationToken},r.getCurrentUser=function(){return e.GLOBAL_AUTH?e.app.user:a.a.get(t,"user")},e.api.interceptors.request.use((function(n){if(n.bypassInterceptor)return console.log("auth interceptor was bypassed"),n;var i,s,u=n,c=e.applicationToken;if(n.application||e.GLOBAL_AUTH?(i=a.a.get(e,"app.user.token"),s=a.a.get(e,"app.user.refreshToken")):(i=a.a.get(t,"user.token"),s=a.a.get(t,"user.refreshToken")),!i)return c&&c.length?(u.headers.Authorization="Bearer "+c,o("fluro.auth > using app token"),u):(o("fluro.auth > no token"),u);if(u.headers.Authorization="Bearer "+i,o("fluro.auth > using user token"),!s)return o("fluro.auth > no refresh token"),u;var l,f=new Date;f.setSeconds(f.getSeconds()+10),l=n.application||e.GLOBAL_AUTH?a.a.get(e,"app.user.expires"):a.a.get(t,"user.expires");var p=new Date(l);if(r.debug)console.log("debug",f,p);else if(f<p)return u;var d=n.application||"managed"==a.a.get(t,"user.accountType");return e.GLOBAL_AUTH&&(d=!1),o("fluro.auth > token expired"),new Promise((function(e,t){r.refreshAccessToken(s,d,n.application).then((function(t){return o("fluro.auth > token refreshed"),u.headers.Authorization="Bearer "+t,e(u)})).catch((function(e){return console.log("ERRRRRR",e),o("fluro.auth > token refresh rejected"),t(e)}))}))}),(function(e){return Promise.reject(e)})),e.api.interceptors.response.use((function(e){return e}),(function(t){var n=a.a.get(t,"response.status")||t.status;if(401===(o("fluro.auth > error"),n)){if(console.log("ERROR CAPTURE HERE",t.response,t.config),a.a.get(t,"config.application")||e.GLOBAL_AUTH)return e.app&&(e.app.user=null),Promise.reject(t);console.log("logout from 401"),r.logout()}return Promise.reject(t)})),r},E=function(e){if(!e.utils)throw new Error("Can't Instantiate FluroComponents before FluroUtils exists");var t={debug:!1,hydrateModel:function(t,r){return new Promise((function(n,a){e.api.post("".concat(e.apiURL,"/components/").concat(t,"/hydrate"),r).then((function(e){n(e.data)})).catch(a)}))},loadComponentModule:function(t,r){return r||(r={fields:!0}),e.utils.injectModule("".concat(e.apiURL,"/components/").concat(t,"/module"),r)}};return t},B=function(e){var t,r={screen:{width:1920,height:1080}};this.window&&(r=this.window,t=this.window.devicePixelRatio>1);var n={};function a(t,r){if(r.extension&&r.extension.length?(r.title&&r.title.length?(t+="/file/".concat(r.title,".").concat(r.extension),delete r.title):r.filename&&r.filename.length?(t+="/file/".concat(r.filename,".").concat(r.extension),delete r.filename):t+="/file/file.".concat(r.extension),delete r.extension):r.filename&&r.filename.length&&(t+="/file/".concat(r.filename),delete r.filename),!r.withoutToken){var n=e.auth.getCurrentToken();!r.access_token&&n&&(r.access_token=n)}return e.app&&e.app.uuid&&(r.did=e.app.uuid),t}return n.getUrl=function(t,r){if((t=e.utils.getStringID(t))&&String(t).length){r||(r={});var n="".concat(e.apiURL,"/get/").concat(t);n=a(n,r);var i=e.utils.mapParameters(r);return i.length&&(n+="?"+i),n}},n.playerUrl=function(t,r){if((t=e.utils.getStringID(t))&&String(t).length){r||(r={});var n="".concat(e.apiURL,"/get/player?url=").concat(e.apiURL,"/get/").concat(t);n=a(n,r);var i=e.utils.mapParameters(r);return i.length&&(n+="?"+i),n}},n.avatarUrl=function(t,r,n){if((t=e.utils.getStringID(t))&&String(t).length){n||(n={}),r||(r="contact");var i="".concat(e.apiURL,"/get/avatar/").concat(r,"/").concat(t);i=a(i,n);var o=e.utils.mapParameters(n);return o.length&&(i+="?"+o),i}},n.coverUrl=n.coverImage=function(t,r,n){if((t=e.utils.getStringID(t))&&String(t).length){n||(n={}),r||(r="event");var i="".concat(e.apiURL,"/get/").concat(r,"/").concat(t);i=a(i,n);var o=e.utils.mapParameters(n);return o.length&&(i+="?"+o),i}},n.downloadUrl=function(t,r){if((t=e.utils.getStringID(t))&&String(t).length){r||(r={});var n="".concat(e.apiURL,"/download/").concat(t);n=a(n,r);var i=e.utils.mapParameters(r);return i.length&&(n+="?"+i),n}},n.typeFromMime=function(e){switch(e){case"image/jpeg":case"image/png":case"image/gif":case"image/bmp":case"image/svg+xml":return"image";case"video/mp4":case"video/quicktime":case"video/ogg":case"video/webm":return"video";case"audio/aac":case"audio/aiff":case"audio/mp3":case"audio/x-m4a":case"audio/mpeg":case"audio/ogg":case"audio/wav":case"audio/webm":return"audio";default:if(_.startsWith(e,"video/"))return"video";if(_.startsWith(e,"audio/"))return"audio"}return"asset"},n.posterUrl=function(n,i,o,s){if((n=e.utils.getStringID(n))&&String(n).length){s||(s={});var u,c=r.screen.width||1920;r.screen.width,u=t?960:600,c<=768&&(u=t?768:384),c<=320&&(u=t?320:160),i||o?(i&&(s.w=i,o||(s.h=Math.round(i*(9/16)))),o&&(s.h=o)):(s.w=u,s.h=Math.round(u*(9/16))),s.hasOwnProperty("quality")||(s.quality=80);var l="".concat(e.apiURL,"/get/").concat(n,"/poster");l=a(l,s);var f=e.utils.mapParameters(s);return f.length&&(l+="?"+f),l}},n.imageUrl=function(n,i,o,s){if((n=e.utils.getStringID(n))&&String(n).length){s||(s={});var u,c=e.apiURL+"/get/"+n;u=t?1920:1200,r.screen.width<=768&&(u=t?1536:768),r.screen.width<=320&&(u=t?640:320),i||o?(i&&(s.w=i),o&&(s.h=o)):s.w=u,s.quality||(s.quality=90),c=a(c,s);var l=e.utils.mapParameters(s);return l.length&&(c+="?"+l),c}},n.filesize=function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+""+["Bytes","kb","mb","gb","tb"][t]},n},H=r(3),q={},V={reset:function(){a.a.each(q,(function(e,t){e.reset()}))},get:function(e,t){return q[e]||(q[e]=new H.Cache(t)),q[e]}},G=function(e,t,r){var n={},i=new y;i.bootstrap(n);var o=t;r&&(o="_"+o);var s,u={key:o,name:t,ids:{}},c={};function l(e){Object.assign(u,e.data),p()}function f(e){p()}function p(){s=null,i.dispatch("change",u)}return n.dispatch=function(){n.onChange&&n.onChange(u),i.dispatch("change",u)},n.isStatted=function(t){return t=e.utils.getStringID(t),a.a.get(u,"ids['".concat(t,"']"))},n.isStatting=function(t){return t=e.utils.getStringID(t),c[t]},n.toggle=function(t){if(t=e.utils.getStringID(t),!r)throw Error("Can't use the toggle() method on a non-unique stat");return n.isStatted(t)?n.unset(t):n.set(t)},n.setProcessing=function(t,r){t=e.utils.getStringID(t),c[t]=r,i.dispatch("statting",{id:t,statting:r})},n.add=function(a){if(r)throw Error("Can't use the add() method on a non-unique stat");a=e.utils.getStringID(a);var o="".concat(e.apiURL,"/stat/").concat(a,"/").concat(t),s=e.api.delete(o,{cache:!1});return n.setProcessing(a,!0),s.then((function(e){u.ids[a]=e.data.total,n.setProcessing(a,!1),i.dispatch("change",u)}),(function(){n.setProcessing(a,!1)})),s},n.unset=function(a){if(!r)throw Error("Can't use the unset() method on a non-unique stat");a=e.utils.getStringID(a);var o="".concat(e.apiURL,"/stat/").concat(a,"/").concat(t,"?unique=true"),s=e.api.delete(o,{cache:!1});return n.setProcessing(a,!0),s.then((function(e){delete u.ids[a],n.setProcessing(a,!1),i.dispatch("change",u)}),(function(){n.setProcessing(a,!1)})),s},n.set=function(o){if(!r)throw Error("Can't use the set() method on a non-unique stat");o=e.utils.getStringID(o);var s="".concat(e.apiURL,"/stat/").concat(o,"/").concat(t,"?unique=true"),c=e.api.post(s,{cache:!1});return n.setProcessing(o,!0),c.then((function(e){u.ids[o]=!0,n.setProcessing(o,!1),i.dispatch("change",u)}),(function(e){n.setProcessing(o,!1),"ExistingUniqueStatError"==a.a.get(e,"response.data.name")&&(u.ids[o]=!0),i.dispatch("change",u)})),c},Object.defineProperty(n,"key",{value:o,writable:!1}),Object.defineProperty(n,"name",{value:t,writable:!1}),Object.defineProperty(n,"ids",{value:u.ids,writable:!1}),Object.defineProperty(n,"pending",{value:c,writable:!1}),n.refresh=function(){if(s)return s;var n,a="".concat(e.apiURL,"/stat/my/").concat(t);return r&&(a+="?unique=true"),n=e.auth.getCurrentUser()||e.applicationToken?e.api.get(a,{cache:!1}):new Promise((function(e){return e([])})),s=n,n.then(l,f),n},s=n.refresh().then(l,f),n},W=function(e,t,r,n){var i={total:0},o=new y;o.bootstrap(i);var s=t;n&&(s="_"+s);var u,c={key:s,name:t};function l(e){var t=a.a.get(e,"data.total");c.total=i.total=t,p()}function f(e){p()}function p(){i.processing=!1,o.dispatch("change",c),u=null}return Object.defineProperty(i,"key",{value:s,writable:!1}),Object.defineProperty(i,"name",{value:t,writable:!1}),i.refresh=function(){if(u)return u;var a="".concat(e.apiURL,"/stat/").concat(r,"/").concat(t);n&&(a+="?unique=true");var o=e.auth.getCurrentUser();return u=o||e.applicationToken?e.api.get(a,{cache:!1}):new Promise((function(e){return e([])})),i.processing=!0,u.then(l,f),u},u=i.refresh().then(l,f),i},J=function(e){if(!e.api)throw new Error("Can't Instantiate FluroStats before FluroAPI exists");var t={userStores:{},globalStores:{},set:function(r,n){var a=e.utils.getStringID(n);return t.getUserStore(r,!0).set(a)},unset:function(r,n){var a=e.utils.getStringID(n);return t.getUserStore(r,!0).unset(a)},refresh:function(){var e=[];return a.a.each(t.userStores,(function(t){e.push(t.refresh())})),a.a.each(t.globalStores,(function(t){e.push(t.refresh())})),Promise.all(e)},getGlobalStoresForKey:function(e){return a.a.filter(t.globalStores,(function(t){return t.key==e}))},getUserStore:function(r,n){if(r){var i=r;if(n&&(i="_"+i),t.userStores[i])return t.userStores[i];var o=new G(e,r,n);return o.addEventListener("change",(function(e){var r=t.getGlobalStoresForKey(e.key);setTimeout((function(){a.a.each(r,(function(e){e.refresh()}))}),1e3)})),t.userStores[i]=o,t.userStores[i]}},getStore:function(r,n,a){if(r){var i=r;a&&(i="_"+i);var o="".concat(i,".").concat(n);return t.globalStores[o]||(t.globalStores[o]=new W(e,r,n,a)),t.globalStores[o]}}};return t},K=function(e){var t,r={glossary:{},icon:function(e,t){var r;switch(t||(t="far"),e){case"academic":r="school";break;case"statsheet":r="calculator-alt";break;case"simpleemail":r="envelope";break;case"smscorrespondence":r="mobile-alt";break;case"deployment":r="cloud-upload";break;case"roster":r="clipboard-user";break;case"package":r="box-open";break;case"method":r="credit-card-front";break;case"resultset":r="poll-people";break;case"timetrigger":r="clock";break;case"user":case"persona":r="user";break;case"policy":r="id-card";break;case"account":r="browser";break;case"application":r="layer-group";break;case"article":r="file-alt";break;case"asset":r="file-archive";break;case"audio":r="file-audio";break;case"checkin":r="sign-in";break;case"capability":r="star";break;case"code":r="code";break;case"collection":r="folder";break;case"component":r="tachometer-alt";break;case"log":r="history";break;case"contact":r="child";break;case"definition":r="books-medical";break;case"contactdetail":r="file-invoice";break;case"eventtrack":r="random";break;case"event":r="calendar-star";break;case"family":r="home";break;case"team":r="users";break;case"attendance":r="calculator";break;case"image":r="image";break;case"conversation":r="comments-alt";break;case"integration":r="plug";break;case"interaction":r="compress";break;case"location":r="map-marked-alt";break;case"mailout":r="paper-plane";break;case"plan":r="clipboard-list";break;case"post":r="comment-alt-lines";break;case"process":r="exchange";break;case"product":r="shopping-cart";break;case"purchase":r="file-invoice-dollar";break;case"query":r="terminal";break;case"reaction":r="bolt";break;case"realm":r="bullseye";break;case"role":r="user-lock";break;case"site":case"sitemodel":r="sitemap";break;case"tag":r="tag";break;case"ticket":r="ticket-alt";break;case"transaction":r="usd-square";break;case"assignment":r="user-clock";break;case"video":r="video";break;case"form":r="file-signature"}if(r)return[t,r]},get:function(t,r){return r||(r={}),new Promise((function(n,a){e.api.get("/defined/type/".concat(t),r).then((function(e){n(e.data)}),a)}))},mapDefinitionItems:function(e,t){return e&&e.length?a.a.chain(e).reduce((function(e,n){var a=n.definition||t,i=e[a];return i||(i=e[a]={title:r.readable(a,!1,t),plural:r.readable(a,!0,t),key:a,entries:[]}),i.entries.push(n),e}),{}).values().orderBy((function(e){return e.key==t})).value():[]},all:function(t){return t||(t={}),new Promise((function(r,n){return e.api.get("/defined",t).then((function(e){r(e.data)}),n)}))},terms:function(n){return n||(n={}),t&&!n.forceRefresh?t:t=new Promise((function(t,i){return n||(n={cache:!1}),n.cache=!1,r.glossary={},e.api.get("/defined/terms",n).then((function(e){return a.a.each(e.data,(function(e,t){e.definitionName=t})),r.glossary=e.data,t(e.data)}),i)}))},reloadTerminology:function(e){return e||(e={forceRefresh:!0}),r.terms(e)}},n=["asset","checkin","image","audio","video","account","persona","application","deployment","article","assignment","post","resultset","timetrigger","onboard","code","component","collection","family","contact","method","contactdetail","personadetail","task","definition","endpoint","event","view","process","eventtrack","log","integration","interaction","location","package","product","purchase","query","realm","role","site","tag","team","roster","capability","plan","transaction","reaction","user","policy","mailout","ticket","academic","attendance"];return r.isBasicType=function(e){return a.a.includes(n,e)},r.readable=function(e,t){if("node"==e)return t?"Items":"Item";var n=e,i=r.glossary?r.glossary[n]:null;return i?t?i.plural:i.title:t?a.a.startCase(n)+"s":a.a.startCase(n)},r.term=function(e){return r.glossary?r.glossary[e]:null},r.parentType=function(e){var t=r.glossary?r.glossary[e]:null;return t&&(e=t.parentType||e),e},r.basicTypes=function(){var e=a.a.map(n,(function(e){return r.glossary[e]}));return Promise.resolve(e)},r.subTypes=function(e,t){var n=a.a.chain(r.glossary).reduce((function(t,r,n){return"archived"==r.status||(r.definitionName=n,r.parentType==e&&t.push(r)),t}),[]).orderBy((function(e){return e.title})).value();if(t){var i=r.glossary[e];i&&n.unshift(i)}return Promise.resolve(n)},r.processTypes=function(t,r){return r||(r={list:!0,strict:!1}),new Promise((function(n,i){console.log("GET THE PROCESS TYPES"),e.api.get("/process/types/".concat(t),{params:r}).then((function(e){var t=a.a.orderBy(e.data,(function(e){e.title}));n(t)}),i)}))},r.retrieve=function(t,r){return r||(r={}),r.types=t,new Promise((function(t,n){e.api.post("/defined",r).then((function(e){t(e.data)}),n)}))},r},Q=l.a.CancelToken,$=function(e){if(!e.api)throw new Error("Can't Instantiate FluroContent before FluroAPI exists");var t,r,n={search:function(r,n,a){return n||(n={}),n.limit||(n.limit=10),t&&t.cancel("Operation canceled by the user."),t=Q.source(),new Promise((function(i,o){if(!r||!r.length)return i([]);a||(a={}),a.params=n,a.cancelToken=t.token,e.api.get("/content/search/".concat(r),a).then((function(e){i(e.data)})).catch((function(e){l.a.isCancel(e)}))}))}},i={};return n.type=function(t,r){if(r||(r={}),!t)throw Error("No definition name was provided");return i[t]&&!1!==r.cache||(i[t]=new Promise((function(r,n){e.api.get("/defined/".concat(t)).then((function(e){r(e.data)})).catch((function(e){n(e)}))}))),i[t]},n.mention=function(t,n,a){return n||(n={}),n.limit||(n.limit=5),r&&r.cancel("Operation canceled by the user."),r=Q.source(),new Promise((function(i,o){if(!t||!t.length)return i([]);a||(a={}),a.params=n,a.cancelToken=r.token,e.api.get("/mention/".concat(t),a).then((function(e){i(e.data)})).catch((function(e){l.a.isCancel(e)}))}))},n.query=function(t,r,n){return t=e.utils.getStringID(t),r||(r={}),n||(n={params:{}}),new Promise((function(i,o){if(r.params&&(n.params=r.params),r.variables){var s=a.a.reduce(r.variables,(function(e,t,r){return e["variables[".concat(r,"]")]=t,e}),{});a.a.assign(n.params,s)}e.api.get("/content/_query/".concat(t),n).then((function(e){i(e.data)}),o)}))},n.get=function(t,r,n){return n||(n={}),t=e.utils.getStringID(t),r||(r={}),new Promise((function(a,i){r&&(n.params=r),e.api.get("/content/get/".concat(t),n).then((function(e){a(e.data)}),i)}))},n.external=function(t,r,n){return n||(n={}),r||(r={}),new Promise((function(a,i){r&&(n.params=r),e.api.get("/content/external/".concat(t),n).then((function(e){a(e.data)}),i)}))},n.slug=function(t,r,n){return n||(n={}),r||(r={}),new Promise((function(a,i){r&&(n.params=r),e.api.get("/content/slug/".concat(t),n).then((function(e){a(e.data)}),i)}))},n.retrieve=function(t,r,n){return r||(r={}),n||(n={}),new Promise((function(a,i){r&&(n.params=r),e.api.post("/content/_query",t,n).then((function(e){a(e.data)}),i)}))},n.related=function(t,r,n){if(!(t=e.utils.getStringID(t)))throw Error("No id specified ".concat(t));return n||(n={}),r||(r={}),new Promise((function(a,i){r&&(n.params=r),e.api.get("/content/related/".concat(t),n).then((function(e){a(e.data)}),i)}))},n.form=function(t,r,n){if(!(t=e.utils.getStringID(t)))throw Error("No id specified ".concat(t));return n||(n={}),r||(r={}),r.requestOptions&&(n=r.requestOptions),new Promise((function(r,a){e.api.get("/form/".concat(t),n).then((function(e){r(e.data)}),a)}))},n.submitInteraction=function(t,r,n){return n||(n={}),new Promise((function(a,i){var o=n;e.api.post("/interact/".concat(t),r,o).then((function(e){a(e.data)}),i)}))},n.submitPost=function(t,r,n,a){if(!(t=e.utils.getStringID(t)))throw Error("No target specified ".concat(t));return a||(a={}),new Promise((function(i,o){var s=a.requestOptions||{};e.api.post("/post/".concat(t,"/").concat(r),n,s).then((function(e){i(e.data)}),o)}))},n.thread=function(t,r,n){if(!(t=e.utils.getStringID(t)))throw Error("No target specified ".concat(t));return n||(n={}),new Promise((function(n,a){e.api.get("/post/".concat(t,"/").concat(r),{}).then((function(e){n(e.data)}),a)}))},n.values=function(t,r,n){if(t=e.utils.arrayIDs(t),!r|!r.length)throw Error("No key specified ");return n||(n={}),new Promise((function(i,o){var s={ids:t,key:r},u="/content/distinct/values";return n.type&&(u="/content/".concat(n.type,"/distinct/values")),e.api.post(u,s,n).then((function(e){i(a.a.orderBy(e.data,(function(e){return e.title||e})))}),o)}))},n.createDuplicate=function(e){e.definition||e._type;var t=JSON.parse(JSON.stringify(e));switch(delete t._id,delete t.slug,delete t.author,delete t.managedAuthor,delete t.__v,delete t.created,delete t.updated,delete t.updatedBy,delete t.stats,delete t.privateDetails,delete t._external,delete t.apikey,t._type){case"event":t.plans=[],t.assignments=[];break;case"mailout":t.state="ready",t.subject=t.title,t.title=t.title+" Copy",delete t.publishDate;break;case"plan":t.startDate=null;break;case"persona":t.user=null,t.collectionEmail="",t.username="",t.firstName="",t.lastName=""}return t.status="active",t.realms=[],delete t.account,Promise.resolve(t)},n.list=function(t,r){return new U(t,e,r)},n.filter=function(t,r){return new Promise((function(n,a){return e.api.post("/content/".concat(t,"/filter"),r).then((function(e){return n(e.data)})).catch(a)}))},n.getMultiple=function(t,r,n){return n||(n={}),r=e.utils.arrayIDs(r),new Promise((function(i,o){e.api.post("/content/".concat(t,"/multiple"),{ids:r,select:n.select?a.a.uniq(n.select):void 0,limit:r.length}).then((function(e){i(e.data)})).catch(o)}))},n.keys=function(t,r){if(!(t=e.utils.arrayIDs(t))|!t.length)throw Error("No ids specified ".concat(t));return r||(r={}),new Promise((function(n,a){var i={ids:t},o="/content/distinct/keys";return r.type&&(o="/content/".concat(r.type,"/distinct/keys")),e.api.post(o,i,r).then((function(e){n(e.data)}),a)}))},n.duplicate=function(t,r){r||(r={});var a=e.utils.getStringID(t);return new Promise((function(t,i){n.get(a).then((function(n){n.definition||n._type;var a=JSON.parse(JSON.stringify(n));switch(delete a._id,delete a.slug,delete a.author,delete a.managedAuthor,delete a.__v,delete a.created,delete a.updated,delete a.updatedBy,delete a.stats,delete a.privateDetails,delete a._external,delete a.apikey,r.customise||delete a.definitionName,a._type){case"event":a.plans=[],a.assignments=[];break;case"mailout":a.state="ready",a.subject=a.title,a.title=a.title+" Copy",delete a.publishDate;break;case"plan":a.startDate=null;break;case"persona":a.user=null,a.collectionEmail="",a.username="",a.firstName="",a.lastName=""}a.status="active";var i=e.utils.getStringID(a.account);return e.utils.getStringID(n.account)!=i&&(a.realms=[]),delete a.account,t(a)})).catch(i)}))},n},Z=function(e){if(!e.auth)throw new Error("Can't Instantiate FluroAccess before FluroAccess has been initialized");var t={},r={},n=new y;return n.bootstrap(r),r.setDefaultApplication=function(e){t.application=e,n.dispatch("application",e)},r.isFluroAdmin=function(e){var t=r.retrieveCurrentSession(e);if(t&&"administrator"==t.accountType&&!t.pretender)return!0},r.retrieveCurrentSession=function(r){var n;n=e.GLOBAL_AUTH?e.auth.getCurrentUser():r||e.userContextByDefault?e.app?e.app.user:null:e.auth.getCurrentUser();var a=t.application;return n||(a?a.session||a:void 0)},r.can=function(e,t,n,a){if(!r.retrieveCurrentSession(a))return console.log("No session"),!1;if(r.isFluroAdmin()&&!a)return!0;switch(e){case"view":return r.can("view any",t,n,a)||r.can("view own",t,n,a);case"edit":return r.can("edit any",t,n,a)||r.can("edit own",t,n,a)}var i="".concat(e," ").concat(t).trim(),o=[];switch(e){case"view any":var s=r.retrieveActionableRealms("view any "+t,a),u=r.retrieveActionableRealms("edit any "+t,a);o=(o=o.concat(s)).concat(u);break;case"view own":var c=r.retrieveActionableRealms("view own "+t,a),l=r.retrieveActionableRealms("edit own "+t,a);o=(o=o.concat(c)).concat(l);break;default:o=r.retrieveActionableRealms(i,a)}if(o.length)return!0;if(n&&n.length){if(!r.retrieveActionableRealms("include defined "+n,a).length)return!1;switch(e){case"view any":r.retrieveActionableRealms("view any "+n,a),r.retrieveActionableRealms("edit any "+n,a),o=(o=o.concat(s)).concat(u);break;case"view own":var f=r.retrieveActionableRealms("view own "+n,a),p=r.retrieveActionableRealms("edit own "+n,a);o=(o=o.concat(f)).concat(p);break;default:o=r.retrieveActionableRealms(e+" "+n,a)}if(o.length)return!0}return!1},r.canKnowOf=function(t,n,i){if(!r.retrieveCurrentSession(i))return!1;if(r.isFluroAdmin()&&!i)return!0;var o=["view any","view own","view any","edit own","edit any","create"];return!!a.a.some(o,(function(e){return r.can(e,t,n,i)}))||(e.types&&e.types.glossary?a.a.some(r.glossary,(function(e,n){if(e.parentType==t)return a.a.some(o,(function(e){return r.can(e,n,null,i)}))})):void 0)},r.retrieveActionableRealms=function(e,t){var n=r.retrieveCurrentSession(t);if(!n)return[];var i=n.permissionSets;return a.a.chain(i).map((function(t,r){if(a.a.includes(t.permissions,e)){var n=[];return function e(t,r){t.children&&t.children.length&&t.children.forEach((function(t){e(t,r)})),r.push(String(t._id))}(t,n),n}})).flatten().compact().value()},r.has=function(e,t){var n=r.retrieveCurrentSession(t);if(!n)return!1;if(r.isFluroAdmin()&&!t)return!0;var i=n.permissionSets,o=a.a.chain(i).reduce((function(e,t,r){return e.push(t.permissions),e}),[]).flattenDeep().compact().uniq().value();return a.a.includes(o,e)},r.isAuthor=function(t,n){var i=r.retrieveCurrentSession(n);if(!i)return!1;if(!t)return!1;var o=e.utils.getStringID(i),s=o==e.utils.getStringID(t.author);if(s)return!0;var u=e.utils.getStringID(i.persona);if(u==e.utils.getStringID(t.managedAuthor)&&(s=!0),s)return!0;var c=e.utils.arrayIDs(t.owners);if(c&&c.length&&(s=a.a.includes(c,o)),s)return!0;var l=e.utils.arrayIDs(t.managedOwners);l&&l.length&&(s=a.a.includes(l,u));var f=e.utils.getStringID(t);return o==f&&(s=!0),u==f&&(s=!0),s},r.canEditItem=function(t,n,i){if(!t)return!1;var o=r.retrieveCurrentSession(i);if(!o)return!1;var s=e.utils.getStringID(t),u=e.utils.getStringID(o.account),c=e.utils.getStringID(t.account);if(c&&c!=u)return!1;if(r.isFluroAdmin())return!0;if(t._type&&"realm"!=t._type&&t.realms&&!t.realms.length)return!0;var l,f=t._type;if(t.definition&&(f=t.definition,l=t._type),"process"==t._type){if(t.assignedTo&&t.assignedTo.length&&(p=a.a.intersection(e.utils.arrayIDs(t.assignedTo),o.contacts))&&p.length)return!0;if(t.assignedToTeam&&t.assignedToTeam.length){var p,d=a.a.map(o.visibleRealms,"_team");if((p=a.a.intersection(config.arrayIDs(t.assignedToTeam),d))&&p.length)return!callback||callback(!0)}}var m,h=r.isAuthor(t),g=r.retrieveActionableRealms("edit any "+f,i),v=r.retrieveActionableRealms("edit own "+f,i);if("realm"==f||"realm"==l?(m=e.utils.arrayIDs(t.trail)).push(s):m=e.utils.arrayIDs(t.realms),l&&l.length&&r.retrieveActionableRealms("include defined "+l,i).length){var y=r.retrieveActionableRealms("edit any "+l,i);g=g.concat(y);var b=r.retrieveActionableRealms("edit own "+l,i);v=v.concat(b)}return!!a.a.intersection(g,m).length||!(!h||!a.a.intersection(v,m).length)},r.canViewItem=function(t,n,i){if(!t)return!1;if(!r.retrieveCurrentSession(i))return!1;if(r.isFluroAdmin())return!0;if(t._type&&"realm"!=t._type&&t.realms&&!t.realms.length)return!0;var o,s=e.utils.getStringID(t),u=t._type;t.definition&&(u=t.definition,o=t._type);var c=r.isAuthor(t),l=r.retrieveActionableRealms("view any "+u,i),f=r.retrieveActionableRealms("view own "+u,i),p=r.retrieveActionableRealms("edit any "+u,i),d=r.retrieveActionableRealms("edit own "+u,i),m=[];m=(m=m.concat(l)).concat(p);var h,g=[];if(g=(g=g.concat(f)).concat(d),"realm"==u||"realm"==o?(h=e.utils.arrayIDs(t.trail),console.log("PUSH?",h),h.push(s)):h=e.utils.arrayIDs(t.realms),o&&o.length&&r.retrieveActionableRealms("include defined "+o,i).length){var v=r.retrieveActionableRealms("edit any "+o,i),y=r.retrieveActionableRealms("view any "+o,i);m=m.concat(v,y);var b=r.retrieveActionableRealms("edit own "+o,i),w=r.retrieveActionableRealms("view own "+o,i);g=g.concat(b,w)}return!!a.a.intersection(m,h).length||!(!c||!a.a.intersection(g,h).length)},r.canDeleteItem=function(t,n,i){if(!t)return!1;var o=r.retrieveCurrentSession(i);if(!o)return!1;var s=e.utils.getStringID(t),u=e.utils.getStringID(o.account),c=e.utils.getStringID(t.account);if(c&&c!=u)return!1;if(r.isFluroAdmin())return!0;if(t._type&&"realm"!=t._type&&t.realms&&!t.realms.length)return!0;var l,f=t._type;t.definition&&(f=t.definition,l=t._type);var p,d=r.isAuthor(t),m=r.retrieveActionableRealms("delete any "+f,i),h=r.retrieveActionableRealms("delete own "+f,i);if("realm"==f||"realm"==l?(p=e.utils.arrayIDs(t.trail)).push(s):p=e.utils.arrayIDs(t.realms),l&&l.length&&r.retrieveActionableRealms("include defined "+l,i).length){var g=r.retrieveActionableRealms("delete any "+l,i);m=m.concat(g);var v=r.retrieveActionableRealms("delete own "+l,i);h=h.concat(v)}return!!a.a.intersection(m,p).length||!(!d||!a.a.intersection(h,p).length)},r.retrieveSelectableRealms=function(t,r,n,a){a||(a={});var i={definition:r,parentType:n,type:n};return a.flat&&(i.flat=!0),new Promise((function(t,r){e.api.get("/realm/selectable",{params:i}).then((function(e){return t(e.data)}),r)}))},r.retrievePermissions=function(t){return new Promise((function(r,n){console.log("Reload terminology for permissions"),e.types.reloadTerminology(t).then((function(e){var t=a.a.reduce(e,(function(e,t){var r=t.parentType;if(!r)return e;var n=e[r];return n||(n=e[r]={names:[],types:[]}),n.names.push(t.plural),n.types.push(t),e}),{}),n=a.a.chain(e).reduce((function(r,n){var a=(n=JSON.parse(JSON.stringify(n))).parentType||n.definitionName,i=n.definitionName,o=(e[a]&&e[a].title,i==a);if("account"===(n.permissions=[],r.push(n),i))return o=!1,n.permissions.push({title:"Administrate Account Information",value:"administrate account",description:"Update billing, view invoices, add credit and modify Account Information"}),r;switch(a){case"simpleemail":case"smscorrespondence":o=!1,n.permissions.push({title:"Create new ".concat(n.plural),value:"create ".concat(i),description:"Can create new ".concat(n.plural)}),n.permissions.push({title:"View any ".concat(n.plural),value:"view any ".concat(i),description:"Can view ".concat(n.plural," regardless of who the sender is")}),n.permissions.push({title:"View owned ".concat(n.plural),value:"view own ".concat(i),description:"Can view ".concat(n.plural," that were originally sent by the user")});break;default:n.permissions.push({title:"Create new ".concat(n.plural),value:"create ".concat(i),description:"Can create new ".concat(n.plural)}),n.permissions.push({title:"View any ".concat(n.plural),value:"view any ".concat(i),description:"Can view ".concat(n.plural," regardless of who the creator is")}),n.permissions.push({title:"View owned ".concat(n.plural),value:"view own ".concat(i),description:"Can view ".concat(n.plural," that were originally created by the user, or the user is listed as an 'owner'")}),n.permissions.push({title:"Edit any ".concat(n.plural),value:"edit any ".concat(i),description:"Can edit ".concat(n.title," regardless of who the creator is")}),n.permissions.push({title:"Edit owned ".concat(n.plural),value:"edit own ".concat(i),description:"Can edit ".concat(n.plural," that were originally created by the user, or the user is listed as an 'owner'")}),n.permissions.push({title:"Delete any ".concat(n.plural),value:"delete any ".concat(i),description:"Can delete ".concat(n.plural," regardless of who the creator is")}),n.permissions.push({title:"Delete owned ".concat(n.plural),value:"delete own ".concat(i),description:"Can delete ".concat(n.plural," that were originally created by the user, or the user is listed as an 'owner'")}),n.permissions.push({title:"Destroy any ".concat(n.plural),value:"destroy any ".concat(i),description:"Can destroy ".concat(n.plural," permanently from the trash regardless of who the creator is")}),n.permissions.push({title:"Destroy owned ".concat(n.plural),value:"destroy own ".concat(i),description:"Can destroy ".concat(n.plural," permanently from the trash that were originally created by the user, or the user is listed as an 'owner'")}),n.permissions.push({title:"Restore any ".concat(n.plural),value:"restory any ".concat(i),description:"Can restore ".concat(n.plural," from the trash. regardless of who the creator is")}),n.permissions.push({title:"Restore owned ".concat(n.plural),value:"restory own ".concat(i),description:"Can restore ".concat(n.plural," from the trash. that were originally created by the user, or the user is listed as an 'owner'")})}switch(i){case"interaction":case"post":n.permissions.push({title:"Submit new ".concat(n.plural),value:"submit ".concat(i),description:"Can submit new ".concat(n.plural," through the use of a form.")});break;case"transaction":n.permissions.push({title:"Refund ".concat(n.plural),value:"refund ".concat(i),description:"Can process ".concat(n.plural," refunds")});break;case"contact":n.permissions.push({title:"Send SMS Text Message",value:"sms",description:"Can send SMS Messages to ".concat(n.plural," that the user is allowed to view")}),n.permissions.push({title:"Send Basic Emails",value:"email",description:"Can send email messages via fluro to contacts that the user is allowed to view"});break;case"checkin":n.permissions.push({title:"Leader Override Checkout ".concat(n.plural),value:"leader checkout ".concat(i),description:"Can manually override and checkout a contact without providing the PIN Number"});break;case"ticket":n.permissions.push({title:"Scan / Collect ".concat(n.plural),value:"collect ".concat(i),description:"Can scan a ticket and mark it as 'collected'"});break;case"policy":n.permissions.push({title:"Grant ".concat(n.plural),value:"grant ".concat(i),description:"Can allocate any ".concat(n.plural," to other users")}),n.permissions.push({title:"Grant held ".concat(n.plural),value:"grant held ".concat(i),description:"Can allocate ".concat(n.plural," that are held by the current user to other users")}),n.permissions.push({title:"Revoke ".concat(n.plural),value:"revoke ".concat(i),description:"Can revoke ".concat(n.plural," from other users")});break;case"role":n.permissions.push({title:"Assign individual ".concat(n.plural),value:"assign role",description:"Can assign individual permission sets to other users"});break;case"persona":n.permissions.push({title:"Assign individual roles",value:"assign role",description:"Can assign individual permission sets to other users"}),n.permissions.push({title:"Impersonate ".concat(n.plural),value:"impersonate",description:"Can impersonate other user personas"});break;case"team":n.permissions.push({title:"Join ".concat(n.plural),value:"join ".concat(i),description:"Can join or add members to ".concat(n.plural," if those ").concat(n.plural," allow provisional membership")}),n.permissions.push({title:"Leave ".concat(n.plural),value:"leave ".concat(i),description:"Can leave or remove members from ".concat(n.plural," if those ").concat(n.plural," allow provisional membership")})}if(o){var s=t[a],u="Apply all the selected permissions to all ".concat(n.title," definitions");s&&(u="Apply all the selected permissions to all ".concat(n.title," definitions, Eg. (").concat(s.names.join(", "),")")),n.permissions.push({title:"Include all defined ".concat(n.title," types"),value:"include defined ".concat(i),description:u})}return r}),[]).orderBy("title").value();r(n)})).catch(n)}))},r},X=function(){var e,t,r={mounted:!1,screen:{width:1024,height:768},limits:{xs:600,sm:960,md:1264,lg:1904},breakpoint:{mobile:!1,tablet:!1,desktop:!1,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xsOnly:!1,smOnly:!1,smAndDown:!1,smAndUp:!1,mdOnly:!1,mdAndDown:!1,mdAndUp:!1,lgOnly:!1,lgAndDown:!1,lgAndUp:!1,xlOnly:!1,point:0},resize:function(){var e=Math.max(t.innerWidth||0),n=Math.max(t.innerHeight||0);r.screen={width:e,height:n};var a={mobile:!1,tablet:!1,desktop:!1,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xsOnly:!1,smOnly:!1,smAndDown:!1,smAndUp:!1,mdOnly:!1,mdAndDown:!1,mdAndUp:!1,lgOnly:!1,lgAndDown:!1,lgAndUp:!1,xlOnly:!1,point:0},i=0;e>r.limits.xs&&i++,e>r.limits.sm&&i++,e>r.limits.md&&i++,e>r.limits.lg&&i++,i<1&&(a.mobile=!0,a.xs=!0,a.xsOnly=!0,a.smAndDown=!0,a.mdAndDown=!0,a.lgAndDown=!0),1==i&&(a.tablet=!0,a.sm=!0,a.smOnly=!0,a.smAndDown=!0,a.mdAndDown=!0,a.lgAndDown=!0,a.smAndUp=!0),2==i&&(a.desktop=!0,a.md=!0,a.mdOnly=!0,a.mdAndDown=!0,a.lgAndDown=!0,a.smAndUp=!0,a.mdAndUp=!0),3==i&&(a.desktop=!0,a.lg=!0,a.lgOnly=!0,a.lgAndDown=!0,a.smAndUp=!0,a.mdAndUp=!0,a.lgAndUp=!0),i>3&&(a.desktop=!0,a.xl=!0,a.xlOnly=!0,a.smAndUp=!0,a.mdAndUp=!0,a.lgAndUp=!0),r.point=i,r.breakpoint=a},mount:function(n){e?console.log("already mounted"):(t=n,r.resize(),e=!0,r.mounted=!0,t.addEventListener("resize",r.resize))},destroy:function(){t.removeEventListener("resize",r.resize),t=!1,e=!1,r.mounted=!1}};return r},ee=function(e){switch(e||(e={}),e.apiURL&&e.apiURL.length||(e.apiURL="production"),String(e.apiURL).toLowerCase()){case"production":e.apiURL="https://api.fluro.io";break;case"staging":e.apiURL="https://api.staging.fluro.io";break;case"local":e.apiURL="http://api.fluro.localhost:3000"}var t=Object.assign(e,{domain:e.domain||"",global:{},resetCache:function(){V.reset(),i.dispatch("cache.reset")}}),r=V;Object.defineProperty(t,"cache",{value:r,writable:!1});var n=g;Object.defineProperty(t,"utils",{value:n,writable:!1});var a=X;Object.defineProperty(t,"device",{value:a,writable:!1});var i=new y;i.bootstrap(t),t.error=function(e){return t.dispatch("error",n.errorMessage(e))},t.notify=function(e,r){return t.dispatch("notification",{message:e,options:r})};var o=b;Object.defineProperty(t,"date",{value:o,writable:!1});var s=new N.a(t);Object.defineProperty(t,"api",{value:s,writable:!1});var u=new N.a(t,!0);Object.defineProperty(t,"appContextAPI",{value:u,writable:!1});var c=new $(t);Object.defineProperty(t,"content",{value:c,writable:!1});var l=new z(t);Object.defineProperty(t,"auth",{value:l,writable:!1});var f=new E(t);Object.defineProperty(t,"components",{value:f,writable:!1});var p=k;Object.defineProperty(t,"video",{value:p,writable:!1});var d=new B(t);Object.defineProperty(t,"asset",{value:d,writable:!1}),new J(t),Object.defineProperty(t,"stats",{value:new J(t),writable:!1});var m=new K(t);Object.defineProperty(t,"types",{value:m,writable:!1});var h=new Z(t);return Object.defineProperty(t,"access",{value:h,writable:!1}),t};r.d(t,"FluroDate",(function(){return b})),r.d(t,"FluroUtils",(function(){return g})),r.d(t,"FluroVideo",(function(){return k})),r.d(t,"EventDispatcher",(function(){return y})),r.d(t,"FilterService",(function(){return L})),r.d(t,"FluroContentListService",(function(){return U})),console.log("fluro 2.2.33"),ee.utils=g,ee.date=b,ee.moment=b.moment,ee.video=k,ee.FilterService=L,ee.FluroDate=b,ee.FluroUtils=g,ee.FluroContentListService=U,ee.EventDispatcher=y,t.default=ee}]).default},"object"==d(t)&&"object"==d(e)?e.exports=l(r(0),r(492),r(629),r(637),r(4)):(o=[r(0),r(492),r(629),r(637),r(4)],void 0===(c="function"==typeof(n=l)?n.apply(t,o):n)||(e.exports=c))}).call(this,r(159)(e))}}]);